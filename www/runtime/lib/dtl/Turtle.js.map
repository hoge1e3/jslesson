{"version":3,"sources":["/home/devel/devel/Turtle/Turtle.dtl"],"names":[],"mappings":"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","sourcesContent":["//NOGENERATOR\r\n// system ! \"Actor\" use.\r\n//test3\r\nturtle=Actor ! create.\r\nTurtle=turtle.\r\nTurtle:baseURL=window:runtimePath+\"images/\".\r\nTurtle:img=\"ayumi.gif\".\r\nturtle:action=[/*:window!\"aa\"alert*/].\r\nturtle:initialize=[|;t|\r\n    t=this.//@hoge1e3\r\n    element= ! \"image\" createSVGElem.\r\n    element ! 0 get \r\n    \"http://www.w3.org/1999/xlink\" \"href\" \r\n    (baseURL+img) setAttributeNS.\r\n    !adjustImage.\r\n    ! (baseURL+img) getImageSize .\r\n    element ! \"transform\" \"scale(1,-1)\" attr.\r\n    element ! [t!action] click.//@hoge1e3\r\n    [_lineCol]!else[! \"black\" lineColor]execute.\r\n    !newLineG.\r\n    isShowing=false.\r\n    !appear.\r\n    self:pos=self:pos!(Vec2:O)add.\r\n    self:dir=self:dir.\r\n].\r\nturtle:width=32.\r\nturtle:height=32.\r\nturtle:_lineWidth=3.\r\nturtle:isPenDown=true.\r\n\r\nturtle:adjustImage=[\r\n    element ! \"width\" (width+\"px\") attr\r\n    \"height\" (height+\"px\") attr\r\n    \"x\" (-width/2) attr\r\n    \"y\" (-height/2) attr.\r\n].\r\nturtle:getImageSize=[|url;t|\r\n    t=this.\r\n    $ ! \"<img>\" create \"display\" \"none\" css [|;j|\r\n        j=(t:$) ! (this) create.\r\n        t:width=j ! width.\r\n        t:height=j ! height.\r\n        //(t:console) ! \"getims\" (t:width) (t:height) log.\r\n        t!adjustImage.\r\n        j!remove.\r\n    ] load \"src\" (url) attr \"body\" appendTo.\r\n].\r\nturtle:newLineG=[\r\n    lineG=! \"g\" createSVGElem (svg_g) appendTo.\r\n    lineG ! \"transform\" (\"translate(\"+(pos:x)+\" \"+(pos:y)+\")\") attr.\r\n    lineOrig=pos.\r\n].\r\nturtle:addPath=[|pos1 pos2;line|// pos:world coord\r\n    pos1=pos1 ! (lineOrig) sub.\r\n    pos2=pos2 ! (lineOrig) sub.\r\n    line=! \"line\" createSVGElem\r\n    \"x1\" (pos1:x) attr \"y1\" (pos1:y) attr\r\n    \"x2\" (pos2:x) attr \"y2\" (pos2:y) attr \r\n    \"style\" (\"stroke:\"+_lineCol+\";stroke-width:\"+_lineWidth) attr\r\n    \"data-width\" (_lineWidth) attr\r\n    (lineG) appendTo.\r\n    this.\r\n].\r\nturtle:addPathAfterAction=[|a;pos1|\r\n    pos1=pos.\r\n    a ! execute.\r\n    //console ! \"PEND\" (isPenDown) log.\r\n    //[[isShowing]![isPendown]or] ! then  // <-これだとペンなしが効かなくなるよー\r\n    [isPenDown] ! then [\r\n        ! (pos1) (pos) addPath.\r\n    ] execute.\r\n    this.\r\n].\r\nturtle:forward=[|by|\r\n    ! [(Actor:forward) ! (this) (by) call.] addPathAfterAction.\r\n].\r\nturtle:moveTo=[|x y|\r\n    ! [(Actor:moveTo) ! (this) (x) (y) call.] addPathAfterAction.\r\n].\r\nturtle:circle=[|r;d|\r\n    d=r * 0.1745328.\r\n    !(d/2)backward.\r\n    [!(d)forward 10 rightTurn] !36 repeat。\r\n    !(d/2)forward\r\n].\r\nturtle:closePath=[\r\n    [isPenDown]!then[\r\n        //! (pos) (lineOrig) addPath.\r\n        ! (lineOrig:x)(lineOrig:y)moveTo.\r\n    ]execute.\r\n    self.\r\n].\r\nturtle!\"closePath\" \"close\" addAlias.\r\nturtle:lineColor=[|col|\r\n    [col]!then[_lineCol=col]execute.\r\n    this.\r\n].\r\nturtle:lineWidth=[|w|\r\n    w=!(w)num.\r\n    _lineWidth=w.this.\r\n].\r\nturtle:makeFigure=[|col;r|\r\n    r=Figure ! (this) create.\r\n    [col]! then[r!(col) paint]execute.\r\n    ! newLineG.\r\n    r.\r\n].\r\nturtle:paint=[|col|\r\n    !(col) makeFigure.\r\n].\r\nturtle:penDown=[\r\n    [isPenDown]!then [] else [isPenDown=true. !newLineG] execute. \r\n    this\r\n].\r\nturtle:penUp=[isPenDown=false.this.].\r\nturtle:setShape=[|url|\r\n    self:img=url.\r\n    url=[url ! \"https?\" match] ! then [url] else [baseURL+url] execute.\r\n    element ! 0 get \r\n    \"http://www.w3.org/1999/xlink\" \"href\" \r\n    (url) setAttributeNS.\r\n    ! (url) getImageSize.\r\n    this.\r\n].\r\nturtle ! \"setShape\" \"change\" addAlias.\r\nturtle:setTrans=[|;str|\r\n    str=\"translate(\"+(pos:x)+\" \"+(pos:y)+\") \".\r\n    str=str+\"rotate(\"+dir+\") \".\r\n    str=str+\"scale(\"+_scale+\" \"+(0-_scale)+\") \".\r\n    element ! \"transform\" (str) attr\r\n    \"data-trans\" ((pos:x)+\",\"+(pos:y)+\",\"+dir) attr.\r\n    [isShowing] ! then [ ! checkCrash ] execute.\r\n    this.\r\n].\r\nturtle:polygon=[|d n|\r\n    [self!(d)forward(360/n)rightturn]!(n)repeat.\r\n].\r\n:action=[].\r\n:action:isEventHandler=true.\r\n:click=[].\r\n:click:isEventHandler=true.\r\nturtle:setAction=[|f|\r\n    [(!(f)typeof)==\"function\"]!then[\r\n        self:action=f.    \r\n    ]execute.\r\n    self.\r\n]."]}