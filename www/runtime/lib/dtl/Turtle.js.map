{"version":3,"sources":["/home/0123/dolittle/Turtle/Turtle.dtl"],"names":[],"mappings":"aACC,eAAO;CACP,eAAO;CACP,cAAO,aAAQ,cAAO;CACtB,cAAO;CACP,cAAO,WALN;;;CAMD,cAAO,eANN;;;CAAA,AAOG,EAPH;CAQG;CACA,uBATJ,+DAWK,gBAAQ;;wBAEN,gBAAQ;CACX;CACA,yBAfF;;QAAD,AAec;;;;CAGX,kBAAU;;;CAGd,cAAO,UApBA;CAqBP,cAAO,WArBA;CAsBP,cAAO,eAvBJ;CAwBH,cAAO,cAAU;CAEjB,cAAO,gBA1BN;;QA2BG,kCAAmB,yCACT,sCACJ,cA7BR,sBA8BQ,eA9BR;;CAgCF,cAAO,iBAhCN,sBAgCqB;;;CAhCrB,AAiCG,EAjCH;QAkCG,8DAlCF;;;CAAA,AAmCM,GAnCP,AAmCU,CAAE,kBAnCX;CAAD,AAoCO,CAAE,UApCR,AAoCc;CApCf,AAqCO,CAAE,WArCR,AAqCe;CArChB,AAuCO;QAvCN,AAwCM;oBAxCP,AAyCiB;;CAElB,cAAO,aA3CN;;CA4CG,sDAA2B;CAC3B,qDAAmC,WAAI,cAAQ,WAAI;QACnD,iBAAS;;CAEb,cAAO,YAhDN,sBAgDgB,KAAK;;;CAhDrB,AAiDG,KAjDH,AAiDQ,aAAQ;CAjDhB,AAkDG,KAlDH,AAkDQ,aAAQ;CAlDhB,AAmDG,iDAnDH,AAoDS,IAAK,sBApDd,AAoD4B,IAAK,sBApDjC,AAqDS,IAAK,sBArDd,AAqD4B,IAAK,sCACX,oCAA0B,4CAC/B,kCACb;QAxDJ;;CA2DD,cAAO,uBA3DN,sBA2D2B;;;CA3D3B,AA4DG,KAAK;CA5DR,AA6DG;CACA,+BAAkB;CA9DpB;;QAgEG;yBAhEH;;yBAAD,AAiEU,OAAO;;QAjEjB;;CAqED,cAAO,YArEN,sBAqEgB;;mCArEf;;SAsEM,aAAM,sBAtEZ,OAAD,AAsEgC;;;CAEjC,cAAO,WAxEN,sBAwEe,EAAE;;mCAxEhB;;SAyEM,aAAM,qBAzEZ,OAAD,AAyE+B,IAzE/B,AAyEmC;;;CAEpC,cAAO,UA3EN;;CAAC;;QA4EG;yBA5EH;;wBA8ES,gBAAS,QAAG,gBAAS;;QA9E/B;;CAkFD,cAAO,eAlFN;;uBAAD,IAAA;;CAqFA,cAAO,cArFN,sBAqFkB;;CACf,iBAtFH,AAsFY;QAtFZ;;CAwFD,cAAO,cAxFN,sBAwFkB;;CAxFlB,AAyFG,eAzFH,AAyFO;CACJ,mBA1FH,AA0Fc;QA1Fd;;CA4FD,cAAO,eA5FN,sBA4FmB;;;CA5FnB,AA6FG,EAAE,0BA7FL;CAAC;;QAAD,AA8FI;yBA9FH;;QAAD,AA8Fe,YA9Ff,AA8FkB;;;QA9FlB,AAgGG;;CAEJ,cAAO,YAlGN;;CAAC;;QAmGG;sBAnGH;;uBAAA;;CAmG4B,kBAAU;;;QAnGvC;;CAsGD,cAAO,UAtGN;;CAsGa,kBAAU;QAtGvB;;CAuGD,cAAO,WAvGN,sBAuGe;;CAvGf,IAwGQ,QAxGR,AAwGY;CAxGZ,AAyGG,IAzGF;;QAAD,AAyGQ;sBAzGP;;QAAD,AAyGsC;gBAzGrC;;SAyGgD,gBAzGjD,AAyGyD;;CACtD,uBA1GJ,8DAAC,AA4GI;uBA5GJ,AA6GM;QA7GN;;CAgHD,cAAO,aAhHN;;;CAAA,AAiHG,sBAAkB,WAAI,cAAQ,WAAI;CAjHrC,AAkHG,OAlHH,AAkHO,eAAc;CAlHrB,AAmHG,KAnHH,AAmHO;CACJ,qCApHH,AAoH0B,iCACR,WAAI,aAAQ,WAAI,aAAO;CArHxC;;QAsHG;yBAtHH;;;;QAAD;;QAyHD,cAAO,cAzHN,sBAyHkB;;CAzHjB;;0BAAD,AA0HO;yBA1HN;;QAAA,IA2HW,WA3HZ,AA2HmB;;QA3HnB","sourcesContent":["// system ! \"Actor\" use.\nturtle=Actor ! create.\nTurtle=turtle.\nTurtle:baseURL=window:runtimePath+\"images/\".\nTurtle:img=\"ayumi.gif\".\nturtle:action=[/*:window!\"aa\"alert*/].\nturtle:initialize=[|;t|\n    t=this.//@hoge1e3\n    element= ! \"image\" createSVGElem.\n    element ! 0 get \n    \"http://www.w3.org/1999/xlink\" \"href\" \n    (baseURL+img) setAttributeNS.\n    !adjustImage.\n    ! (baseURL+img) getImageSize .\n    element ! \"transform\" \"scale(1,-1)\" attr.\n    element ! [t!action] click.//@hoge1e3\n    ! \"black\" lineColor.\n    !newLineG.\n    isShowing=false.\n    !appear.\n].\nturtle:width=32.\nturtle:height=32.\nturtle:_lineWidth=3.\nturtle:isPenDown=true.\n\nturtle:adjustImage=[\n    element ! \"width\" (width+\"px\") attr\n    \"height\" (height+\"px\") attr\n    \"x\" (-width/2) attr\n    \"y\" (-height/2) attr.\n].\nturtle:getImageSize=[|url;t|\n    t=this.\n    $ ! \"<img>\" create \"display\" \"none\" css [|;j|\n        j=(t:$) ! (this) create.\n        t:width=j ! width.\n        t:height=j ! height.\n        //(t:console) ! \"getims\" (t:width) (t:height) log.\n        t!adjustImage.\n        j!remove.\n    ] load \"src\" (url) attr \"body\" appendTo.\n].\nturtle:newLineG=[\n    lineG=! \"g\" createSVGElem (svg_g) appendTo.\n    lineG ! \"transform\" (\"translate(\"+(pos:x)+\" \"+(pos:y)+\")\") attr.\n    lineOrig=pos.\n].\nturtle:addPath=[|pos1 pos2;line|// pos:world coord\n    pos1=pos1 ! (lineOrig) sub.\n    pos2=pos2 ! (lineOrig) sub.\n    line=! \"line\" createSVGElem\n    \"x1\" (pos1:x) attr \"y1\" (pos1:y) attr\n    \"x2\" (pos2:x) attr \"y2\" (pos2:y) attr \n    \"style\" (\"stroke:\"+_lineCol+\";stroke-width:\"+_lineWidth) attr\n    \"data-width\" (_lineWidth) attr\n    (lineG) appendTo.\n    this.\n].\nturtle:addPathAfterAction=[|a;pos1|\n    pos1=pos.\n    a ! execute.\n    console ! \"PEND\" (isPenDown) log.\n    //[[isShowing]![isPendown]or] ! then  // <-これだとペンなしが効かなくなるよー\n    [isPenDown] ! then [\n        ! (pos1) (pos) addPath.\n    ] execute.\n    this.\n].\nturtle:forward=[|by|\n    ! [(Actor:forward) ! (this) (by) call.] addPathAfterAction.\n].\nturtle:moveTo=[|x y|\n    ! [(Actor:moveTo) ! (this) (x) (y) call.] addPathAfterAction.\n].\nturtle:close=[\n    [isPenDown]!then[\n        //! (pos) (lineOrig) addPath.\n        ! (lineOrig:x)(lineOrig:y)moveTo.\n    ]execute.\n    self.\n].\nturtle:moveCenter=[\n    !0 0 moveTo.\n].\nturtle:lineColor=[|col|\n    _lineCol=col.this.\n].\nturtle:lineWidth=[|w|\n    w=!(w)num.\n    _lineWidth=w.this.\n].\nturtle:makeFigure=[|col;r|\n    r=Figure ! (this) create.\n    [col]! then[r!(col) paint]execute.\n    ! newLineG.\n    r.\n].\nturtle:penDown=[\n    [isPenDown]!then [] else [isPenDown=true. !newLineG] execute. \n    this\n].\nturtle:penUp=[isPenDown=false.this.].\nturtle:change=[|url|\n    self:img=url.\n    url=[url ! \"https?\" match] ! then [url] else [baseURL+url] execute.\n    element ! 0 get \n    \"http://www.w3.org/1999/xlink\" \"href\" \n    (url) setAttributeNS.\n    ! (url) getImageSize.\n    this.\n].\nturtle:setTrans=[|;str|\n    str=\"translate(\"+(pos:x)+\" \"+(pos:y)+\") \".\n    str=str+\"rotate(\"+dir+\") \".\n    str=str+\"scale(1 -1) \".\n    element ! \"transform\" (str) attr\n    \"data-trans\" ((pos:x)+\",\"+(pos:y)+\",\"+dir) attr.\n    [isShowing] ! then [ ! checkCrash ] execute.\n    this.\n].\nturtle:setAction=[|f|\n    [(!(f)typeof)==\"function\"]!then[\n        self:action=f.    \n    ]execute.\n    self.\n].\n"]}