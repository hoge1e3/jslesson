{"version":3,"sources":["/Tonyu/Projects/Turtle/Turtle.dtl"],"names":[],"mappings":"aACC,eAAO;CACP,eAAO;CACP,cAAO,aAAQ,cAAO;CACtB,cAAO;CACP,cAAO,eALN;;CAMG;CACA,uBAPJ,+DASK,gBAAQ;;wBAEN,gBAAQ;CACX;;;CAGA,kBAAU;;;CAGd,cAAO,UAjBA;CAkBP,cAAO,WAlBA;CAmBP,cAAO,eApBJ;CAqBH,cAAO,cAAU;CACjB,cAAO,gBAtBN;;QAuBG,kCAAmB,yCACT,sCACJ,cAzBR,sBA0BQ,eA1BR;;CA4BF,cAAO,iBA5BN,sBA4BqB;;;CA5BrB,AA6BG,EA7BH,AA6BK;QACF,8DA9BF;;;CAAA,AA+BM,GA/BP,AA+BU,CAAE,kBA/BX,AA+BiB;CA/BlB,AAgCO,CAAE,UAhCR,AAgCc;CAhCf,AAiCO,CAAE,WAjCR,AAiCe;CAjChB,AAmCO;QAnCN,AAoCM;oBApCP,AAqCiB;;CAElB,cAAO,aAvCN;;CAwCG,sDAA2B;CAC3B,qDAAmC,WAAI,cAAQ,WAAI;QACnD,iBAAS;;CAEb,cAAO,YA5CN,sBA4CgB,KAAK;;;CA5CrB,AA6CG,KA7CH,AA6CQ,aAAQ;CA7ChB,AA8CG,KA9CH,AA8CQ,aAAQ;CA9ChB,AA+CG,iDA/CH,AAgDS,IAAK,sBAhDd,AAgD4B,IAAK,sBAhDjC,AAiDS,IAAK,sBAjDd,AAiD4B,IAAK,sCACX,oCAA0B,4CAC/B,kCACb;QApDJ,AAqDG;;CAEJ,cAAO,uBAvDN,sBAuD2B;;;CAvD3B,AAwDG,KAAK;CAxDR,AAyDG;CAzDF;;QA0DG;yBA1DH;;yBAAD,AA2DU,OAAO;;QA3DjB,AA6DG;;CAEJ,cAAO,YA/DN,sBA+DgB;;mCA/Df;;SAgEM,aAAM,sBAhEZ,AAgEwB,OAhEzB,AAgEgC;;;CAEjC,cAAO,WAlEN,sBAkEe,EAAE;;mCAlEhB;;SAmEM,aAAM,qBAnEZ,AAmEuB,OAnExB,AAmE+B,IAnE/B,AAmEmC;;;CAEpC,cAAO,UArEN;;yBAsEM,cAAM;;CAEb,cAAO,cAxEN,sBAwEkB;;CACf,iBAzEH,AAyEY;QAzEZ,AAyEgB;;CAEjB,cAAO,cA3EN,sBA2EkB;;CACf,mBA5EH,AA4Ec;QA5Ed,AA4EgB;;CAEjB,cAAO,eA9EN,sBA8EmB;;;CA9EnB,AA+EG,EAAE,0BA/EL,AA+Ee;CA/Ed;;QAAD,AAgFI;yBAhFH;;QAAD,AAgFe,YAhFf,AAgFkB;;;QAhFlB,AAkFG;;CAEJ,cAAO,YApFN;;CAAC;;QAqFG;sBArFH;;uBAAA;;CAqF4B,kBAAU;;;QArFvC,AAsFG;;CAEJ,cAAO,UAxFN;;CAwFa,kBAAU;QAxFvB,AAwF6B;;CAC9B,cAAO,WAzFN,sBAyFe;;CAzFf,AA0FG,IAAK,QA1FR,AA0FY;CA1FZ,AA2FG,IA3FF;;QAAD,AA2FQ;sBA3FP;;QAAD,AA2FsC;gBA3FrC;;SA2FgD,gBA3FjD,AA2FyD;;CACtD,uBA5FJ,8DAAC,AA8FI;uBA9FJ,AA+FM;QA/FN,AAgGG;;QAEJ,cAAO,aAlGN;;;CAAA,AAmGG,sBAAkB,WAAI,cAAQ,WAAI;CAnGrC,AAoGG,OApGH,AAoGO,eAAc;CApGrB,AAqGG,KArGH,AAqGO;CACJ,qCAtGH,AAsG0B,iCACR,WAAI,aAAQ,WAAI,aAAO;CAvGxC;;QAwGG;yBAxGH;;;;QAAD,AAyGG","sourcesContent":["// system ! \"Actor\" use.\nturtle=Actor ! create.\nTurtle=turtle.\nTurtle:baseURL=window:runtimePath+\"images/\".\nTurtle:img=\"ayumi.gif\".\nturtle:initialize=[\n    element= ! \"image\" createSVGElem.\n    element ! 0 get \n    \"http://www.w3.org/1999/xlink\" \"href\" \n    (baseURL+img) setAttributeNS.\n    !adjustImage.\n    ! (baseURL+img) getImageSize .\n    element ! \"transform\" \"scale(1,-1)\" attr.\n    ! \"black\" lineColor.\n    !newLineG.\n    isShowing=false.\n    !appear.\n].\nturtle:width=32.\nturtle:height=32.\nturtle:_lineWidth=3.\nturtle:isPenDown=true.\nturtle:adjustImage=[\n    element ! \"width\" (width+\"px\") attr\n    \"height\" (height+\"px\") attr\n    \"x\" (-width/2) attr\n    \"y\" (-height/2) attr.\n].\nturtle:getImageSize=[|url;t|\n    t=this.\n    $ ! \"<img>\" create \"display\" \"none\" css [|;j|\n        j=(t:$) ! (this) create.\n        t:width=j ! width.\n        t:height=j ! height.\n        //(t:console) ! \"getims\" (t:width) (t:height) log.\n        t!adjustImage.\n        j!remove.\n    ] load \"src\" (url) attr \"body\" appendTo.\n].\nturtle:newLineG=[\n    lineG=! \"g\" createSVGElem (svg_g) appendTo.\n    lineG ! \"transform\" (\"translate(\"+(pos:x)+\" \"+(pos:y)+\")\") attr.\n    lineOrig=pos.\n].\nturtle:addPath=[|pos1 pos2;line|// pos:world coord\n    pos1=pos1 ! (lineOrig) sub.\n    pos2=pos2 ! (lineOrig) sub.\n    line=! \"line\" createSVGElem\n    \"x1\" (pos1:x) attr \"y1\" (pos1:y) attr\n    \"x2\" (pos2:x) attr \"y2\" (pos2:y) attr \n    \"style\" (\"stroke:\"+_lineCol+\";stroke-width:\"+_lineWidth) attr\n    \"data-width\" (_lineWidth) attr\n    (lineG) appendTo.\n    this.\n].\nturtle:addPathAfterAction=[|a;pos1|\n    pos1=pos.\n    a ! execute.\n    [isPenDown] ! then [\n        ! (pos1) (pos) addPath.\n    ] execute.\n    this.\n].\nturtle:forward=[|by|\n    ! [(Actor:forward) ! (this) (by) call.] addPathAfterAction.\n].\nturtle:moveTo=[|x y|\n    ! [(Actor:moveTo) ! (this) (x) (y) call.] addPathAfterAction.\n].\nturtle:close=[\n    ! (pos) (lineOrig) addPath.\n].\nturtle:lineColor=[|col|\n    _lineCol=col.this.\n].\nturtle:lineWidth=[|w|\n    _lineWidth=w.this.\n].\nturtle:makeFigure=[|col;r|\n    r=Figure ! (this) create.\n    [col]! then[r!(col) paint]execute.\n    ! newLineG.\n    r.\n].\nturtle:penDown=[\n    [isPenDown]!then [] else [isPenDown=true. !newLineG] execute. \n    this\n].\nturtle:penUp=[isPenDown=false.this.].\nturtle:change=[|url|\n    self:img=url.\n    url=[url ! \"https?\" match] ! then [url] else [baseURL+url] execute.\n    element ! 0 get \n    \"http://www.w3.org/1999/xlink\" \"href\" \n    (url) setAttributeNS.\n    ! (url) getImageSize.\n    this.\n].\nturtle:setTrans=[|;str|\n    str=\"translate(\"+(pos:x)+\" \"+(pos:y)+\") \".\n    str=str+\"rotate(\"+dir+\") \".\n    str=str+\"scale(1 -1) \".\n    element ! \"transform\" (str) attr\n    \"data-trans\" ((pos:x)+\",\"+(pos:y)+\",\"+dir) attr.\n    [isShowing] ! then [ ! checkCrash ] execute.\n    this.\n].\n"]}