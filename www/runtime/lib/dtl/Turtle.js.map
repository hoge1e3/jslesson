{"version":3,"sources":["/home/devel/devel/Turtle/Turtle.dtl"],"names":[],"mappings":"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","sourcesContent":["// system ! \"Actor\" use.\n//test3\nturtle=Actor ! create.\nTurtle=turtle.\nTurtle:baseURL=window:runtimePath+\"images/\".\nTurtle:img=\"ayumi.gif\".\nturtle:action=[/*:window!\"aa\"alert*/].\nturtle:initialize=[|;t|\n    t=this.//@hoge1e3\n    element= ! \"image\" createSVGElem.\n    element ! 0 get \n    \"http://www.w3.org/1999/xlink\" \"href\" \n    (baseURL+img) setAttributeNS.\n    !adjustImage.\n    ! (baseURL+img) getImageSize .\n    element ! \"transform\" \"scale(1,-1)\" attr.\n    element ! [t!action] click.//@hoge1e3\n    [_lineCol]!else[! \"black\" lineColor]execute.\n    !newLineG.\n    isShowing=false.\n    !appear.\n    self:pos=self:pos!(Vec2:O)add.\n    self:dir=self:dir.\n].\nturtle:width=32.\nturtle:height=32.\nturtle:_lineWidth=3.\nturtle:isPenDown=true.\n\nturtle:adjustImage=[\n    element ! \"width\" (width+\"px\") attr\n    \"height\" (height+\"px\") attr\n    \"x\" (-width/2) attr\n    \"y\" (-height/2) attr.\n].\nturtle:getImageSize=[|url;t|\n    t=this.\n    $ ! \"<img>\" create \"display\" \"none\" css [|;j|\n        j=(t:$) ! (this) create.\n        t:width=j ! width.\n        t:height=j ! height.\n        //(t:console) ! \"getims\" (t:width) (t:height) log.\n        t!adjustImage.\n        j!remove.\n    ] load \"src\" (url) attr \"body\" appendTo.\n].\nturtle:newLineG=[\n    lineG=! \"g\" createSVGElem (svg_g) appendTo.\n    lineG ! \"transform\" (\"translate(\"+(pos:x)+\" \"+(pos:y)+\")\") attr.\n    lineOrig=pos.\n].\nturtle:addPath=[|pos1 pos2;line|// pos:world coord\n    pos1=pos1 ! (lineOrig) sub.\n    pos2=pos2 ! (lineOrig) sub.\n    line=! \"line\" createSVGElem\n    \"x1\" (pos1:x) attr \"y1\" (pos1:y) attr\n    \"x2\" (pos2:x) attr \"y2\" (pos2:y) attr \n    \"style\" (\"stroke:\"+_lineCol+\";stroke-width:\"+_lineWidth) attr\n    \"data-width\" (_lineWidth) attr\n    (lineG) appendTo.\n    this.\n].\nturtle:addPathAfterAction=[|a;pos1|\n    pos1=pos.\n    a ! execute.\n    //console ! \"PEND\" (isPenDown) log.\n    //[[isShowing]![isPendown]or] ! then  // <-これだとペンなしが効かなくなるよー\n    [isPenDown] ! then [\n        ! (pos1) (pos) addPath.\n    ] execute.\n    this.\n].\nturtle:forward=[|by|\n    ! [(Actor:forward) ! (this) (by) call.] addPathAfterAction.\n].\nturtle:moveTo=[|x y|\n    ! [(Actor:moveTo) ! (this) (x) (y) call.] addPathAfterAction.\n].\nturtle:circle=[|r;d|\n    d=r * 0.1745328.\n    !(d/2)backward.\n    [!(d)forward 10 rightTurn] !36 repeat。\n    !(d/2)forward\n].\nturtle:closePath=[\n    [isPenDown]!then[\n        //! (pos) (lineOrig) addPath.\n        ! (lineOrig:x)(lineOrig:y)moveTo.\n    ]execute.\n    self.\n].\nturtle!\"closePath\" \"close\" addAlias.\nturtle:lineColor=[|col|\n    [col]!then[_lineCol=col]execute.\n    this.\n].\nturtle:lineWidth=[|w|\n    w=!(w)num.\n    _lineWidth=w.this.\n].\nturtle:makeFigure=[|col;r|\n    r=Figure ! (this) create.\n    [col]! then[r!(col) paint]execute.\n    ! newLineG.\n    r.\n].\nturtle:paint=[|col|\n    !(col) makeFigure.\n].\nturtle:penDown=[\n    [isPenDown]!then [] else [isPenDown=true. !newLineG] execute. \n    this\n].\nturtle:penUp=[isPenDown=false.this.].\nturtle:setShape=[|url|\n    self:img=url.\n    url=[url ! \"https?\" match] ! then [url] else [baseURL+url] execute.\n    element ! 0 get \n    \"http://www.w3.org/1999/xlink\" \"href\" \n    (url) setAttributeNS.\n    ! (url) getImageSize.\n    this.\n].\nturtle ! \"setShape\" \"change\" addAlias.\nturtle:setTrans=[|;str|\n    str=\"translate(\"+(pos:x)+\" \"+(pos:y)+\") \".\n    str=str+\"rotate(\"+dir+\") \".\n    str=str+\"scale(\"+_scale+\" \"+(0-_scale)+\") \".\n    element ! \"transform\" (str) attr\n    \"data-trans\" ((pos:x)+\",\"+(pos:y)+\",\"+dir) attr.\n    [isShowing] ! then [ ! checkCrash ] execute.\n    this.\n].\nturtle:polygon=[|d n|\n    [self!(d)forward(360/n)rightturn]!(n)repeat.\n].\n:action=[].\n:action:isEventHandler=true.\n:click=[].\n:click:isEventHandler=true.\nturtle:setAction=[|f|\n    [(!(f)typeof)==\"function\"]!then[\n        self:action=f.    \n    ]execute.\n    self.\n]."]}