{"version":3,"sources":["/Tonyu/Projects/Turtle/Turtle.dtl"],"names":[],"mappings":"aACC,eAAO;CACP,eAAO;CACP,8BAAiB,cAAO,YAAS;CACjC,cAAO,YAJN;;UAIiB,cAAO,YAAS,mCAJlC;sBAAC;;;gBAAA;;;;CASD,cAAO,eATN;;CAUG;CACA,uBAXJ,+DAaK;;CAMD;;;;;;CAUJ,cAAO,UA5BA;CA6BP,cAAO,WA7BA;CA8BP,cAAO,eA/BJ;CAgCH,cAAO,cAAU;CACjB,cAAO,gBAjCN;;QAkCG,kCAAmB,yCACT,sCACJ,cApCR,sBAqCQ,eArCR;;CAuCF,cAAO,iBAvCN,sBAuCqB;;;CAvCrB,AAwCG,EAxCH,AAwCK;QACF,8DAzCF;;;CAAA,AA0CM,GA1CP,AA0CU,CAAE,kBA1CX,AA0CiB;CA1ClB,AA2CO,CAAE,UA3CR,AA2Cc;CA3Cf,AA4CO,CAAE,WA5CR,AA4Ce;CA5ChB,AA8CO;QA9CN,AA+CM;oBA/CP,AAgDiB;;CAElB,cAAO,aAlDN;;CAmDG,sDAA2B;CAC3B,qDAAmC,WAAI,cAAQ,WAAI;QACnD,iBAAS;;CAEb,cAAO,YAvDN,sBAuDgB,KAAK;;;CAvDrB,AAwDG,KAxDH,AAwDQ,aAAQ;CAxDhB,AAyDG,KAzDH,AAyDQ,aAAQ;CAzDhB,AA0DG,iDA1DH,AA2DS,IAAK,sBA3Dd,AA2D4B,IAAK,sBA3DjC,AA4DS,IAAK,sBA5Dd,AA4D4B,IAAK,sCACX,oCAA0B,4CAC/B,kCACb;QA/DJ,AAgEG;;CAEJ,cAAO,uBAlEN,sBAkE2B;;;CAlE3B,AAmEG,KAAK;CAnER,AAoEG;CApEF;;QAqEG;yBArEH;;yBAAD,AAsEU,OAAO;;QAtEjB,AAwEG;;CAEJ,cAAO,YA1EN,sBA0EgB;;mCA1Ef;;SA2EM,aAAM,sBA3EZ,AA2EwB,OA3EzB,AA2EgC;;;CAEjC,cAAO,WA7EN,sBA6Ee,EAAE;;mCA7EhB;;SA8EM,aAAM,qBA9EZ,AA8EuB,OA9ExB,AA8E+B,IA9E/B,AA8EmC;;;CAEpC,cAAO,UAhFN;;yBAiFM,cAAM;;CAEb,cAAO,cAnFN,sBAmFkB;;CACf,iBApFH,AAoFY;QApFZ,AAoFgB;;CAEjB,cAAO,cAtFN,sBAsFkB;;CACf,mBAvFH,AAuFc;QAvFd,AAuFgB;;CAEjB,cAAO,eAzFN,sBAyFmB;;;CAzFnB,AA0FG,EAAE,0BA1FL,AA0Fe;CA1Fd;;QAAD,AA2FI;yBA3FH;;QAAD,AA2Fe,YA3Ff,AA2FkB;;;QA3FlB,AA6FG;;CAEJ,cAAO,YA/FN;;CAAC;;QAgGG;sBAhGH;;uBAAA;;CAgG4B,kBAAU;;;QAhGvC,AAiGG;;CAEJ,cAAO,UAnGN;;CAmGa,kBAAU;QAnGvB,AAmG6B;;CAC9B,cAAO,WApGN,sBAoGe;;CApGf,AAqGG,KAAI,gBArGP,AAqGe;CACZ,uBAtGJ,8DAAC,AAwGI;uBAxGJ,AAyGM;QAzGN,AA0GG;;QAEJ,cAAO,aA5GN;;;CAAA,AA6GG,sBAAkB,WAAI,cAAQ,WAAI;CA7GrC,AA8GG,OA9GH,AA8GO,eAAc;CA9GrB,AA+GG,KA/GH,AA+GO;CACJ,qCAhHH,AAgH0B,iCACR,WAAI,aAAQ,WAAI,aAAO;;QAjHzC,AAmHG","sourcesContent":["// system ! \"Actor\" use.\nturtle=Actor ! create.\nTurtle=turtle.\nconsole ! \"LOC\" (window:location:href) log.\nTurtle:baseURL=[ (window:location:href ! \"localhost\" indexOf) >= 0 ] ! then [\n    \"http://localhost/runtime/images/\"\n] else [\n    \"http://klab.eplang.jp/jslesson/runtime/images/\"    \n] execute.  \nturtle:initialize=[\n    element= ! \"image\" createSVGElem.\n    element ! 0 get \n    \"http://www.w3.org/1999/xlink\" \"href\" \n    (baseURL+\"ayumi.gif\") setAttributeNS.\n    !adjustImage.\n    //element ! \"width\" (width+\"px\") attr\n    //\"height\" (height+\"px\") attr\n    //\"x\" (-width/2) attr\n    //\"y\" (-height/2) attr\n    element ! \"transform\" \"scale(1,-1)\" attr.\n    //(svg_g) appendTo.\n    //pos=Vec2! 0 0 create.\n    //dir=0.\n    //isPenDown=true.\n    ! \"black\" lineColor.\n    !appear.\n    !newLineG.\n    !setTrans.\n].\nturtle:width=32.\nturtle:height=32.\nturtle:_lineWidth=3.\nturtle:isPenDown=true.\nturtle:adjustImage=[\n    element ! \"width\" (width+\"px\") attr\n    \"height\" (height+\"px\") attr\n    \"x\" (-width/2) attr\n    \"y\" (-height/2) attr.\n].\nturtle:getImageSize=[|url;t|\n    t=this.\n    $ ! \"<img>\" create \"display\" \"none\" css [|;j|\n        j=(t:$) ! (this) create.\n        t:width=j ! width.\n        t:height=j ! height.\n        //(t:console) ! \"getims\" (t:width) (t:height) log.\n        t!adjustImage.\n        j!remove.\n    ] load \"src\" (url) attr \"body\" appendTo.\n].\nturtle:newLineG=[\n    lineG=! \"g\" createSVGElem (svg_g) appendTo.\n    lineG ! \"transform\" (\"translate(\"+(pos:x)+\" \"+(pos:y)+\")\") attr.\n    lineOrig=pos.\n].\nturtle:addPath=[|pos1 pos2;line|// pos:world coord\n    pos1=pos1 ! (lineOrig) sub.\n    pos2=pos2 ! (lineOrig) sub.\n    line=! \"line\" createSVGElem\n    \"x1\" (pos1:x) attr \"y1\" (pos1:y) attr\n    \"x2\" (pos2:x) attr \"y2\" (pos2:y) attr \n    \"style\" (\"stroke:\"+_lineCol+\";stroke-width:\"+_lineWidth) attr\n    \"data-width\" (_lineWidth) attr\n    (lineG) appendTo.\n    this.\n].\nturtle:addPathAfterAction=[|a;pos1|\n    pos1=pos.\n    a ! execute.\n    [isPenDown] ! then [\n        ! (pos1) (pos) addPath.\n    ] execute.\n    this.\n].\nturtle:forward=[|by|\n    ! [(Actor:forward) ! (this) (by) call.] addPathAfterAction.\n].\nturtle:moveTo=[|x y|\n    ! [(Actor:moveTo) ! (this) (x) (y) call.] addPathAfterAction.\n].\nturtle:close=[\n    ! (pos) (lineOrig) addPath.\n].\nturtle:lineColor=[|col|\n    _lineCol=col.this.\n].\nturtle:lineWidth=[|w|\n    _lineWidth=w.this.\n].\nturtle:makeFigure=[|col;r|\n    r=Figure ! (this) create.\n    [col]! then[r!(col) paint]execute.\n    ! newLineG.\n    r.\n].\nturtle:penDown=[\n    [isPenDown]!then [] else [isPenDown=true. !newLineG] execute. \n    this\n].\nturtle:penUp=[isPenDown=false.this.].\nturtle:change=[|url|\n    url=baseURL+url.\n    element ! 0 get \n    \"http://www.w3.org/1999/xlink\" \"href\" \n    (url) setAttributeNS.\n    ! (url) getImageSize.\n    this.\n].\nturtle:setTrans=[|;str|\n    str=\"translate(\"+(pos:x)+\" \"+(pos:y)+\") \".\n    str=str+\"rotate(\"+dir+\") \".\n    str=str+\"scale(1 -1) \".\n    element ! \"transform\" (str) attr\n    \"data-trans\" ((pos:x)+\",\"+(pos:y)+\",\"+dir) attr.\n    ! checkCrash.\n    this.\n].\n"]}