{"version":3,"sources":["/Tonyu/Projects/Turtle/Figure.dtl"],"names":[],"mappings":"aACC,eAAO;CACP,cAAO,eAFN,sBAEmB;;CAFlB;;QAAD,AAGI;sBAHH;;CAIM,gBAJP,AAIe,MAAO;CACf;CACA,YANP,AAMW,MAAO;CACX,YAPR;;gBAAE;;CAUM;6BACE,kBAXR,AAWkB,IAAK,aAAU;;;;;CAKnC,cAAO,2BAhBN;;;;;;;CAAA,AAiBG,EAjBH,AAiBK;CAjBL,AAkBG,GAAG;CACH,mBAAW;CAnBd,AAoBG,WApBF;;CAAD,AAqBO,GArBP,AAqBU,CAAE,kBArBX,AAqBgB;CArBjB,AAsBO,GAtBP,AAsBU;CAtBV,AAsBwB,IAtBxB,AAsB2B,GAtB5B;CAAC,AAuBO,GAvBP,AAuBU;CAvBV,AAuBwB,IAvBxB,AAuB2B,GAvB5B;SAAC,AAwBQ,CAAE,8BAxBV,AAwByB,KAxBzB,AAwB8B;;CAxB9B,AA0BG,GA1BH,AA0BM;CA1BN,AA0BoB,IA1BpB,AA0BuB,GA1BxB;CAAC,AA2BG,GA3BH,AA2BM;CA3BN,AA2BoB,IA3BpB,AA2BuB,GA3BxB;QA4BI,iCA5BH,AA4BiB,KA5BjB,AA4BsB;;CAEvB,cAAO,yBA9BN;;;;;;;;;;;CAAA,AA+BG,EA/BH,AA+BK;CACF,mBAAW;CACX,wCAjCF;;CAAD,AAkCO,GAlCP,AAkCU,CAAE,kBAlCX,AAkCgB;CAlCjB,AAmCO,GAnCP,AAmCU;CAnCV,AAmCwB,IAnCxB,AAmC2B,GAnC5B;CAAC,AAoCO,GApCP,AAoCU;CApCV,AAoCwB,IApCxB,AAoC2B,GApC5B;CAAC,AAqCO,IArCP,AAqCW,CAAE,qBArCb,AAqCsB,KArCtB,AAqC2B;CArC3B,AAsCO,GAtCP,AAsCU;CAtCV,AAsCwB,IAtCxB,AAsC2B,GAtC5B;CAAC,AAuCO,GAvCP,AAuCU;CAvCV,AAuCwB,IAvCxB,AAuC2B,GAvC5B;CAAC,AAwCO,IAxCP,AAwCW,CAAE,qBAxCb,AAwCsB,KAxCtB,AAwC2B;CAxC3B,AAyCO,EAzCP,AAyCS;CAzCT,AAyC+B,GAzC/B,AAyCiC,EAzClC;SAAC,AA0CQ,CAAE,yBA1CV,AA0C0B,CAAE,0BA1C5B,AA0CuC,KA1CvC,AA0C4C,KA1C5C,AA0CiD;;QAE9C;;CAGJ,cAAO,kBA/CN;;QA+CqB;;CAEtB,cAAO,kBAjDN;;;8CAkDmB,cAAM;;CAG1B,cAAO,UArDN,sBAqDc;;;;CArDb;;QAsDG;sBAtDH;;uBAAA;;CAAD,AAuDO;CAvDP,AAwDO,GAAG;QAxDR;;UAAF,AAyDS,EAAG,aAzDX;sBAAC;;;CA2DS,2BA3DR,sBA2DuB;;QA3D1B,AA4De,QA5Df,AA4DmB,KA5DhB,AA4DqB,CAAE,cA5DvB,AA4D+B,CAAE;;CAEzB,uEA9DX,AA+DqB,mBAAW;QA/DhC,AAgEW;gBAhET;;QAAF,AAkEW,kCAlEX,AAmEqB,4BAnErB,AAoE4B;;;CApE3B;;QAwEG;yBAxEH;;QAwEwB,oCAxEzB,AAwE+C;;QAxE/C,AAyEG;;QAEJ,cAAO,cA3EN;;QA4EG,yBA5EH,AA4EY","sourcesContent":["// system ! \"Actor\" use.\nFigure=Actor !create.\nFigure:initialize=[|parent|\n    [parent] ! then [\n        element=parent:lineG.\n        element ! remove.\n        pos=parent:lineOrig.\n        dir=0.\n        !setLocalShapeAsLines.\n    ] else [\n        element=! \"g\" createSVGElem.// (svg_g) appendTo.\n        !(element) (this:__proto__:element) copySVGElem.\n    ] execute.\n    !setTrans.\n    !appear.\n].\nFigure:setLocalShapeAsPolygon=[|;t j lx ly ls|\n    t=this.\n    ls=element ! \"line\" find.\n    localShape=Polygon! create.\n    ls ! [\n        j=(t:$)! (this) create.\n        lx=j ! \"x1\" attr.lx=lx-0.\n        ly=j ! \"y1\" attr.ly=ly-0.\n        (t:localShape) ! (lx) (ly) addVertex.\n    ] each.\n    lx=j ! \"x2\" attr.lx=lx-0.\n    ly=j ! \"y2\" attr.ly=ly-0.\n    localShape ! (lx) (ly) addVertex.\n].\nFigure:setLocalShapeAsLines=[|;t j x1 y1 x2 y2 p1 p2 w|\n    t=this.\n    localShape=ShapeGroup ! create.\n    element ! \"line\" find [\n        j=(t:$)! (this) create.\n        x1=j ! \"x1\" attr.x1=x1-0.\n        y1=j ! \"y1\" attr.y1=y1-0.\n        p1=(t:Vec2) ! (x1) (y1) create.\n        x2=j ! \"x2\" attr.x2=x2-0.\n        y2=j ! \"y2\" attr.y2=y2-0.\n        p2=(t:Vec2) ! (x2) (y2) create.\n        w=j ! \"data-width\" attr.w=w-0.\n        (t:localShape) ! ((t:Polygon) !(p1) (p2) (w) fromLine) add.\n    ] each.\n    localShape.\n].\n\nFigure:getLocalShape=[localShape].\n\nFigure:getCrashShape=[|;tr|\n    !getLocalShape (dir) (pos) transform.\n].\n\nFigure:paint=[|col;buf ls|\n    [polygonElem] ! then [] else [\n        buf=\"\".\n        ls=element ! \"line\" find.\n        [(ls:length)>=2] ! then [\n            ! setLocalShapeAsPolygon.\n            localShape ! [|v|\n                buf=buf+(v:x)+\",\"+(v:y)+\" \".\n            ] each.\n            polygonElem=! \"polygon\" createSVGElem \n            \"points\" (buf) attr (element) appendTo.\n            ls ! remove.\n        ] else [\n            ls ! \"style\" (\n            \"stroke:\"+col+\";\"+\n            \"stroke-width:\"+(ls ! \"data-width\" attr)\n            ) attr.\n        ] execute.\n    ] execute.\n    [polygonElem] ! then [polygonElem ! \"fill\" (col) attr] execute.\n    this.\n].\nFigure:makeGroup=[\n    Group ! (arguments) create.\n].\n\n"]}