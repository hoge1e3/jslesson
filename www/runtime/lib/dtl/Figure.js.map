{"version":3,"sources":["/home/devel/devel/Turtle/Figure.dtl"],"names":[],"mappings":"8DACC,eAAO;yBACP,cAAO,eAFN,sBAEmB;;kDAFlB;;kDAAD,AAGI;2BAHH;;kDAIM,gBAJP,AAIe,MAAO;yBACf;yBACA,YANP,AAMW,MAAO;yBACX,YAPR;;qBAAE;;kDAUM;8CACE,kBAXR,IAWuB,aAAU;yBAC3B,oBAAY;;;yBAGhB,kBAAU;;;yBAGd,cAAO,oBAlBN;;;kDAAA,AAmBG,EAAE;yBAnBJ;;mDAAD,AAoBI,CAAE,WApBP;8BAAE;;kDAoBuB,oBApBxB,AAoBoC;;;yBAErC,cAAO,2BAtBN;;;;;;;kDAAA,AAuBG,EAvBH;yBAAA,AAwBG,GAAG;yBACH,mBAAW;yBAzBd,AA0BG,WA1BF;;kDAAD,AA2BO,GA3BP,AA2BU,CAAE,kBA3BX;yBAAD,AA4BO,GA5BP,AA4BU;yBA5BV,AA4BwB,IA5BxB,AA4B2B,GA5B5B;yBAAC,AA6BO,GA7BP,AA6BU;yBA7BV,AA6BwB,IA7BxB,AA6B2B,GA7B5B;0BAAC,AA8BQ,CAAE,8BA9BV,AA8ByB,KA9BzB,AA8B8B;;yBA9B9B,AAgCG,GAhCH,AAgCM;yBAhCN,AAgCoB,IAhCpB,AAgCuB,GAhCxB;yBAAC,AAiCG,GAjCH,AAiCM;yBAjCN,AAiCoB,IAjCpB,AAiCuB,GAjCxB;yBAkCI,iCAlCH,AAkCiB,KAlCjB,AAkCsB;;yBAEvB,cAAO,yBApCN;;;;;;;;;;;kDAAA,AAqCG,EArCH;yBAsCG,mBAAW;yBACX,wCAvCF;;kDAAD,AAwCO,GAxCP,AAwCU,CAAE,kBAxCX;yBAAD,AAyCO,GAzCP,AAyCU;yBAzCV,AAyCwB,IAzCxB,AAyC2B,GAzC5B;yBAAC,AA0CO,GA1CP,AA0CU;yBA1CV,AA0CwB,IA1CxB,AA0C2B,GA1C5B;yBAAC,AA2CO,IA3CP,AA2CW,CAAE,qBA3Cb,AA2CsB,KA3CtB,AA2C2B;yBA3C3B,AA4CO,GA5CP,AA4CU;yBA5CV,AA4CwB,IA5CxB,AA4C2B,GA5C5B;yBAAC,AA6CO,GA7CP,AA6CU;yBA7CV,AA6CwB,IA7CxB,AA6C2B,GA7C5B;yBAAC,AA8CO,IA9CP,AA8CW,CAAE,qBA9Cb,AA8CsB,KA9CtB,AA8C2B;yBA9C3B,AA+CO,EA/CP,AA+CS;yBA/CT,AA+C+B,GA/C/B,AA+CiC,EA/ClC;0BAAC,AAgDQ,CAAE,yBAhDV,AAgD0B,CAAE,0BAhD5B,AAgDuC,KAhDvC,AAgD4C,KAhD5C,AAgDiD;;yBAE9C;;yBAGJ,cAAO,kBArDN;;kDAqDqB;;yBAEtB,cAAO,kBAvDN;;;wFAwDmB,cAAM;;yBAG1B,cAAO,UA3DN,sBA2Dc;;;;kDA3Db;;kDA4DG;2BA5DH;;+CAAA;;kDAAD,AA6DO;yBA7DP,AA8DO,GAAG;yBA9DR;;oDAAF,AA+DS,EAAG,aA/DX;2BAAC;;;yBAiES,2BAjER,sBAiEuB;;kDAjE1B,AAkEe,QAlEf,AAkEmB,KAlEhB,AAkEqB,CAAE,cAlEvB,AAkE+B,CAAE;;yBAEzB,uEApEX,AAqEqB,mBAAW;yBArEhC,AAsEW;qBAtET;;kDAAF,AAwEW,kCAxEX,AAyEqB,4BAzErB,AA0E4B;;;yBA1E3B;;kDA8EG;8BA9EH;;kDA8EwB,oCA9EzB,AA8E+C;;yBA9E/C;;yBAiFD,cAAO,cAjFN;;kDAkFG,yBAlFH","sourcesContent":["// system ! \"Actor\" use.\r\nFigure=Actor !create.\r\nFigure:initialize=[|parent|\r\n    [parent] ! then [\r\n        element=parent:lineG.\r\n        element ! remove.\r\n        pos=parent:lineOrig.\r\n        dir=0.\r\n        !setLocalShapeAsLines.\r\n    ] else [\r\n        element=! \"g\" createSVGElem.// (svg_g) appendTo.\r\n        !(element) (this:__proto__:element) copySVGElem.\r\n        polygonElem=undef.\r\n        !findPolygonElem.        \r\n    ] execute.\r\n    isShowing=false.\r\n    !appear.\r\n].\r\nFigure:findPolygonElem=[|;p|\r\n    p=element ! \"polygon\" find.\r\n    [p:length>0] ! then [polygonElem=p] execute.\r\n].\r\nFigure:setLocalShapeAsPolygon=[|;t j lx ly ls|\r\n    t=this.\r\n    ls=element ! \"line\" find.\r\n    localShape=Polygon! create.\r\n    ls ! [\r\n        j=(t:$)! (this) create.\r\n        lx=j ! \"x1\" attr.lx=lx-0.\r\n        ly=j ! \"y1\" attr.ly=ly-0.\r\n        (t:localShape) ! (lx) (ly) addVertex.\r\n    ] each.\r\n    lx=j ! \"x2\" attr.lx=lx-0.\r\n    ly=j ! \"y2\" attr.ly=ly-0.\r\n    localShape ! (lx) (ly) addVertex.\r\n].\r\nFigure:setLocalShapeAsLines=[|;t j x1 y1 x2 y2 p1 p2 w|\r\n    t=this.\r\n    localShape=ShapeGroup ! create.\r\n    element ! \"line\" find [\r\n        j=(t:$)! (this) create.\r\n        x1=j ! \"x1\" attr.x1=x1-0.\r\n        y1=j ! \"y1\" attr.y1=y1-0.\r\n        p1=(t:Vec2) ! (x1) (y1) create.\r\n        x2=j ! \"x2\" attr.x2=x2-0.\r\n        y2=j ! \"y2\" attr.y2=y2-0.\r\n        p2=(t:Vec2) ! (x2) (y2) create.\r\n        w=j ! \"data-width\" attr.w=w-0.\r\n        (t:localShape) ! ((t:Polygon) !(p1) (p2) (w) fromLine) add.\r\n    ] each.\r\n    localShape.\r\n].\r\n\r\nFigure:getLocalShape=[localShape].\r\n\r\nFigure:getCrashShape=[|;tr|\r\n    !getLocalShape (dir) (pos) transform.\r\n].\r\n\r\nFigure:paint=[|col;buf ls|\r\n    [polygonElem] ! then [] else [\r\n        buf=\"\".\r\n        ls=element ! \"line\" find.\r\n        [(ls:length)>=2] ! then [\r\n            ! setLocalShapeAsPolygon.\r\n            localShape ! [|v|\r\n                buf=buf+(v:x)+\",\"+(v:y)+\" \".\r\n            ] each.\r\n            polygonElem=! \"polygon\" createSVGElem \r\n            \"points\" (buf) attr (element) appendTo.\r\n            ls ! remove.\r\n        ] else [\r\n            ls ! \"style\" (\r\n            \"stroke:\"+col+\";\"+\r\n            \"stroke-width:\"+(ls ! \"data-width\" attr)\r\n            ) attr.\r\n        ] execute.\r\n    ] execute.\r\n    [polygonElem] ! then [polygonElem ! \"fill\" (col) attr] execute.\r\n    this.\r\n].\r\nFigure:makeGroup=[\r\n    Group ! (arguments) create.\r\n].\r\n\r\n"]}