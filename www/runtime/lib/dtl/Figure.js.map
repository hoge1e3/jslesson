{"version":3,"sources":["/Tonyu/Projects/Turtle/Figure.dtl"],"names":[],"mappings":"oCACe;8CACM;;;;QACf;IAAU,OAMT;;cALU;cACE;UACN;;aAEH;KAIH;;mBAFgB;aACsB,4BAAxB;;MAEf;aACA;;;;;;;;;CAGD,EAAE;CACF,gBAAoB;8BACA;CACpB,GAKE;;CAJE,GAAG,KAAa,QAAN;CACV,GAAG,EAAS;CAAK,IAAG;CACpB,GAAG,EAAS;CAAK,IAAG;SACnB,cAA0B,WAAT,KAAK;;CAE3B,GAAG,EAAS;CAAK,IAAG;CACpB,GAAG,EAAS;CAAK,IAAG;wBACG,WAAT,KAAK;;;;;;;;;;;;;CAGnB,EAAE;iCACsB;cACP,aAUf;;CATE,GAAG,KAAa,QAAN;CACV,GAAG,EAAS;CAAK,IAAG;CACpB,GAAG,EAAS;CAAK,IAAG;CACpB,IAAI,QAAoB,QAAT,KAAK;CACpB,GAAG,EAAS;CAAK,IAAG;CACpB,GAAG,EAAS;CAAK,IAAG;CACpB,IAAI,QAAoB,QAAT,KAAK;CACpB,EAAE,EAAiB;CAAK,GAAE;SACzB,cAAsD,MAApC,WAA0B,UAAb,KAAK,KAAK;;;;;;;;;;;aAQ7C,gBAA0B;;yCAGhB;;;;;;;IACK,OAAQ;;YAiBtB;;CAhBE;CACA,gBAAoB;;;UAClB;IAAiB,OAQjB;;MAPI;iBAGA,2BAFa;;QACX,QAAI,KAAK,YAAU;;uBAEC,yBACT,eAAL,MAAoB;QAC9B,GAAK;KAMP;;QAJE,GAGE,4BAFQ,4BACO,GAAkB;;;;;;IAI3B,OAAuC;;yBAAN,aAAL;;QAC5C;;;;mBAGoB,QAAX","sourcesContent":["// system ! \"Actor\" use.\nFigure=Actor !create.\nFigure:initialize=[|parent|\n    [parent] ! then [\n        element=parent:lineG.\n        element ! remove.\n        pos=parent:lineOrig.\n        dir=0.\n        !setLocalShapeAsLines.\n    ] else [\n        element=! \"g\" createSVGElem.// (svg_g) appendTo.\n        !(element) (this:__proto__:element) copySVGElem.\n    ] execute.\n    !setTrans.\n    !appear.\n].\nFigure:setLocalShapeAsPolygon=[|;t j lx ly ls|\n    t=this.\n    ls=element ! \"line\" find.\n    localShape=Polygon! create.\n    ls ! [\n        j=(t:$)! (this) create.\n        lx=j ! \"x1\" attr.lx=lx-0.\n        ly=j ! \"y1\" attr.ly=ly-0.\n        (t:localShape) ! (lx) (ly) addVertex.\n    ] each.\n    lx=j ! \"x2\" attr.lx=lx-0.\n    ly=j ! \"y2\" attr.ly=ly-0.\n    localShape ! (lx) (ly) addVertex.\n].\nFigure:setLocalShapeAsLines=[|;t j x1 y1 x2 y2 p1 p2 w|\n    t=this.\n    localShape=ShapeGroup ! create.\n    element ! \"line\" find [\n        j=(t:$)! (this) create.\n        x1=j ! \"x1\" attr.x1=x1-0.\n        y1=j ! \"y1\" attr.y1=y1-0.\n        p1=(t:Vec2) ! (x1) (y1) create.\n        x2=j ! \"x2\" attr.x2=x2-0.\n        y2=j ! \"y2\" attr.y2=y2-0.\n        p2=(t:Vec2) ! (x2) (y2) create.\n        w=j ! \"data-width\" attr.w=w-0.\n        (t:localShape) ! ((t:Polygon) !(p1) (p2) (w) fromLine) add.\n    ] each.\n    localShape.\n].\n\nFigure:getLocalShape=[localShape].\n\nFigure:getCrashShape=[|;tr|\n    !getLocalShape (dir) (pos) transform.\n].\n\nFigure:paint=[|col;buf ls|\n    [polygonElem] ! then [] else [\n        buf=\"\".\n        ls=element ! \"line\" find.\n        [(ls:length)>=2] ! then [\n            ! setLocalShapeAsPolygon.\n            localShape ! [|v|\n                buf=buf+(v:x)+\",\"+(v:y)+\" \".\n            ] each.\n            polygonElem=! \"polygon\" createSVGElem \n            \"points\" (buf) attr (element) appendTo.\n            ls ! remove.\n        ] else [\n            ls ! \"style\" (\n            \"stroke:\"+col+\";\"+\n            \"stroke-width:\"+(ls ! \"data-width\" attr)\n            ) attr.\n        ] execute.\n    ] execute.\n    [polygonElem] ! then [polygonElem ! \"fill\" (col) attr] execute.\n    this.\n].\nFigure:makeGroup=[\n    Group ! (arguments) create.\n].\n\n"]}