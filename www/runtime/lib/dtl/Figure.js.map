{"version":3,"sources":["/Tonyu/Projects/Turtle/Figure.dtl"],"names":[],"mappings":"aACC,eAAO;CACP,cAAO,eAFN,sBAEmB;;CAFlB;;QAAD,AAGI;sBAHH;;CAIM,gBAJP,AAIe,MAAO;CACf;CACA,YANP,AAMW,MAAO;CACX,YAPR;;gBAAE;;CAUM;sBACE,kBAXR,AAWkB,IAAK,aAAU;CAC3B,oBAAY;;;CAGhB,kBAAU;;;CAGd,cAAO,oBAlBN;;;CAAA,AAmBG,EAAE;QAnBJ;;SAAD,AAoBI,CAAE,WApBP;yBAAE;;QAoBuB,oBApBxB,AAoBoC;;;CAErC,cAAO,2BAtBN;;;;;;;CAAA,AAuBG,EAvBH,AAuBK;CAvBL,AAwBG,GAAG;CACH,mBAAW;CAzBd,AA0BG,WA1BF;;CAAD,AA2BO,GA3BP,AA2BU,CAAE,kBA3BX,AA2BgB;CA3BjB,AA4BO,GA5BP,AA4BU;CA5BV,AA4BwB,IA5BxB,AA4B2B,GA5B5B;CAAC,AA6BO,GA7BP,AA6BU;CA7BV,AA6BwB,IA7BxB,AA6B2B,GA7B5B;SAAC,AA8BQ,CAAE,8BA9BV,AA8ByB,KA9BzB,AA8B8B;;CA9B9B,AAgCG,GAhCH,AAgCM;CAhCN,AAgCoB,IAhCpB,AAgCuB,GAhCxB;CAAC,AAiCG,GAjCH,AAiCM;CAjCN,AAiCoB,IAjCpB,AAiCuB,GAjCxB;QAkCI,iCAlCH,AAkCiB,KAlCjB,AAkCsB;;CAEvB,cAAO,yBApCN;;;;;;;;;;;CAAA,AAqCG,EArCH,AAqCK;CACF,mBAAW;CACX,wCAvCF;;CAAD,AAwCO,GAxCP,AAwCU,CAAE,kBAxCX,AAwCgB;CAxCjB,AAyCO,GAzCP,AAyCU;CAzCV,AAyCwB,IAzCxB,AAyC2B,GAzC5B;CAAC,AA0CO,GA1CP,AA0CU;CA1CV,AA0CwB,IA1CxB,AA0C2B,GA1C5B;CAAC,AA2CO,IA3CP,AA2CW,CAAE,qBA3Cb,AA2CsB,KA3CtB,AA2C2B;CA3C3B,AA4CO,GA5CP,AA4CU;CA5CV,AA4CwB,IA5CxB,AA4C2B,GA5C5B;CAAC,AA6CO,GA7CP,AA6CU;CA7CV,AA6CwB,IA7CxB,AA6C2B,GA7C5B;CAAC,AA8CO,IA9CP,AA8CW,CAAE,qBA9Cb,AA8CsB,KA9CtB,AA8C2B;CA9C3B,AA+CO,EA/CP,AA+CS;CA/CT,AA+C+B,GA/C/B,AA+CiC,EA/ClC;SAAC,AAgDQ,CAAE,yBAhDV,AAgD0B,CAAE,0BAhD5B,AAgDuC,KAhDvC,AAgD4C,KAhD5C,AAgDiD;;QAE9C;;CAGJ,cAAO,kBArDN;;QAqDqB;;CAEtB,cAAO,kBAvDN;;;8CAwDmB,cAAM;;CAG1B,cAAO,UA3DN,sBA2Dc;;;;CA3Db;;QA4DG;sBA5DH;;uBAAA;;CAAD,AA6DO;CA7DP,AA8DO,GAAG;QA9DR;;UAAF,AA+DS,EAAG,aA/DX;sBAAC;;;CAiES,2BAjER,sBAiEuB;;QAjE1B,AAkEe,QAlEf,AAkEmB,KAlEhB,AAkEqB,CAAE,cAlEvB,AAkE+B,CAAE;;CAEzB,uEApEX,AAqEqB,mBAAW;QArEhC,AAsEW;gBAtET;;QAAF,AAwEW,kCAxEX,AAyEqB,4BAzErB,AA0E4B;;;CA1E3B;;QA8EG;yBA9EH;;QA8EwB,oCA9EzB,AA8E+C;;QA9E/C,AA+EG;;QAEJ,cAAO,cAjFN;;QAkFG,yBAlFH,AAkFY","sourcesContent":["// system ! \"Actor\" use.\nFigure=Actor !create.\nFigure:initialize=[|parent|\n    [parent] ! then [\n        element=parent:lineG.\n        element ! remove.\n        pos=parent:lineOrig.\n        dir=0.\n        !setLocalShapeAsLines.\n    ] else [\n        element=! \"g\" createSVGElem.// (svg_g) appendTo.\n        !(element) (this:__proto__:element) copySVGElem.\n        polygonElem=undef.\n        !findPolygonElem.        \n    ] execute.\n    isShowing=false.\n    !appear.\n].\nFigure:findPolygonElem=[|;p|\n    p=element ! \"polygon\" find.\n    [p:length>0] ! then [polygonElem=p] execute.\n].\nFigure:setLocalShapeAsPolygon=[|;t j lx ly ls|\n    t=this.\n    ls=element ! \"line\" find.\n    localShape=Polygon! create.\n    ls ! [\n        j=(t:$)! (this) create.\n        lx=j ! \"x1\" attr.lx=lx-0.\n        ly=j ! \"y1\" attr.ly=ly-0.\n        (t:localShape) ! (lx) (ly) addVertex.\n    ] each.\n    lx=j ! \"x2\" attr.lx=lx-0.\n    ly=j ! \"y2\" attr.ly=ly-0.\n    localShape ! (lx) (ly) addVertex.\n].\nFigure:setLocalShapeAsLines=[|;t j x1 y1 x2 y2 p1 p2 w|\n    t=this.\n    localShape=ShapeGroup ! create.\n    element ! \"line\" find [\n        j=(t:$)! (this) create.\n        x1=j ! \"x1\" attr.x1=x1-0.\n        y1=j ! \"y1\" attr.y1=y1-0.\n        p1=(t:Vec2) ! (x1) (y1) create.\n        x2=j ! \"x2\" attr.x2=x2-0.\n        y2=j ! \"y2\" attr.y2=y2-0.\n        p2=(t:Vec2) ! (x2) (y2) create.\n        w=j ! \"data-width\" attr.w=w-0.\n        (t:localShape) ! ((t:Polygon) !(p1) (p2) (w) fromLine) add.\n    ] each.\n    localShape.\n].\n\nFigure:getLocalShape=[localShape].\n\nFigure:getCrashShape=[|;tr|\n    !getLocalShape (dir) (pos) transform.\n].\n\nFigure:paint=[|col;buf ls|\n    [polygonElem] ! then [] else [\n        buf=\"\".\n        ls=element ! \"line\" find.\n        [(ls:length)>=2] ! then [\n            ! setLocalShapeAsPolygon.\n            localShape ! [|v|\n                buf=buf+(v:x)+\",\"+(v:y)+\" \".\n            ] each.\n            polygonElem=! \"polygon\" createSVGElem \n            \"points\" (buf) attr (element) appendTo.\n            ls ! remove.\n        ] else [\n            ls ! \"style\" (\n            \"stroke:\"+col+\";\"+\n            \"stroke-width:\"+(ls ! \"data-width\" attr)\n            ) attr.\n        ] execute.\n    ] execute.\n    [polygonElem] ! then [polygonElem ! \"fill\" (col) attr] execute.\n    this.\n].\nFigure:makeGroup=[\n    Group ! (arguments) create.\n].\n\n"]}