{"version":3,"sources":["/home/devel/devel/Turtle/Figure.dtl"],"names":[],"mappings":"aACC,eAAO;CACP,cAAO,eAFN,sBAEmB;;CAFlB;;QAAD,AAGI;sBAHH;;CAIM,gBAJP,AAIe,MAAO;CACf;CACA,YANP,AAMW,MAAO;CACX,YAPR;;gBAAE;;CAUM;sBACE,kBAXR,IAWuB,aAAU;CAC3B,oBAAY;;;CAGhB,kBAAU;;;CAGd,cAAO,oBAlBN;;;CAAA,AAmBG,EAAE;QAnBJ;;SAAD,AAoBI,CAAE,WApBP;yBAAE;;QAoBuB,oBApBxB,AAoBoC;;;CAErC,cAAO,2BAtBN;;;;;;;CAAA,AAuBG,EAvBH;CAAA,AAwBG,GAAG;CACH,mBAAW;CAzBd,AA0BG,WA1BF;;CAAD,AA2BO,GA3BP,AA2BU,CAAE,kBA3BX;CAAD,AA4BO,GA5BP,AA4BU;CA5BV,AA4BwB,IA5BxB,AA4B2B,GA5B5B;CAAC,AA6BO,GA7BP,AA6BU;CA7BV,AA6BwB,IA7BxB,AA6B2B,GA7B5B;SAAC,AA8BQ,CAAE,8BA9BV,AA8ByB,KA9BzB,AA8B8B;;CA9B9B,AAgCG,GAhCH,AAgCM;CAhCN,AAgCoB,IAhCpB,AAgCuB,GAhCxB;CAAC,AAiCG,GAjCH,AAiCM;CAjCN,AAiCoB,IAjCpB,AAiCuB,GAjCxB;QAkCI,iCAlCH,AAkCiB,KAlCjB,AAkCsB;;CAEvB,cAAO,yBApCN;;;;;;;;;;;CAAA,AAqCG,EArCH;CAsCG,mBAAW;CACX,wCAvCF;;CAAD,AAwCO,GAxCP,AAwCU,CAAE,kBAxCX;CAAD,AAyCO,GAzCP,AAyCU;CAzCV,AAyCwB,IAzCxB,AAyC2B,GAzC5B;CAAC,AA0CO,GA1CP,AA0CU;CA1CV,AA0CwB,IA1CxB,AA0C2B,GA1C5B;CAAC,AA2CO,IA3CP,AA2CW,CAAE,qBA3Cb,AA2CsB,KA3CtB,AA2C2B;CA3C3B,AA4CO,GA5CP,AA4CU;CA5CV,AA4CwB,IA5CxB,AA4C2B,GA5C5B;CAAC,AA6CO,GA7CP,AA6CU;CA7CV,AA6CwB,IA7CxB,AA6C2B,GA7C5B;CAAC,AA8CO,IA9CP,AA8CW,CAAE,qBA9Cb,AA8CsB,KA9CtB,AA8C2B;CA9C3B,AA+CO,EA/CP,AA+CS;CA/CT,AA+C+B,GA/C/B,AA+CiC,EA/ClC;SAAC,AAgDQ,CAAE,yBAhDV,AAgD0B,CAAE,0BAhD5B,AAgDuC,KAhDvC,AAgD4C,KAhD5C,AAgDiD;;QAE9C;;CAGJ,cAAO,kBArDN;;QAqDqB;;CAEtB,cAAO,kBAvDN;;;8CAwDmB,cAAM;;CAG1B,cAAO,UA3DN,sBA2Dc;;;;CA3Db;;QA4DG;sBA5DH;;uBAAA;;CAAD,AA6DO;CA7DP,AA8DO,GAAG;QA9DR;;UAAF,AA+DS,EAAG,aA/DX;sBAAC;;;CAiES,2BAjER,sBAiEuB;;QAjE1B,AAkEe,QAlEf,AAkEmB,KAlEhB,AAkEqB,CAAE,cAlEvB,AAkE+B,CAAE;;CAEzB,uEApEX,AAqEqB,mBAAW;QArEhC,AAsEW;gBAtET;;QAAF,AAwEW,kCAxEX,AAyEqB,4BAzErB,AA0E4B;;;CA1E3B;;QA8EG;yBA9EH;;QA8EwB,oCA9EzB,AA8E+C;;QA9E/C;;QAiFD,cAAO,cAjFN;;QAkFG,yBAlFH","sourcesContent":["// system ! \"Actor\" use.\r\nFigure=Actor !create.\r\nFigure:initialize=[|parent|\r\n    [parent] ! then [\r\n        element=parent:lineG.\r\n        element ! remove.\r\n        pos=parent:lineOrig.\r\n        dir=0.\r\n        !setLocalShapeAsLines.\r\n    ] else [\r\n        element=! \"g\" createSVGElem.// (svg_g) appendTo.\r\n        !(element) (this:__proto__:element) copySVGElem.\r\n        polygonElem=undef.\r\n        !findPolygonElem.        \r\n    ] execute.\r\n    isShowing=false.\r\n    !appear.\r\n].\r\nFigure:findPolygonElem=[|;p|\r\n    p=element ! \"polygon\" find.\r\n    [p:length>0] ! then [polygonElem=p] execute.\r\n].\r\nFigure:setLocalShapeAsPolygon=[|;t j lx ly ls|\r\n    t=this.\r\n    ls=element ! \"line\" find.\r\n    localShape=Polygon! create.\r\n    ls ! [\r\n        j=(t:$)! (this) create.\r\n        lx=j ! \"x1\" attr.lx=lx-0.\r\n        ly=j ! \"y1\" attr.ly=ly-0.\r\n        (t:localShape) ! (lx) (ly) addVertex.\r\n    ] each.\r\n    lx=j ! \"x2\" attr.lx=lx-0.\r\n    ly=j ! \"y2\" attr.ly=ly-0.\r\n    localShape ! (lx) (ly) addVertex.\r\n].\r\nFigure:setLocalShapeAsLines=[|;t j x1 y1 x2 y2 p1 p2 w|\r\n    t=this.\r\n    localShape=ShapeGroup ! create.\r\n    element ! \"line\" find [\r\n        j=(t:$)! (this) create.\r\n        x1=j ! \"x1\" attr.x1=x1-0.\r\n        y1=j ! \"y1\" attr.y1=y1-0.\r\n        p1=(t:Vec2) ! (x1) (y1) create.\r\n        x2=j ! \"x2\" attr.x2=x2-0.\r\n        y2=j ! \"y2\" attr.y2=y2-0.\r\n        p2=(t:Vec2) ! (x2) (y2) create.\r\n        w=j ! \"data-width\" attr.w=w-0.\r\n        (t:localShape) ! ((t:Polygon) !(p1) (p2) (w) fromLine) add.\r\n    ] each.\r\n    localShape.\r\n].\r\n\r\nFigure:getLocalShape=[localShape].\r\n\r\nFigure:getCrashShape=[|;tr|\r\n    !getLocalShape (dir) (pos) transform.\r\n].\r\n\r\nFigure:paint=[|col;buf ls|\r\n    [polygonElem] ! then [] else [\r\n        buf=\"\".\r\n        ls=element ! \"line\" find.\r\n        [(ls:length)>=2] ! then [\r\n            ! setLocalShapeAsPolygon.\r\n            localShape ! [|v|\r\n                buf=buf+(v:x)+\",\"+(v:y)+\" \".\r\n            ] each.\r\n            polygonElem=! \"polygon\" createSVGElem \r\n            \"points\" (buf) attr (element) appendTo.\r\n            ls ! remove.\r\n        ] else [\r\n            ls ! \"style\" (\r\n            \"stroke:\"+col+\";\"+\r\n            \"stroke-width:\"+(ls ! \"data-width\" attr)\r\n            ) attr.\r\n        ] execute.\r\n    ] execute.\r\n    [polygonElem] ! then [polygonElem ! \"fill\" (col) attr] execute.\r\n    this.\r\n].\r\nFigure:makeGroup=[\r\n    Group ! (arguments) create.\r\n].\r\n\r\n"]}