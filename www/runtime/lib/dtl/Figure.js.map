{"version":3,"sources":["/home/devel/devel/Turtle/Figure.dtl"],"names":[],"mappings":"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","sourcesContent":["//NOGENERATOR\r\n// system ! \"Actor\" use.\r\nFigure=Actor !create.\r\nFigure:initialize=[|parent|\r\n    [parent] ! then [\r\n        element=parent:lineG.\r\n        element ! remove.\r\n        pos=parent:lineOrig.\r\n        dir=0.\r\n        !setLocalShapeAsLines.\r\n    ] else [\r\n        element=! \"g\" createSVGElem.// (svg_g) appendTo.\r\n        !(element) (this:__proto__:element) copySVGElem.\r\n        polygonElem=undef.\r\n        !findPolygonElem.        \r\n    ] execute.\r\n    isShowing=false.\r\n    !appear.\r\n].\r\nFigure:findPolygonElem=[|;p|\r\n    p=element ! \"polygon\" find.\r\n    [p:length>0] ! then [polygonElem=p] execute.\r\n].\r\nFigure:setLocalShapeAsPolygon=[|;t j lx ly ls|\r\n    t=this.\r\n    ls=element ! \"line\" find.\r\n    localShape=Polygon! create.\r\n    ls ! [\r\n        j=(t:$)! (this) create.\r\n        lx=j ! \"x1\" attr.lx=lx-0.\r\n        ly=j ! \"y1\" attr.ly=ly-0.\r\n        (t:localShape) ! (lx) (ly) addVertex.\r\n    ] each.\r\n    lx=j ! \"x2\" attr.lx=lx-0.\r\n    ly=j ! \"y2\" attr.ly=ly-0.\r\n    localShape ! (lx) (ly) addVertex.\r\n].\r\nFigure:setLocalShapeAsLines=[|;t j x1 y1 x2 y2 p1 p2 w|\r\n    t=this.\r\n    localShape=ShapeGroup ! create.\r\n    element ! \"line\" find [\r\n        j=(t:$)! (this) create.\r\n        x1=j ! \"x1\" attr.x1=x1-0.\r\n        y1=j ! \"y1\" attr.y1=y1-0.\r\n        p1=(t:Vec2) ! (x1) (y1) create.\r\n        x2=j ! \"x2\" attr.x2=x2-0.\r\n        y2=j ! \"y2\" attr.y2=y2-0.\r\n        p2=(t:Vec2) ! (x2) (y2) create.\r\n        w=j ! \"data-width\" attr.w=w-0.\r\n        (t:localShape) ! ((t:Polygon) !(p1) (p2) (w) fromLine) add.\r\n    ] each.\r\n    localShape.\r\n].\r\n\r\nFigure:getLocalShape=[localShape].\r\n\r\nFigure:getCrashShape=[|;tr|\r\n    !getLocalShape (dir) (pos) transform.\r\n].\r\n\r\nFigure:paint=[|col;buf ls|\r\n    [polygonElem] ! then [] else [\r\n        buf=\"\".\r\n        ls=element ! \"line\" find.\r\n        [(ls:length)>=2] ! then [\r\n            ! setLocalShapeAsPolygon.\r\n            localShape ! [|v|\r\n                buf=buf+(v:x)+\",\"+(v:y)+\" \".\r\n            ] each.\r\n            polygonElem=! \"polygon\" createSVGElem \r\n            \"points\" (buf) attr (element) appendTo.\r\n            ls ! remove.\r\n        ] else [\r\n            ls ! \"style\" (\r\n            \"stroke:\"+col+\";\"+\r\n            \"stroke-width:\"+(ls ! \"data-width\" attr)\r\n            ) attr.\r\n        ] execute.\r\n    ] execute.\r\n    [polygonElem] ! then [polygonElem ! \"fill\" (col) attr] execute.\r\n    this.\r\n].\r\nFigure:makeGroup=[\r\n    Group ! (arguments) create.\r\n].\r\n\r\n"]}