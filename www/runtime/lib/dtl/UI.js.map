{"version":3,"sources":["/Tonyu/Projects/Turtle/UI.dtl"],"names":[],"mappings":"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","sourcesContent":["// Dolittle\nScreen=! create.\nScreen:width?=[\n    $ ! (window) create width.\n].\nScreen:height?=[\n    $ ! (window) create height.\n].\nScreen:paint=[|c| \n    $ ! \"body\" create \"background-color\" (c+\"\") css.\n].\n\nUI=Actor ! create.\nUI:setTrans=[|;str|\n    str=\"postion:absolute;left:\"+(pos:x)+\";top:\"+(pos:y)+\";\".\n    element ! \"transform\" (str) attr\n    \"data-trans\" ((pos:x)+\",\"+(pos:y)) attr.\n    this.\n].\nUI:appear=[\n    [element] ! then [ element ! show] execute.\n    this.\n].\nUI:die=[\n    [element] ! then [ element ! hide] execute.\n    this.\n].\nUI:top=((Screen! height?)/2) - 20.\nUI:autoLayout=[\n    UILayout! (this) add.\n    /*[last] ! then [\n        ! (last ! right?) (last ! top?) moveTo\n    ] else [\n        !  (-(Screen ! width?) / 2+20) (top) moveTo. \n    ] execute.\n    UI:last=this.*/\n].\nUI:moveTo=[|left top|\n    UILayout! (this) (left) (top) remove.\n    this.\n].\nUI:moveBy=[|dx dy|\n    ! ((!left?)+dx) ((!top?)+dy) moveTo\n].\nUI:left?=[\n    [element] ! then [ (element ! offset):left-(Screen ! width?)/2 ] else [0] execute.  \n].\nUI:right?=[\n    (! left?) + (! width?)\n].\nUI:top?=[\n    [element] ! then [ -((element ! offset):top-(Screen ! height?)/2) ] else [0] execute.  \n].\nUI:bottom?=[\n    (! top?) - (! height?)\n].\nUI:width?=[//offsetWidth??\n    [element] ! then [ element ! outerWidth] else [0] execute.  \n].\nUI:height?=[\n    [element] ! then [ element ! outerHeight] else [0] execute.  \n].\nUI:width=[|w|\n    [element] ! then [ element ! (w) width ] execute. this.\n].\nUI:height=[|w|\n    [element] ! then [ element ! (w) height ] execute. this.\n].\nUI:nextLine=[|;top left|\n    /*[last] ! then [\n        console ! \"NL\" (Screen! width?) (last!bottom?) log.\n        left=-(Screen! width?) /2 + 20.\n        //top=(UI:top)-((UI:last) ! outerHeight).\n        top=last ! bottom?.\n        !(left) (top) moveTo.\n    ] execute.    */\n    UILayout! (this) br.\n    this.\n].\nUI:write=[|m|\n    [element] ! then [ (element ! 0 get):innerHTML= m] execute.\n    self\n].\nUI:add=[|m|\n    [element]!then[!(((element!0 get):innerHTML)+m)write]execute.\n    self\n].\nUI:newLine=[\n    !\"<br>\"add.\n    self\n].\nUI:clear=[!\"\" write].\nUI:int2strDigits=1000000.\nUI:int2str=[|v;r|\n    ((window:Math) ! (v*int2strDigits) round) /int2strDigits.\n    //    [ (! (r-v) abs) <0.00000001 ] ! then [ r+\"\" ] else [v+\"\"] execute. \n].\nUI:str2int=[|s;r|\n    r=window ! (s) parseFloat.\n    [r==r] ! then [r] else [s] execute.\n].\nUI:readString=[\n    [element] ! then [element ! text] else [\"\"] execute.\n].\nUI:read=[\n    ! (! readString) str2int.\n].\nUI:inc=[|by|\n    by=[by] ! [1] or.\n    ! ( (! read)-0+by) write.\n].\nUI:dec=[|by|\n    by=[by] ! [1] or.\n    ! ( (! read)-by) write.\n].\n/*UI:moveBy=[|x y;oldx oldy|\n    oldx=(self:element!0 get):offsetLeft.\n    oldy=(self:element!0 get):offsetTop.\n    self!(oldx+x) (oldy-y)position.\n    self\n].\nUI:moveTo=[|x y;w h|\n    w=0.//($ ! (window) create width)/2.\n    h=0.//($ ! (window) create height)/2.\n    //console ! \"WIDH\" (w) (h) log.\n    self:element!\"top\" ((h-y)+\"px\") css\n    \"left\" ((w+x)+\"px\") css.\n    self\n].*/\nUI:attachEvent=[].\nUI:container=$ ! \"<div>\" create \"body\" appendTo \n\"position\" \"absolute\" css \n\"left\" ( (Screen!width?) / 2) css \n\"top\" ( (Screen!height?) / 2) css.\n$ ! (window) create ([\n    UI:container !\n    \"left\" ( (Screen!width?) / 2) css \n    \"top\" ( (Screen!height?) / 2) css.\n] ! (this) bind) resize.\nUILayout=!create.\nUILayout:initElem=[\n    element=$!\"<div>\" create (UI:container) appendTo.\n    element ! \n    \"white-space\" \"nowrap\" css\n    \"position\" \"absolute\" css\n    \"left\" (-(Screen ! width?)/2 +20) css \n    \"top\" (-(Screen! height?)/2+20) css. \n    $ ! (window) create ([\n        element ! \n        \"left\" (-(Screen ! width?)/2 +20) css \n        \"top\" (-(Screen! height?)/2+20) css. \n    ] ! (this) bind ) resize.\n].\nUILayout ! initElem.\nUILayout:add=[|ui|\n    ui:element ! remove.\n    ui:inUILayout=this.\n    element ! (ui:element) append.\n    ui ! attachEvent.\n    ui:element ! \"position\" \"static\" css.\n].\nUILayout:remove=[|ui left top|\n    ui:element ! remove.\n    ui:inUILayout=false.\n    UI:container ! (ui:element) append.\n    ui ! attachEvent.\n    ui:element ! \"position\" \"absolute\" css \"left\" (left) css \"top\" (-top) css.\n].\nUILayout:br=[|ui|\n    $ ! \"<br>\" create (ui:element) insertBefore.\n].\n\nLabel=UI!create.\nLabel:left=0.\nLabel:initialize=[|label;t|\n    t=this.\n    [label==undef]!then [label=! read] execute.\n    element=$!\"<span>\"create\n    (label+\"\") text\n    //\"position\" \"absolute\" css\n    \"font-size\" \"1.0em\" css\n    \"vertical-align\" \"top\" css\n    \"white-space\" \"nowrap\" css.\n    //(container) appendTo.\n    !autoLayout\n].\nLabel:fontColor=[|r g b;args c|\n    args=:window:Array:prototype:slice!(arguments)call.\n    [args:length==1]!then[\n        c=r.    \n    ]else[\n        c=Color!(r)(g)(b)create.\n    ]execute.\n    self:element!\"color\" (c)css.\n    self\n].\nLabel:fontSize=[|s|\n    self:element!\"font-size\" (s/10+\"em\")css.\n    self\n].\n\nButton=UI ! create.\nButton:action=[].\n//Button ! \"action\" addEventType.\nButton:left=0.\nButton:attachEvent=[|;t| t=this. element ! [t ! action] click].\nButton:initialize=[|label key;t|\n    t=this.\n    [label==undef]!then [label=! read] execute.\n    element=$!\"<button>\" create \n    (label) text \n    \"vertical-align\" \"top\" css\n    \"white-space\" \"nowrap\" css.\n    //\"position\" \"absolute\" css. \n    //(container) appendTo.\n    //! attachEvent.\n    ! autoLayout.\n    /*本多追加分*/\n    element! \"font-size\" \"1.0em\" css\n    \"white-space\" \"nowrap\" css\n    \"border-style\" \"none\" css.\n    :window![:window:document!\"keydown\"[|k|\n            [k:keyCode==(:Button!(key)toKeyCode)]!then[t!action]execute.\n    ](:true)addEventListener.]$.\n    /*以上*/\n].\nButton:setAction=[|a|\n    action=a.this.\n].\n/*本多追加分*/\nButton:paint=[|r g b;args c|\n    args=:window:Array:prototype:slice!(arguments)call.\n    [args:length==1]!then[\n        c=r.    \n    ]else[\n        c=Color!(r)(g)(b)create.\n    ]execute.\n    self:element!\"background-color\" (c)css .\n    self\n].\nButton:fontColor=[|r g b;args c|\n    args=:window:Array:prototype:slice!(arguments)call.\n    [args:length==1]!then[\n        c=r.    \n    ]else[\n        c=Color!(r)(g)(b)create.\n    ]execute.\n    self:element!\"color\" (c)css.\n    self\n].\nButton:fontSize=[|s|\n    self:element!\"font-size\" (s/10+\"em\")css.\n    self\n].\n/*Button:width?=[\n    (self:element!0 get):offsetWidth.\n].\nButton:height?=[\n    (self:element!0 get):offsetHeight.\n].*/\nButton:size=[|w h|\n    self:element!\"width\" (w+\"px\") css\n    \"height\" (h+\"px\") css.\n    self\n].\nButton:toKeyCode=[|k|\n    k=(k+\"\") ! toUpperCase.\n    [k==\"LEFT\"]!then[37]\n    else[k==\"UP\"]then[38]\n    else[k==\"RIGHT\"]then[39]\n    else[k==\"DOWN\"]then[40]\n    else[k==\"SPACE\"]then[32]execute.\n].\nButton:inc=[|;label|\n    label=(self:element!0 get):innerHTML.\n    [label!(:window!\"^([0-9０-９]+)$\"RegExp)match]!then[\n        self:element!((:window!(label)parseInt)+1)text.\n    ]execute.\n    self\n].\n/*以上*/\n/*Button:write=[|m|\n    [element] ! then [element ! (m) val] execute.\n    self\n].\nButton:read=[\n    [element] ! then [element ! val] else [\"\"] execute.\n].*/\n\nField=UI! create.\nField:initialize=[|label|\n    [label==undef]!then [label=! read] execute.\n    element=$!\"<input>\" create \n    (label) val \n    \"vertical-align\" \"top\" css\n    \"white-space\" \"nowrap\" css.\n    //\"position\" \"absolute\" css.\n    //(container) appendTo.\n    ! autoLayout.\n].\nField:write=[|m|\n    [element] ! then [element ! (m) val] execute.\n    self\n].\nField:readString=[\n    [element] ! then [element ! val] else [\"\"] execute.\n].\n\nTextArea=UI! create.\nTextArea:initialize=[|;label|\n    label=! read.\n    manualRow=false.\n    manualCol=false.\n    element=$!\"<textarea>\" create \n    (label) val \n    \"vertical-align\" \"top\" css.\n    //\"white-space\" \"nowrap\" css.\n    //\"position\" \"absolute\" css.\n    //(container) appendTo.\n    ! autoResize.\n    ! autoLayout.\n    writeLn ! (self) (arguments) apply.\n].\nTextArea:mblen=[|s;i c r| \n    i=0.r=0.\n    [i<(s:length)] ! while [\n        c=s ! (i) charCodeAt.\n        r=r+([c>=128] ! then [2] else[1] execute).\n        i=i+1.    \n    ] execute.\n    r.\n].\nTextArea:autoResize=[|;r c|\n    r=1.c=1.\n    ! readString \"\\n\" split [|s;l|\n        l=! (s) mblen.\n        [l>c] ! then [c=l] execute.\n        r=r+1.\n    ] each.\n    [manualRow] ! then [] else [element ! \"rows\"(r) attr] execute.\n    [manualCol] ! then [] else [element ! \"cols\"(c) attr] execute.\n    this.\n].\nTextArea:setRow=[|r| element ! \"rows\"(r) attr. manualRow=true. self].\nTextArea:setCol=[|c| element ! \"cols\"(c) attr. manualCol=true. self].\nTextArea:overwrite=[|m|\n    [element] ! then [element ! (m) val] execute.\n    ! autoResize.\n    self\n].\nTextArea:readString=[\n    [element] ! then [element ! val] else [\"\"] execute.\n].\nTextArea:write=[\n    (Array:prototype:slice) ! (arguments) call [|cont|\n        [cont:each] ! then [\n            cont ! [|e| ! (e) writeLn ] each.  \n        ] else [\n            ! ((!readString)+cont) overwrite\n        ] execute.\n    ] each.\n    self\n].\nTextArea:writeLn=[\n    (Array:prototype:slice) ! (arguments) call [|cont|\n        [cont:each] ! then [\n            cont ! [|e| ! (e) writeLn ] each.  \n        ] else [\n            ! (cont) write newLine.\n        ] execute.\n    ] each.\n    self\n].\nTextArea:newLine=[\n    ! (\"\\n\") write.\n].\nTextArea:clear=[! \"\" overwrite].\n\n/*Field:inc=[|by|\n    by=[by] ! [1] or.\n    element ! ((element ! val)-0+by)  val.\n    \n].*/\n"]}