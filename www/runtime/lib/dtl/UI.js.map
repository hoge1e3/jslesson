{"version":3,"sources":["/home/devel/devel/Turtle/UI.dtl"],"names":[],"mappings":"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","sourcesContent":["// Dolittle\nScreen=! create.\nScreen:width?=[\n    $ ! (window) create width.\n].\nScreen:height?=[\n    $ ! (window) create height.\n].\nScreen:paint=[|c|\n    $ ! \"body\" create \"background-color\" (c+\"\") css.\n].\n! \"Screen\" \"Panel\" addAlias.\n\nUI=! create.\nUI:setTrans=[|;str|\n    str=\"postion:absolute;left:\"+(pos:x)+\";top:\"+(pos:y)+\";\".\n    element ! \"transform\" (str) attr\n    \"data-trans\" ((pos:x)+\",\"+(pos:y)) attr.\n    this.\n].\nUI:hide=[\n    [element] ! then [ element ! hide] execute.\n    this.\n].\nUI:show=[\n    [element] ! then [ element ! show] execute.\n    this.\n].\nUI!\"hide\" \"die\" addAlias.\nUI!\"show\" \"appear\" addAlias.\n\nUI:top=((Screen! height?)/2) - 20.\nUI:autoLayout=[\n    UILayout! (this) add.\n    [last] ! then [\n        ! ((last ! right?)+10) (last ! top?) moveTo\n    ] else [\n        !  (-(Screen ! width?) / 2+20) (top) moveTo.\n    ] execute.\n    UI:last=this.\n].\nUI:moveTo=[|left top|\n    UILayout! (this) (left) (top) remove.\n    this.\n].\nUI:moveBy=[|dx dy|\n    ! ((!left?)+dx) ((!top?)+dy) moveTo\n].\nUI:left?=[\n    [element] ! then [\n        (element ! offset):left-((UI:container ! offset):left)\n    ] else [0] execute.\n].\nUI ! \"left?\" \"xpos?\" addAlias.\nUI:right?=[\n    (! left?) + (! width?)\n].\nUI:top?=[\n    [element] ! then [\n        -((element ! offset):top-((UI:container ! offset):top))\n    ] else [0] execute.\n].\nUI ! \"top?\" \"ypos?\" addAlias.\nUI:bottom?=[\n    (! top?) - (! height?)\n].\nUI:width?=[//offsetWidth??\n    [element] ! then [ element ! outerWidth] else [0] execute.\n].\nUI:height?=[\n    [element] ! then [ element ! outerHeight] else [0] execute.\n].\nUI:width=[|w|\n    [element] ! then [ element ! (w) width ] execute. this.\n].\nUI:height=[|w|\n    [element] ! then [ element ! (w) height ] execute. this.\n].\nUI:nextLine=[|;top left|\n    [last] ! then [\n        console ! \"NL\" (Screen! width?) (last!bottom?) log.\n        left=-(Screen! width?) /2 + 20.\n        //top=(UI:top)-((UI:last) ! outerHeight).\n        top=last ! bottom?.\n        !(left) (top) moveTo.\n    ] execute.\n    //UILayout! (this) br.\n    this.\n].\nUI:write=[|m|\n    [element] ! then [ (element ! 0 get):innerHTML=! (m) num2str] execute.\n    self\n].\nUI ! \"write\" \"set\" addAlias.\nUI:add=[|m|\n    [element]!then[!(((element!0 get):innerHTML)+m)write]execute.\n    self\n].\nUI:newLine=[\n    !\"<br>\"add.\n    self\n].\nUI:clear=[!\"\" write].\nUI:num2strDigits=1000000.\nUI:num2str=[|v;r|\n    [v==null]!then [v=\"\"] execute.\n    [v==undef]!then [v=\"\"] execute.\n    [(! (v) typeof)==\"number\"] ! then [\n        v=((window:Math) ! (v*num2strDigits) round) /num2strDigits.\n    ] execute.\n    v+\"\"\n    //    [ (! (r-v) abs) <0.00000001 ] ! then [ r+\"\" ] else [v+\"\"] execute.\n].\nUI:int2str=UI:num2str.\nUI:str2num=[|s;r|\n    r=window ! (s) parseFloat.\n    [r==r] ! then [r] else [s] execute.\n].\nUI:str2int=UI:str2num.\nUI:readString=[\n    [element] ! then [element ! text] else [\"\"] execute.\n].\nUI:read=[\n    ! (! readString) str2num.\n].\nUI ! \"read\" \"get\" addAlias.\nUI:inc=[|by|\n    by=[by] ! [1] or.\n    ! ( (! read)-0+by) write.\n].\nUI! \"inc\" \"increment\" addAlias.\nUI:dec=[|by|\n    by=[by] ! [1] or.\n    ! ( (! read)-by) write.\n].\nUI! \"dec\" \"decrement\" addAlias.\n//本多追加分\nUI:paint=[|r g b;args c|\n    args=:window:Array:prototype:slice!(arguments)call.\n    [args:length==1]!then[\n        c=r.\n    ]else[\n        c=Color!(r)(g)(b)create.\n    ]execute.\n    self:element!\"background-color\" (c)css .\n    self\n].\nUI:fontColor=[|r g b;args c|\n    args=:window:Array:prototype:slice!(arguments)call.\n    [args:length==1]!then[\n        c=r.\n    ]else[\n        c=Color!(r)(g)(b)create.\n    ]execute.\n    self:element!\"color\" (c)css.\n    self\n].\nUI:fontSize=[|s|\n    self:element!\"font-size\" (s/10+\"em\")css.\n    self\n].\n\nUI:size=[|w h|\n    self:element!\"width\" (w+\"px\") css\n    \"height\" (h+\"px\") css.\n    self\n].\n//以上\n\nUI:attachEvent=[].\nUI:container=$ ! \"<div>\" create \"body\" appendTo\n\"position\" \"absolute\" css\n\"left\" ( (Screen!width?) / 2) css\n\"top\" ( (Screen!height?) / 2) css.\n$ ! (window) create ([\n    UI:container !\n    \"left\" ( (Screen!width?) / 2) css\n    \"top\" ( (Screen!height?) / 2) css.\n] ! (this) bind) resize.\nUILayout=!create.\nUILayout:space=20.\nUILayout:initElem=[\n    element=$!\"<div>\" create (UI:container) appendTo.\n    element !\n    \"white-space\" \"nowrap\" css\n    \"position\" \"absolute\" css\n    \"left\" (-(Screen ! width?)/2 +space) css\n    \"top\" (-(Screen! height?)/2+space) css.\n    $ ! (window) create ([\n        element !\n        \"left\" (-(Screen ! width?)/2 +space) css\n        \"top\" (-(Screen! height?)/2+space) css.\n    ] ! (this) bind ) resize.\n].\nUILayout ! initElem.\nUILayout:add=[|ui|\n    ui:element ! remove.\n    ui:inUILayout=this.\n    element ! (ui:element) append.\n    ui ! attachEvent.\n    ui:element ! \"position\" \"static\" css.\n].\nUILayout:remove=[|ui left top|\n    [ui:inUILayout] ! then [\n        ui:element ! remove.\n        ui:inUILayout=false.\n        UI:container ! (ui:element) append.\n        ui ! attachEvent.\n    ] execute.\n    ui:element ! \"position\" \"absolute\" css \"left\" (left) css \"top\" (-top) css.\n].\nUILayout:br=[|ui|\n    $ ! \"<br>\" create (ui:element) insertBefore.\n].\n\nLabel=UI!create.\nLabel:left=0.\nLabel:initialize=[|label;t|\n    t=this.\n    [label==undef]!then [label=! read] execute.\n    element=$!\"<span>\"create\n    (!(label) num2str) text\n    //\"position\" \"absolute\" css\n    \"font-size\" \"1.0em\" css\n    \"vertical-align\" \"top\" css\n    \"white-space\" \"nowrap\" css.\n    //(container) appendTo.\n    !autoLayout\n].\nLabel:fontColor=[|r g b;args c|\n    args=:window:Array:prototype:slice!(arguments)call.\n    [args:length==1]!then[\n        c=r.\n    ]else[\n        c=Color!(r)(g)(b)create.\n    ]execute.\n    self:element!\"color\" (c)css.\n    self\n].\nLabel:fontSize=[|s|\n    self:element!\"font-size\" (s/10+\"em\")css.\n    self\n].\n\nButton=UI ! create.\nButton:action=[].\n//Button ! \"action\" addEventType.\nButton:left=0.\nButton:attachEvent=[|;t| t=this. element ! [t ! action] click].\nButton:initialize=[|label key;t|\n    t=this.\n    [label==undef]!then [label=! read] execute.\n    element=$!\"<button>\" create\n    (! (label) num2str) text\n    \"vertical-align\" \"top\" css\n    \"white-space\" \"nowrap\" css.\n    //\"position\" \"absolute\" css.\n    //(container) appendTo.\n    //! attachEvent.\n    ! autoLayout.\n    [key]!then[\n        :window![:window:document!\"keydown\"[|k|\n                [k:keyCode==(:Button:keyCodeDict!\n                ((key+\"\")!toUpperCase)read)]!then[t!action]execute.\n        ](:true)addEventListener.]$.\n    ]execute.\n    // 以上\n].\nButton:setAction=[|a|\n    action=a.this.\n].\n\nButton:keyCodeDict=Dict!create.\n[|;arr|\n    arr=Array!\"0\" \"1\" \"2\" \"3\" \"4\" \"5\" \"6\" \"7\" \"8\" \"9\"create.\n    [|n|\n        Button:keyCodeDict!(arr!(n)get)(n+47)write\n    ]!(arr!length?)repeat.\n    arr=Array!\"A\" \"B\" \"C\" \"D\" \"E\" \"F\" \"G\" \"H\" \"I\" \"J\"\n    \"K\" \"L\" \"M\" \"N\" \"O\" \"P\" \"Q\" \"R\" \"S\" \"T\" \"U\"\n    \"V\" \"W\" \"X\" \"Y\" \"Z\" create.\n    [|n|\n        Button:keyCodeDict!(arr!(n)get)(n+64)write\n    ]!(arr!length?)repeat.\n    arr=Array!\"F1\" \"F2\" \"F3\" \"F4\" \"F5\" \"F6\" \"F7\" \"F8\"\n    \"F9\" \"F10\" \"F11\" \"F12\"create.\n    [|n|\n        Button:keyCodeDict!(arr!(n)get)(n+111)write\n    ]!(arr!length?)repeat.\n    Button:keyCodeDict!\n    \"ESCAPE\" 27 write\n    \"MINUS\" 189 write\n    \"BACK_SLASH\" 220 write\n    \"OPEN_BRACKET\" 219 write\n    \"CLOSE_BRACKET\" 221 write\n    \"SEMICOLON\" 186 write\n    \"COMMA\" 188 write\n    \"PERIOD\" 190 write\n    \"SLASH\" 191 write\n    \"ENTER\" 13 write\n    \"PAGE_UP\" 33 write\n    \"PAGE_DOWN\" 34 write\n    \"END\" 35 write\n    \"HOME\" 36 write\n    \"LEFT\" 37 write\n    \"UP\" 38 write\n    \"RIGHT\" 39 write\n    \"DOWN\" 40 write\n    \"SPACE\" 32 write\n    \"SHIFT\" 16 write\n    \"CTRL\" 17 write.\n]!execute.\n// Button:keyCodeDict![|k|\n//     k=(k+\"\") ! toUpperCase.\n//     [k==\"LEFT\"]!then[37]\n//     else[k==\"UP\"]then[38]\n//     else[k==\"RIGHT\"]then[39]\n//     else[k==\"DOWN\"]then[40]\n//     else[k==\"SPACE\"]then[32]execute.\n// ].\nButton:inc=[|;label|\n    label=(self:element!0 get):innerHTML.\n    [label!(:window!\"^([0-9０-９]+)$\"RegExp)match]!then[\n        self:element!((:window!(label)parseInt)+1)text.\n    ]execute.\n    self\n].\n// Button:write=[|m|\n//     [element] ! then [element ! (m) val] execute.\n//     self\n// ].\n// Button:read=[\n//     [element] ! then [element ! val] else [\"\"] execute.\n// ].\n\nField=UI! create.\nField:action=[].\nField:attachEvent=[|;t|\n    t=this.\n    element![|key|\n        [key:which==13]!then[\n            t!(t!readString)action\n        ]execute.\n    ]keypress.\n].\nField:setAction=[|f|\n    self:action=f.\n    self.\n].\nField:initialize=[|label|\n    [label==undef]!then [label=! read] execute.\n    element=$!\"<input>\" create\n    (!(label) num2str) val\n    \"vertical-align\" \"top\" css\n    \"white-space\" \"nowrap\" css.\n    //\"position\" \"absolute\" css.\n    //(container) appendTo.\n    ! autoLayout.\n].\nField:write=[|m|\n    [element] ! then [element ! (! (m) num2str) val] execute.\n    self\n].\nField:readString=[\n    [element] ! then [element ! val] else [\"\"] execute.\n].\n\nTextArea=UI! create.\nListBox=TextArea ! create.\nTextArea:initialize=[|;label|\n    label=! read.\n    manualRow=false.\n    manualCol=false.\n    element=$!\"<textarea>\" create\n    (label) val\n    \"vertical-align\" \"top\" css.\n    //\"white-space\" \"nowrap\" css.\n    //\"position\" \"absolute\" css.\n    //(container) appendTo.\n    element ! \"readonly\" (isReadOnly) attr.\n    ! autoResize.\n    ! autoLayout.\n    writeLn ! (self) (arguments) apply.\n].\nTextArea:autoNewLine=[|f|\n    [f==undef] ! then [f=true] execute.\n    isAutoBR=f.\n    this.\n].\nTextArea ! \"autoNewLine\" \"autoBR\" addAlias.\nTextArea:setReadOnly=[|f|\n    isReadOnly=f.\n    [element]!then[element ! \"readonly\" (f) attr]execute.\n    this.\n].\nTextArea:readOnly=[!(true) setReadOnly].\nTextArea:writable=[!(false) setReadOnly].\nTextArea ! \"writable\" \"readWrite\" addAlias.\nListBox ! readOnly autoBR.\nTextArea:mblen=[|s;i c r|\n    i=0.r=0.\n    [i<(s:length)] ! while [\n        c=s ! (i) charCodeAt.\n        r=r+([c>=128] ! then [2] else[1] execute).\n        i=i+1.\n    ] execute.\n    r.\n].\nTextArea:autoResize=[|;r c|\n    r=1.c=1.\n    ! readString \"\\n\" split [|s;l|\n        l=! (s) mblen.\n        [l>c] ! then [c=l] execute.\n        r=r+1.\n    ] each.\n    [manualRow] ! then [] else [element ! \"rows\"(r) attr] execute.\n    [manualCol] ! then [] else [element ! \"cols\"(c) attr] execute.\n    this.\n].\nTextArea:setRow=[|r| element ! \"rows\"(r) attr. manualRow=true. self].\nTextArea:setCol=[|c| element ! \"cols\"(c) attr. manualCol=true. self].\nTextArea:overwrite=[|;a buf|\n    ! clear.\n    writeLn ! (self) (arguments) apply.\n].\nTextArea:readString=[\n    [element] ! then [element ! val] else [\"\"] execute.\n].\nTextArea:read=TextArea:readString.\nTextArea:write=[\n    (Array:prototype:slice) ! (arguments) call [|cont|\n        // [cont==null]!then [cont=\"\"] execute.\n        // [cont==undef]!then [cont=\"\"] execute.\n        // [cont:each] ! then [\n        //     cont ! [|e| ! (e) writeLn ] each.\n        // ] else [\n        //     ! ((!readString)+(!(cont) num2str)) rawOverwrite\n        // ] execute.\n        ! (cont) (isAutoBR) _write1\n    ] each.\n    ! autoResize.\n].\nTextArea:rawOverwrite=[|c|\n    [element] ! then [element ! (c) val] execute.\n    self.\n].\nTextArea:rawAppend=[|cont|\n    ! ((!readString)+(!(cont) num2str)) rawOverwrite.\n].\nTextArea:writeLn=[\n    (Array:prototype:slice) ! (arguments) call [|cont|\n        // [cont==null]!then [cont=\"\"] execute.\n        // [cont==undef]!then [cont=\"\"] execute.\n        // [cont:each] ! then [\n        //     cont ! [|e| ! (e) writeLn ] each.\n        // ] else [\n        //     ! (cont) write newLine.\n        // ] execute.\n        ! (cont) (true) _write1\n    ] each.\n    ! autoResize\n].\nTextArea:_write1=[|cont br|\n    [!(cont) (Array) instanceof] ! then [\n        cont ! [|e| ! (e) (br) _write1 ] each.\n    ] else [\n        ! (cont) rawAppend.\n        [br]!then [! \"\\n\" rawAppend] execute.\n    ] execute.\n    this.\n].\n\nTextArea:newLine=[\n    ! (\"\\n\") rawAppend.\n].\nTextArea:clear=[! \"\" rawOverwrite.  ! autoResize].\n\nTextArea:readAsArray=[\n    !read  \"\\n\"  split [|e|e!=\"\"] select ([|e|\n        ! (e) str2num\n    ]!(self) bind)  map\n].\nTextArea:changeLine=[|no line|\n    !(! readAsArray(no) (line) set) overwrite\n].\n\nSelectMenu=UI!create.\nSelectMenu:action=[].\nSelectMenu:attachEvent=[|;t|\n    t=this.\n    element ! [|;num txt|\n        txt=t:element!\"option:selected\" find text.\n        num=t:element!val.\n        t ! (txt)(num) action\n    ] change.\n    element!([\n        element!\"0\"val.\n    ]!(self)bind)click.\n].\nSelectMenu:initialize=[|;args|\n    args=:window:Array:prototype:slice!(arguments)call.\n    optNum=0.\n    element=$!\"<select>\" create\n    (!(label) num2str) val\n    \"min-width\" \"100px\" css\n    \"font-size\" \"1.3em\" css\n    \"vertical-align\" \"top\" css\n    \"white-space\" \"nowrap\" css.\n    //\"position\" \"absolute\" css.\n    //(container) appendTo.\n    ! autoLayout.\n    args![|e|self!(e)add]each.\n].\nSelectMenu:add=[|;opt|\n    args=:window:Array:prototype:slice!(arguments)call.\n    args![|e|\n        [:window:Array!(e)isArray]!then[\n            e![|e_e|self!(e_e)add]each.\n        ]else[\n            opt=$!\"<option>\"create.\n            opt!\"value\"(self:optNum)attr.\n            opt!(e)text.\n            self:optNum=self:optNum+1.\n            self:element!(opt)append.\n        ]execute.\n    ]each.\n    self.\n].\n\n// !\"SelectMenu\" \"選択メニュー\"addAlias.\n// SelectMenu!\"add\" \"書く\"addAlias.\n\n// Field:inc=[|by|\n//     by=[by] ! [1] or.\n//     element ! ((element ! val)-0+by)  val.\n\n// ]."]}