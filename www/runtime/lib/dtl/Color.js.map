{"version":3,"sources":["/home/0123/dolittle/Turtle/Color.dtl"],"names":[],"mappings":"aACC,cAAM;CACN,aAAM,MAFN;CAGA,aAAM,MAHN;CAIA,aAAM,MAJN;CAKA,aAAM,MALL;CAMD,aAAM,eANL,sBAMkB,KAAK,KAAK;;;;;;CAN5B,AAOG,KAPH;CAAC;;SAAD,AAQK,8BAAiB;sBARrB;;;CAAA,AASM,EATP,AASS;CATR,AAUM;CAVP,AAWO,EAAG,8BAXT,AAWkB,eAXlB,AAW4B,gBAV1B;CADH,AAYO,EAAG,8BAZT,AAYkB,eAZlB,AAY4B,gBAX1B;QADH,AAaO,EAAG,8BAbT,AAakB,eAblB,AAa4B,gBAZ1B;aADF;;QAcQ,sBAdT,AAcc,IAAK,aAdnB,yBAAA,AAciC;aAdhC;;CAAD,AAeO,GAfP,AAeS,KALE;CAVX,AAgBO,KAAM,6BAhBb,AAgBqB,KANV;CAVX,AAiBO,GAjBP,AAiBS,KAPE;CAVX,AAkBO,KAAM,6BAlBb,AAkBqB,KARV;CAVX,AAmBO,GAnBP,AAmBS,KATE;QAVX,AAoBO,KAAM,6BApBb,AAoBqB,KAVV;gBAVV;;CAAD,AAsBO,KAAM,cAAO,mBAtBpB,AAsB2B;CAtB3B,AAuBO,KAAM,cAAO,mBAvBpB,AAuB2B;CAvB3B,AAwBO,KAAM,cAAO,mBAxBpB,AAwB2B;CAxBzB;;SAAF,AAyBQ,KAfE;sBAVR;;QAAF,AAyBuB,EAfb;aAVR;;SAAF,AAyBkC,KAzBnC;aAAG;;QAAF,AAyB8C,EAzB/C;gBAAG;;QAAF,AAyBuD,EAzBvD,AAyByD;;CAzBvD;;SAAF,AA0BQ,KAhBE;sBAVR;;QAAF,AA0BuB,EAhBb;aAVR;;SAAF,AA0BkC,KA1BnC;aAAG;;QAAF,AA0B8C,EA1B/C;gBAAG;;QAAF,AA0BuD,EA1BvD,AA0ByD;;QA1BvD;;SAAF,AA2BQ,KAjBE;sBAVR;;QAAF,AA2BuB,EAjBb;aAVR;;SAAF,AA2BkC,KA3BnC;aAAG;;QAAF,AA2B8C,EA3B/C;gBAAG;;QAAF,AA2BuD,EA3BvD,AA2ByD;;;CA3BzD,IA6BQ,MA7BR,AA6BU;CA7BV,IA8BQ,MA9BR,AA8BU;CA9BV,IA+BQ,MA/BR,AA+BU;QA/BV,IAgCQ,MAhCR;;CAkCD,aAAM,iBAlCL;;QAkCmB,0BAxBT,OAwBgB,YAxBhB,OAwB6B,YAxB7B,OAwB0C;;CACrD,aAAM,WAnCL;;QAmCa,0BAnCb,IAmCyB,MAhClB,SAHP,IAmCqC,MAhC9B,SAHP,IAmCiD,MAhC1C;;CAiCR;CACA,aAAM,aArCL;;QAqCe,0BArCf,IAqC2B,MAlCpB,SAHP,IAqCuC,MAlChC,SAHP,IAqCmD,MAlC5C;;CAmCR;CACA,aAAM,aAvCL;;wBAAA,IAwCgB,YAxChB,IAwC2B,YAxC3B,IAwCsC,YAxCtC,IAwCiD;;CAElD,aAAM,kBA1CL;;CAAA,IA0CyB,MA1CzB;QAAA;;CA2CD;CACA,aAAM,kBA5CL;;CAAA,IA4CyB,MA5CzB;QAAA;;CA6CD,aAAM,YA7CL;;CA8CG,eAAS,cAAO,mBA9CnB,KA8C+B,UApCrB,WAVV,KA8C6C,UApCnC,WAVV,KA8C2D,UApCjD;CAqCP,iBA/CH,MA+CgB,UArCN,SAqCiB,kBA/C3B,IA+CyC;CACtC,oBAhDH,MAgDmB,UAtCT,SAsCoB,kBAhD9B,IAgD4C;CACzC,mBAjDH,MAiDkB,UAvCR,SAuCmB,kBAjD7B,IAiD2C;QAjD3C;;CAoDD,aAAM,aApDL,sBAoDgB,KAAK,QAAQ,OAAO;;QACjC,4BArDH,MAsDW,cAAO,iBAtDlB,OAAA,AAsD8B,OAtD9B,IAAA,AAsD0C,SAtD1C,AAsDmD,YA5CzC,YAVV,MAuDW,cAAO,iBAvDlB,OAAA,AAuD8B,UAvD9B,IAAA,AAuD6C,SAvD7C,AAuDsD,YA7C5C,YAVV,MAwDW,cAAO,iBAxDlB,OAAA,AAwD8B,SAxD9B,IAAA,AAwD4C,SAxD5C,AAwDqD,YA9C3C;;CAiDX,aAAM,WA3DL;;QA2Da;;CACd,aAAM,aA5DL;;QA4De;;CAChB,aAAM,YA7DL;;QA6Dc;;CACf,aAAM,aA9DJ;CAgED;CACA,aAAM,QAjEL;;;CAkEG,cAAM,aAAM,aAAU,oBAlEzB;CAmEG,aAAK,uBAnEP,sBAmEgB;;SACR,qBApER,AAoEe,IAAI;;CApEpB,AAsEG,EAAE;QAtEJ;;UAuEI,YAAK,cAvEX;sBAAE;;QAAD,AAwEO;gBAxEN;;SAAD,AA0EQ,CAAE,wBA1EV,AA0EuB,IAAI;;;CAiB5B;CACA,WAAI,QA5FH;;;CA6FG,cAAM,aAAM,aAAU,oBA7FzB;CA8FG,aAAK,uBA9FP,sBA8FgB;;SACR,qBA/FR,AA+Fe,IAAI;;CA/FpB,AAiGG,EAAE;QAjGJ;;UAkGI,YAAK,cAlGX;sBAAE;;QAAD,AAmGO;gBAnGN;;SAAD,AAqGQ,CAAE,yBArGV,AAqGwB,IAAI;;;CAmB7B,aAAM,aAxHL;;;;;;;;CAAA,AAyHG,MAAM,aAAM,aAAU,oBAzHzB;CAAA,AA0HG,KA1HH,AA0HQ,eA1HP,sBA0HgB;;SACR,qBA3HR,AA2He,IAAI;;CA3HpB,AA6HG;CA7HH,AA6HmB;CA7HnB,AA6HuC;CA7HvC,AA8HG,iBA9HH,AA8HY,MA9HZ,AA8HkB,QA9HlB,AA8H0B;CA9H1B,AA+HG,aA/HF,sBA+HW;;;;;;CA/HX,AAgIM,EAhIN,AAgIQ;CAhIR,AAiIM,EAjIN,AAiIQ;CAjIR,AAkIM,EAlIN,AAkIQ;CAlIR,AAmIM,eAnIN,AAmIW,IAnIX,AAmIe,IAnIf,AAmImB;CAnIpB,AAoIO,KApIP,AAoIa,IApIZ,AAoIgB;CApIjB,AAoIoB,OApIpB,AAoI4B,MApI3B,AAoIiC;CApIlC,AAoIqC,MApIrC,AAoI4C,KApI3C,AAoIgD;QApIjD,AAoIoD,KApIpD,AAoI0D,IApIzD,AAoI6D;;CApI9D,AAuIG,IAvIH,AAuIO,kBAvIP,AAuIiB,MAvIjB,AAuIuB,QAvIvB,AAuI+B,YAvI/B,AAuI8C,IAAK,YAvInD;QAwIG,0BAxIH,AAwIY,IAxIZ,AAwIgB,MAxIhB,AAwIoB,MAxIpB,AAwI0B,MAxI1B,AAwI8B,KAxI9B,AAwImC;;CAEpC,aAAM,QA1IL,sBA0IW,EAAE,EAAE;;;CA1If,AA2IG,EA3IH,AA2IO;CA3IN;;SAAD,AA4II,EA5IJ,AA4IQ;yBA5IP;;QAAD,AA4ImB,EA5InB,AA4IuB;;CA5ItB;;SAAD,AA6II,EA7IJ,AA6IQ;yBA7IP;;QAAD,AA6ImB,EA7InB,AA6IuB;;QA7IvB,AA8IG;;CAEJ,aAAM,cAhJL;;;;;;;;CAAA,AAiJG,MAAM,aAAM,aAAU,oBAjJzB;CAAA,AAkJG,KAlJH,AAkJQ,eAlJP,sBAkJgB;;SACR,qBAnJR,AAmJe,IAAI;;CAnJpB,AAqJG,KA3IO;CAVV,AAqJyB,OA3If;CAVV,AAqJmD,MA3IzC;CAVV,AAsJG,iBAtJH,AAsJY,MAtJZ,AAsJkB,QAtJlB,AAsJ0B;CAtJ1B,AAuJG,aAvJF,sBAuJW;;;;;;CAvJX,AAwJM,GA9IG,OAVT,AAwJa;CAxJb,AAyJM,GA/IG,OAVT,AAyJa;CAzJb,AA0JM,GAhJG,OAVT,AA0Ja;CA1Jb,AA2JM,eA3JN,AA2JW,IA3JX,AA2Je,IA3Jf,AA2JmB;CA3JpB,AA4JO,KA5JP,AA4Ja,IA5JZ,AA4JgB;CA5JjB,AA4JoB,OA5JpB,AA4J4B,MA5J3B,AA4JiC;CA5JlC,AA4JqC,MA5JrC,AA4J4C,KA5J3C,AA4JgD;QA5JjD,AA4JoD,KA5JpD,AA4J0D,IA5JzD,AA4J6D;;CA5J9D,AA8JG,IA9JH,AA8JO,kBA9JP,AA8JiB,MA9JjB,AA8JuB,QA9JvB,AA8J+B,YA9J/B,AA8J8C,IAAK,YA9JnD;QA+JG,0BArJO,OAVV,AA+JgB,IA/JhB,AA+JoB,OArJV,OAVV,AA+J4B,MA/J5B,AA+JkC,OArJxB,OAVV,AA+J0C,KA/J1C,AA+J+C;;CAGhD,cAAM,wBAlKN,IAAA,IAAA;CAmKA,cAAM,wBAzJK,MAAA,MAAA;CA0JX,aAAK,wBApKG,IAAA,IAUG;CA2JX,YAAI,wBA3JO,MAVH,IAAA;CAsKR,cAAM,wBAtKE,IAUG,MAVH;CAuKR,aAAK,wBA7JM,MAVX,IAUW;CA8JX,gBAAQ,wBA9JG,MAVX,IAUW;CA+JX,aAAK,wBAzKL,IAUW,MAAA;QAgKX,eAAO,wBAhKI,MAAA,MAVX","sourcesContent":["// Dolittle\nColor=root!create.\nColor:r=0.\nColor:g=0.\nColor:b=0.\nColor:a=1.\nColor:initialize=[|arg1 arg2 arg3;args r g b|\n    args=arguments.\n    [(arg1!toString)!(:window!\"^#[0-9A-F]{6}$\"RegExp)match]!then[|;s|\n        s=arg1!toString \"\"split.\n        s!shift.\n        r=:window!((s!shift)+(s!shift)) 16 parseInt.\n        g=:window!((s!shift)+(s!shift)) 16 parseInt.\n        b=:window!((s!shift)+(s!shift)) 16 parseInt.\n    ]else[and!(args:length==1)((!(arg1)typeof)==\"number\")true]then[\n        b=arg1%0x100.\n        arg1=:window!(arg1/0x100)parseInt.\n        g=arg1%0x100.\n        arg1=:window!(arg1/0x100)parseInt.\n        r=arg1%0x100.\n        arg1=:window!(arg1/0x100)parseInt.\n    ]else[\n        arg1=:window:Math! (arg1) floor. \n        arg2=:window:Math! (arg2) floor. \n        arg3=:window:Math! (arg3) floor. \n        [arg1>255]!then[r=255]else[arg1<0]then[r=0]else[r=arg1]execute.\n        [arg2>255]!then[g=255]else[arg2<0]then[g=0]else[g=arg2]execute.\n        [arg3>255]!then[b=255]else[arg3<0]then[b=0]else[b=arg3]execute.\n    ]execute.\n    self:r=r.\n    self:g=g.\n    self:b=b.\n    self:a=1.\n].\nColor:randomCreate=[Color!(random(255))(random(255))(random(255))create].\nColor:darken=[Color!(self:r-50) (self:g-50) (self:b-50) create].\nColor ! \"darken\" \"darker\" addAlias.\nColor:brighten=[Color!(self:r+50) (self:g+50) (self:b+50) create].\nColor ! \"brighten\" \"brighter\" addAlias.\nColor:toString=[\n    \"rgba(\"+self:r+\",\"+self:g+\",\"+self:b+\",\"+self:a+\")\"\n].\nColor:toHalfOpacity=[self:a=0.5.self].\nColor ! \"toHalfOpacity\" \"setTransparency\" addAlias.\nColor:toFullOpacity=[self:a=1.self].\nColor:setCMYK=[\n    black = (window:Math)! (1 - r / 255) (1 - g / 255) (1 - b / 255) min.\n    cyan = (1 - (r / 255) - black) / (1 - black).\n    magenta = (1 - (g / 255) - black) / (1 - black).\n    yellow = (1 - (b / 255) - black) / (1 - black).\n    this.\n].\nColor:fromCMYK=[|cyan magenta yellow black|\n    Color!\n    ((1 - ((window:Math) ! 1  (cyan * (1 - black) + black) min)) * 255)\n    ((1 - ((window:Math) ! 1  (magenta * (1 - black) + black) min)) * 255)\n    ((1 - ((window:Math) ! 1  (yellow * (1 - black) + black) min)) * 255)\n    create.\n].\nColor:getRed=[r].\nColor:getGreen=[g].\nColor:getBlue=[b].\nColor:mixParam=1.1.\n\nLight=! create.\nLight:mix=[|;c|\n    args=(Array:prototype:slice) ! (arguments) call.\n    args=args ! [|e|\n        (:is) ! (e) (Color) call.\n    ] select.\n    c=args ! shift.\n    [(args:length)==0] ! then [\n        c\n    ] else [    \n        (c:mixColor) ! (c) (args) apply\n    ] execute\n].\n/*Light:mix=[|;r g b l|\n    r=0.g=0.b=0.\n    (Array:prototype:slice) ! (arguments) call [|e|\n        r=r+(e:r).\n        g=g+(e:g).\n        b=b+(e:b).\n    ] each.\n    l=arguments:length.\n    Color ! \n    (window:Math ! (r/l*Color:mixParam) 255 min) \n    (window:Math ! (g/l*Color:mixParam) 255 min)\n    (window:Math ! (b/l*Color:mixParam) 255 min) create.\n].*/\n\nInk=! create.\nInk:mix=[|;c|\n    args=(Array:prototype:slice) ! (arguments) call.\n    args=args ! [|e|\n        (:is) ! (e) (Color) call.\n    ] select.\n    c=args ! shift.\n    [(args:length)==0] ! then [\n        c\n    ] else [    \n        (c:mixColor2) ! (c) (args) apply\n    ] execute\n].\n/*Ink:mix=[|;c m y k l|\n    c=0.m=0.y=0.k=0.\n    (Array:prototype:slice) ! (arguments) call [|e|\n        e! setCMYK.\n        c=c+(e:cyan).\n        m=m+(e:magenta).\n        y=y+(e:yellow).\n        k=k+(e:black).\n    ] each.\n    l=arguments:length.\n    Color ! \n    (window:Math ! (c/l*Color:mixParam) 1 min) \n    (window:Math ! (m/l*Color:mixParam) 1 min)\n    (window:Math ! (y/l*Color:mixParam) 1 min)\n    (window:Math ! (k/l*Color:mixParam) 1 min) fromCMYK.\n].*/\nColor:mixColor=[|;args red green blue yyy m|\n    args=(Array:prototype:slice) ! (arguments) call.\n    args=args ! [|e|\n        (:is) ! (e) (Color) call.\n    ] select.\n    red = ! getRed. green = ! getGreen. blue = ! getBlue.\n    yyy = ! (red) (green) (blue) max.\n    args ! [|arg; r g b y|\n        r=arg ! getRed.\n        g=arg ! getGreen.\n        b=arg ! getBlue.\n        y=! (r) (g) (b) max.\n        red = red+r. green = green+g. blue = blue+b. yyy = yyy+y.\n    ] each.\n    \n    m = yyy / (! (red) (green) (blue) max) / ((args:length)+1).\n    Color ! (red*m) (green*m) (blue*m) create.\n].\nColor:max=[|r g b;m|\n    m = r.\n    [m < g] ! then [m = g] execute.\n    [m < b] ! then [m = b] execute.\n    m\n].\nColor:mixColor2=[|;args red green blue yyy m|\n    args=(Array:prototype:slice) ! (arguments) call.\n    args=args ! [|e|\n        (:is) ! (e) (Color) call.\n    ] select.\n    red = 255-(! getRed). green = 255-(! getGreen). blue = 255-(! getBlue).\n    yyy = ! (red) (green) (blue) max.\n    args ! [|arg; r g b y|\n        r=255-(arg ! getRed).\n        g=255-(arg ! getGreen).\n        b=255-(arg ! getBlue).\n        y=! (r) (g) (b) max.\n        red = red+r. green = green+g. blue = blue+b. yyy = yyy+y.\n    ] each.\n    m = yyy / (! (red) (green) (blue) max) / ((args:length)+1).\n    Color ! (255-red*m) (255-green*m) (255-blue*m) create.\n].\n\nBlack=Color!0 0 0 create.\nWhite=Color!255 255 255 create.\nBlue=Color!8 8 255 create.\nRed=Color!255 8 8 create.\nGreen=Color!8 255 8 create.\nPink=Color!255 0 255 create.\nMagenta=Color!255 0 255 create.\nCyan=Color!0 255 255 create.\nYellow=Color!255 255 0 create.\n\n"]}