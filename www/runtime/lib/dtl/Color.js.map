{"version":3,"sources":["/home/devel/devel/Turtle/Color.dtl"],"names":[],"mappings":"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","sourcesContent":["// Dolittle\r\nColor=root!create.\r\nColor:r=0.\r\nColor:g=0.\r\nColor:b=0.\r\nColor:a=1.\r\nColor:initialize=[|arg1 arg2 arg3;args r g b|\r\n    args=arguments.\r\n    [(arg1!toString)!(:window!\"^#[0-9A-F]{6}$\"RegExp)match]!then[|;s|\r\n        s=arg1!toString \"\"split.\r\n        s!shift.\r\n        r=:window!((s!shift)+(s!shift)) 16 parseInt.\r\n        g=:window!((s!shift)+(s!shift)) 16 parseInt.\r\n        b=:window!((s!shift)+(s!shift)) 16 parseInt.\r\n    ]else[and!(args:length==1)((!(arg1)typeof)==\"number\")true]then[\r\n        b=arg1%0x100.\r\n        arg1=:window!(arg1/0x100)parseInt.\r\n        g=arg1%0x100.\r\n        arg1=:window!(arg1/0x100)parseInt.\r\n        r=arg1%0x100.\r\n        arg1=:window!(arg1/0x100)parseInt.\r\n    ]else[\r\n        arg1=:window:Math! (arg1) floor. \r\n        arg2=:window:Math! (arg2) floor. \r\n        arg3=:window:Math! (arg3) floor. \r\n        [arg1>255]!then[r=255]else[arg1<0]then[r=0]else[r=arg1]execute.\r\n        [arg2>255]!then[g=255]else[arg2<0]then[g=0]else[g=arg2]execute.\r\n        [arg3>255]!then[b=255]else[arg3<0]then[b=0]else[b=arg3]execute.\r\n    ]execute.\r\n    self:r=r.\r\n    self:g=g.\r\n    self:b=b.\r\n    self:a=1.\r\n].\r\nColor:randomCreate=[Color!(random(255))(random(255))(random(255))create].\r\nColor:darken=[Color!(self:r-50) (self:g-50) (self:b-50) create].\r\nColor ! \"darken\" \"darker\" addAlias.\r\nColor:brighten=[Color!(self:r+50) (self:g+50) (self:b+50) create].\r\nColor ! \"brighten\" \"brighter\" addAlias.\r\nColor:toString=[\r\n    \"rgba(\"+self:r+\",\"+self:g+\",\"+self:b+\",\"+self:a+\")\"\r\n].\r\nColor:toHalfOpacity=[self:a=0.5.self].\r\nColor ! \"toHalfOpacity\" \"setTransparency\" addAlias.\r\nColor:toFullOpacity=[self:a=1.self].\r\nColor:setCMYK=[\r\n    black = (window:Math)! (1 - r / 255) (1 - g / 255) (1 - b / 255) min.\r\n    cyan = (1 - (r / 255) - black) / (1 - black).\r\n    magenta = (1 - (g / 255) - black) / (1 - black).\r\n    yellow = (1 - (b / 255) - black) / (1 - black).\r\n    this.\r\n].\r\nColor:fromCMYK=[|cyan magenta yellow black|\r\n    Color!\r\n    ((1 - ((window:Math) ! 1  (cyan * (1 - black) + black) min)) * 255)\r\n    ((1 - ((window:Math) ! 1  (magenta * (1 - black) + black) min)) * 255)\r\n    ((1 - ((window:Math) ! 1  (yellow * (1 - black) + black) min)) * 255)\r\n    create.\r\n].\r\nColor:getRed=[r].\r\nColor:getGreen=[g].\r\nColor:getBlue=[b].\r\nColor:mixParam=1.1.\r\n\r\nLight=! create.\r\nLight:mix=[|;c|\r\n    args=(Array:prototype:slice) ! (arguments) call.\r\n    args=args ! [|e|\r\n        (:is) ! (e) (Color) call.\r\n    ] select.\r\n    c=args ! shift.\r\n    [(args:length)==0] ! then [\r\n        c\r\n    ] else [    \r\n        (c:mixColor) ! (c) (args) apply\r\n    ] execute\r\n].\r\n/*Light:mix=[|;r g b l|\r\n    r=0.g=0.b=0.\r\n    (Array:prototype:slice) ! (arguments) call [|e|\r\n        r=r+(e:r).\r\n        g=g+(e:g).\r\n        b=b+(e:b).\r\n    ] each.\r\n    l=arguments:length.\r\n    Color ! \r\n    (window:Math ! (r/l*Color:mixParam) 255 min) \r\n    (window:Math ! (g/l*Color:mixParam) 255 min)\r\n    (window:Math ! (b/l*Color:mixParam) 255 min) create.\r\n].*/\r\n\r\nInk=! create.\r\nInk:mix=[|;c|\r\n    args=(Array:prototype:slice) ! (arguments) call.\r\n    args=args ! [|e|\r\n        (:is) ! (e) (Color) call.\r\n    ] select.\r\n    c=args ! shift.\r\n    [(args:length)==0] ! then [\r\n        c\r\n    ] else [    \r\n        (c:mixColor2) ! (c) (args) apply\r\n    ] execute\r\n].\r\n/*Ink:mix=[|;c m y k l|\r\n    c=0.m=0.y=0.k=0.\r\n    (Array:prototype:slice) ! (arguments) call [|e|\r\n        e! setCMYK.\r\n        c=c+(e:cyan).\r\n        m=m+(e:magenta).\r\n        y=y+(e:yellow).\r\n        k=k+(e:black).\r\n    ] each.\r\n    l=arguments:length.\r\n    Color ! \r\n    (window:Math ! (c/l*Color:mixParam) 1 min) \r\n    (window:Math ! (m/l*Color:mixParam) 1 min)\r\n    (window:Math ! (y/l*Color:mixParam) 1 min)\r\n    (window:Math ! (k/l*Color:mixParam) 1 min) fromCMYK.\r\n].*/\r\nColor:mixColor=[|;args red green blue yyy m|\r\n    args=(Array:prototype:slice) ! (arguments) call.\r\n    args=args ! [|e|\r\n        (:is) ! (e) (Color) call.\r\n    ] select.\r\n    red = ! getRed. green = ! getGreen. blue = ! getBlue.\r\n    yyy = ! (red) (green) (blue) max.\r\n    args ! [|arg; r g b y|\r\n        r=arg ! getRed.\r\n        g=arg ! getGreen.\r\n        b=arg ! getBlue.\r\n        y=! (r) (g) (b) max.\r\n        red = red+r. green = green+g. blue = blue+b. yyy = yyy+y.\r\n    ] each.\r\n    \r\n    m = yyy / (! (red) (green) (blue) max) / ((args:length)+1).\r\n    Color ! (red*m) (green*m) (blue*m) create.\r\n].\r\nColor:max=[|r g b;m|\r\n    m = r.\r\n    [m < g] ! then [m = g] execute.\r\n    [m < b] ! then [m = b] execute.\r\n    m\r\n].\r\nColor:mixColor2=[|;args red green blue yyy m|\r\n    args=(Array:prototype:slice) ! (arguments) call.\r\n    args=args ! [|e|\r\n        (:is) ! (e) (Color) call.\r\n    ] select.\r\n    red = 255-(! getRed). green = 255-(! getGreen). blue = 255-(! getBlue).\r\n    yyy = ! (red) (green) (blue) max.\r\n    args ! [|arg; r g b y|\r\n        r=255-(arg ! getRed).\r\n        g=255-(arg ! getGreen).\r\n        b=255-(arg ! getBlue).\r\n        y=! (r) (g) (b) max.\r\n        red = red+r. green = green+g. blue = blue+b. yyy = yyy+y.\r\n    ] each.\r\n    m = yyy / (! (red) (green) (blue) max) / ((args:length)+1).\r\n    Color ! (255-red*m) (255-green*m) (255-blue*m) create.\r\n].\r\n\r\nBlack=Color!0 0 0 create.\r\nWhite=Color!255 255 255 create.\r\nBlue=Color!8 8 255 create.\r\nRed=Color!255 8 8 create.\r\nGreen=Color!8 255 8 create.\r\nPink=Color!255 0 255 create.\r\nMagenta=Color!255 0 255 create.\r\nCyan=Color!0 255 255 create.\r\nYellow=Color!255 255 0 create.\r\n\r\n"]}