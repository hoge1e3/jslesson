{"version":3,"sources":["/home/devel/devel/Turtle/Color.dtl"],"names":[],"mappings":"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","sourcesContent":["// Dolittle\r\nColor=root!create.\r\nColor:r=0.\r\nColor:g=0.\r\nColor:b=0.\r\nColor:a=1.\r\nColor:initialize=[|arg1 arg2 arg3;args r g b|\r\n    args=arguments.\r\n    [(arg1!toString)!(:window!\"^#[0-9A-F]{6}$\"RegExp)match]!then[|;s|\r\n        s=arg1!toString \"\"split.\r\n        s!shift.\r\n        r=:window!((s!shift)+(s!shift)) 16 parseInt.\r\n        g=:window!((s!shift)+(s!shift)) 16 parseInt.\r\n        b=:window!((s!shift)+(s!shift)) 16 parseInt.\r\n    ]else[and!(args:length==1)((!(arg1)typeof)==\"number\")true]then[\r\n        b=arg1%0x100.\r\n        arg1=:window!(arg1/0x100)parseInt.\r\n        g=arg1%0x100.\r\n        arg1=:window!(arg1/0x100)parseInt.\r\n        r=arg1%0x100.\r\n        arg1=:window!(arg1/0x100)parseInt.\r\n    ]else[\r\n        arg1=:window:Math! (arg1) floor. \r\n        arg2=:window:Math! (arg2) floor. \r\n        arg3=:window:Math! (arg3) floor. \r\n        [arg1>255]!then[r=255]else[arg1<0]then[r=0]else[r=arg1]execute.\r\n        [arg2>255]!then[g=255]else[arg2<0]then[g=0]else[g=arg2]execute.\r\n        [arg3>255]!then[b=255]else[arg3<0]then[b=0]else[b=arg3]execute.\r\n    ]execute.\r\n    self:r=r.\r\n    self:g=g.\r\n    self:b=b.\r\n    self:a=1.\r\n].\r\nColor:randomCreate=[Color!(random(255))(random(255))(random(255))create].\r\nColor:darken=[Color!(self:r-50) (self:g-50) (self:b-50) create].\r\nColor ! \"darken\" \"darker\" addAlias.\r\nColor:brighten=[Color!(self:r+50) (self:g+50) (self:b+50) create].\r\nColor ! \"brighten\" \"brighter\" addAlias.\r\nColor:toString=[\r\n    \"rgba(\"+self:r+\",\"+self:g+\",\"+self:b+\",\"+self:a+\")\"\r\n].\r\nColor:toHalfOpacity=[self:a=0.5.self].\r\nColor ! \"toHalfOpacity\" \"setTransparency\" addAlias.\r\nColor:toFullOpacity=[self:a=1.self].\r\nColor:setCMYK=[\r\n    black = (window:Math)! (1 - r / 255) (1 - g / 255) (1 - b / 255) min.\r\n    cyan = (1 - (r / 255) - black) / (1 - black).\r\n    magenta = (1 - (g / 255) - black) / (1 - black).\r\n    yellow = (1 - (b / 255) - black) / (1 - black).\r\n    this.\r\n].\r\nColor:fromCMYK=[|cyan magenta yellow black|\r\n    Color!\r\n    ((1 - ((window:Math) ! 1  (cyan * (1 - black) + black) min)) * 255)\r\n    ((1 - ((window:Math) ! 1  (magenta * (1 - black) + black) min)) * 255)\r\n    ((1 - ((window:Math) ! 1  (yellow * (1 - black) + black) min)) * 255)\r\n    create.\r\n].\r\nColor:getRed=[r].\r\nColor:getGreen=[g].\r\nColor:getBlue=[b].\r\nColor:mixParam=1.1.\r\n\r\nLight=! create.\r\nLight:mix=[|;c|\r\n    args=(Array:prototype:slice) ! (arguments) call.\r\n    args=args ! [|e|\r\n        (:is) ! (e) (Color) call.\r\n    ] select.\r\n    c=args ! shift.\r\n    [(args:length)==0] ! then [\r\n        c\r\n    ] else [    \r\n        (c:mixColor) ! (c) (args) apply\r\n    ] execute\r\n].\r\n/*Light:mix=[|;r g b l|\r\n    r=0.g=0.b=0.\r\n    (Array:prototype:slice) ! (arguments) call [|e|\r\n        r=r+(e:r).\r\n        g=g+(e:g).\r\n        b=b+(e:b).\r\n    ] each.\r\n    l=arguments:length.\r\n    Color ! \r\n    (window:Math ! (r/l*Color:mixParam) 255 min) \r\n    (window:Math ! (g/l*Color:mixParam) 255 min)\r\n    (window:Math ! (b/l*Color:mixParam) 255 min) create.\r\n].*/\r\n\r\nInk=! create.\r\nInk:mix=[|;c|\r\n    args=(Array:prototype:slice) ! (arguments) call.\r\n    args=args ! [|e|\r\n        (:is) ! (e) (Color) call.\r\n    ] select.\r\n    c=args ! shift.\r\n    [(args:length)==0] ! then [\r\n        c\r\n    ] else [    \r\n        (c:mixColor2) ! (c) (args) apply\r\n    ] execute\r\n].\r\n/*Ink:mix=[|;c m y k l|\r\n    c=0.m=0.y=0.k=0.\r\n    (Array:prototype:slice) ! (arguments) call [|e|\r\n        e! setCMYK.\r\n        c=c+(e:cyan).\r\n        m=m+(e:magenta).\r\n        y=y+(e:yellow).\r\n        k=k+(e:black).\r\n    ] each.\r\n    l=arguments:length.\r\n    Color ! \r\n    (window:Math ! (c/l*Color:mixParam) 1 min) \r\n    (window:Math ! (m/l*Color:mixParam) 1 min)\r\n    (window:Math ! (y/l*Color:mixParam) 1 min)\r\n    (window:Math ! (k/l*Color:mixParam) 1 min) fromCMYK.\r\n].*/\r\nColor:mixColor=[|;args red green blue yyy m|\r\n    args=(Array:prototype:slice) ! (arguments) call.\r\n    args=args ! [|e|\r\n        (:is) ! (e) (Color) call.\r\n    ] select.\r\n    red = ! getRed. green = ! getGreen. blue = ! getBlue.\r\n    yyy = ! (red) (green) (blue) max.\r\n    args ! [|arg; r g b y|\r\n        r=arg ! getRed.\r\n        g=arg ! getGreen.\r\n        b=arg ! getBlue.\r\n        y=! (r) (g) (b) max.\r\n        red = red+r. green = green+g. blue = blue+b. yyy = yyy+y.\r\n    ] each.\r\n    \r\n    m = yyy / (! (red) (green) (blue) max) / ((args:length)+1).\r\n    Color ! (red*m) (green*m) (blue*m) create.\r\n].\r\nColor:max=[|r g b;m|\r\n    m = r.\r\n    [m < g] ! then [m = g] execute.\r\n    [m < b] ! then [m = b] execute.\r\n    m\r\n].\r\nColor:mixColor2=[|;args red green blue yyy m|\r\n    args=(Array:prototype:slice) ! (arguments) call.\r\n    args=args ! [|e|\r\n        (:is) ! (e) (Color) call.\r\n    ] select.\r\n    red = 255-(! getRed). green = 255-(! getGreen). blue = 255-(! getBlue).\r\n    yyy = ! (red) (green) (blue) max.\r\n    args ! [|arg; r g b y|\r\n        r=255-(arg ! getRed).\r\n        g=255-(arg ! getGreen).\r\n        b=255-(arg ! getBlue).\r\n        y=! (r) (g) (b) max.\r\n        red = red+r. green = green+g. blue = blue+b. yyy = yyy+y.\r\n    ] each.\r\n    m = yyy / (! (red) (green) (blue) max) / ((args:length)+1).\r\n    Color ! (255-red*m) (255-green*m) (255-blue*m) create.\r\n].\r\n\r\nBlack=Color!0 0 0 create.\r\nWhite=Color!255 255 255 create.\r\nBlue=Color!8 8 255 create.\r\nRed=Color!255 8 8 create.\r\nGreen=Color!8 255 8 create.\r\nPink=Color!255 0 255 create.\r\nMagenta=Color!255 0 255 create.\r\nCyan=Color!0 255 255 create.\r\nYellow=Color!255 255 0 create.\r\n\r\n"]}