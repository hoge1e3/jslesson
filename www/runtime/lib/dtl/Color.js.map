{"version":3,"sources":["/home/0123/dolittle/Turtle/Color.dtl"],"names":[],"mappings":"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","sourcesContent":["// Dolittle\nColor=root!create.\nColor:r=0.\nColor:g=0.\nColor:b=0.\nColor:a=1.\nColor:initialize=[|arg1 arg2 arg3;args r g b|\n    args=arguments.\n    [(arg1!toString)!(:window!\"^#[0-9A-F]{6}$\"RegExp)match]!then[|;s|\n        s=arg1!toString \"\"split.\n        s!shift.\n        r=:window!((s!shift)+(s!shift)) 16 parseInt.\n        g=:window!((s!shift)+(s!shift)) 16 parseInt.\n        b=:window!((s!shift)+(s!shift)) 16 parseInt.\n    ]else[and!(args:length==1)((!(arg1)typeof)==\"number\")true]then[\n        b=arg1%0x100.\n        arg1=:window!(arg1/0x100)parseInt.\n        g=arg1%0x100.\n        arg1=:window!(arg1/0x100)parseInt.\n        r=arg1%0x100.\n        arg1=:window!(arg1/0x100)parseInt.\n    ]else[\n        arg1=:window:Math! (arg1) floor. \n        arg2=:window:Math! (arg2) floor. \n        arg3=:window:Math! (arg3) floor. \n        [arg1>255]!then[r=255]else[arg1<0]then[r=0]else[r=arg1]execute.\n        [arg2>255]!then[g=255]else[arg2<0]then[g=0]else[g=arg2]execute.\n        [arg3>255]!then[b=255]else[arg3<0]then[b=0]else[b=arg3]execute.\n    ]execute.\n    self:r=r.\n    self:g=g.\n    self:b=b.\n    self:a=1.\n].\nColor:randomCreate=[Color!(random(255))(random(255))(random(255))create].\nColor:darken=[Color!(self:r-50) (self:g-50) (self:b-50) create].\nColor:brighten=[Color!(self:r+50) (self:g+50) (self:b+50) create].\nColor:toString=[\n    \"rgba(\"+self:r+\",\"+self:g+\",\"+self:b+\",\"+self:a+\")\"\n].\nColor:toHalfOpacity=[self:a=0.5.self].\nColor:toFullOpacity=[self:a=1.self].\nColor:setCMYK=[\n    black = (window:Math)! (1 - r / 255) (1 - g / 255) (1 - b / 255) min.\n    cyan = (1 - (r / 255) - black) / (1 - black).\n    magenta = (1 - (g / 255) - black) / (1 - black).\n    yellow = (1 - (b / 255) - black) / (1 - black).\n    this.\n].\nColor:fromCMYK=[|cyan magenta yellow black|\n    Color!\n    ((1 - ((window:Math) ! 1  (cyan * (1 - black) + black) min)) * 255)\n    ((1 - ((window:Math) ! 1  (magenta * (1 - black) + black) min)) * 255)\n    ((1 - ((window:Math) ! 1  (yellow * (1 - black) + black) min)) * 255)\n    create.\n].\nColor:getRed=[r].\nColor:getGreen=[g].\nColor:getBlue=[b].\nColor:mixParam=1.1.\n\nLight=! create.\nLight:mix=[|;c|\n    args=(Array:prototype:slice) ! (arguments) call.\n    args=args ! [|e|\n        (:is) ! (e) (Color) call.\n    ] select.\n    c=args ! shift.\n    [(args:length)==0] ! then [\n        c\n    ] else [    \n        (c:mixColor) ! (c) (args) apply\n    ] execute\n].\n/*Light:mix=[|;r g b l|\n    r=0.g=0.b=0.\n    (Array:prototype:slice) ! (arguments) call [|e|\n        r=r+(e:r).\n        g=g+(e:g).\n        b=b+(e:b).\n    ] each.\n    l=arguments:length.\n    Color ! \n    (window:Math ! (r/l*Color:mixParam) 255 min) \n    (window:Math ! (g/l*Color:mixParam) 255 min)\n    (window:Math ! (b/l*Color:mixParam) 255 min) create.\n].*/\n\nInk=! create.\nInk:mix=[|;c|\n    args=(Array:prototype:slice) ! (arguments) call.\n    args=args ! [|e|\n        (:is) ! (e) (Color) call.\n    ] select.\n    c=args ! shift.\n    [(args:length)==0] ! then [\n        c\n    ] else [    \n        (c:mixColor2) ! (c) (args) apply\n    ] execute\n].\n/*Ink:mix=[|;c m y k l|\n    c=0.m=0.y=0.k=0.\n    (Array:prototype:slice) ! (arguments) call [|e|\n        e! setCMYK.\n        c=c+(e:cyan).\n        m=m+(e:magenta).\n        y=y+(e:yellow).\n        k=k+(e:black).\n    ] each.\n    l=arguments:length.\n    Color ! \n    (window:Math ! (c/l*Color:mixParam) 1 min) \n    (window:Math ! (m/l*Color:mixParam) 1 min)\n    (window:Math ! (y/l*Color:mixParam) 1 min)\n    (window:Math ! (k/l*Color:mixParam) 1 min) fromCMYK.\n].*/\nColor:mixColor=[|;args red green blue yyy m|\n    args=(Array:prototype:slice) ! (arguments) call.\n    args=args ! [|e|\n        (:is) ! (e) (Color) call.\n    ] select.\n    red = ! getRed. green = ! getGreen. blue = ! getBlue.\n    yyy = ! (red) (green) (blue) max.\n    args ! [|arg; r g b y|\n        r=arg ! getRed.\n        g=arg ! getGreen.\n        b=arg ! getBlue.\n        y=! (r) (g) (b) max.\n        red = red+r. green = green+g. blue = blue+b. yyy = yyy+y.\n    ] each.\n    \n    m = yyy / (! (red) (green) (blue) max) / ((args:length)+1).\n    Color ! (red*m) (green*m) (blue*m) create.\n].\nColor:max=[|r g b;m|\n    m = r.\n    [m < g] ! then [m = g] execute.\n    [m < b] ! then [m = b] execute.\n    m\n].\nColor:mixColor2=[|;args red green blue yyy m|\n    args=(Array:prototype:slice) ! (arguments) call.\n    args=args ! [|e|\n        (:is) ! (e) (Color) call.\n    ] select.\n    red = 255-(! getRed). green = 255-(! getGreen). blue = 255-(! getBlue).\n    yyy = ! (red) (green) (blue) max.\n    args ! [|arg; r g b y|\n        r=255-(arg ! getRed).\n        g=255-(arg ! getGreen).\n        b=255-(arg ! getBlue).\n        y=! (r) (g) (b) max.\n        red = red+r. green = green+g. blue = blue+b. yyy = yyy+y.\n    ] each.\n    m = yyy / (! (red) (green) (blue) max) / ((args:length)+1).\n    Color ! (255-red*m) (255-green*m) (255-blue*m) create.\n].\n\nBlack=Color!0 0 0 create.\nWhite=Color!255 255 255 create.\nBlue=Color!8 8 255 create.\nRed=Color!255 8 8 create.\nGreen=Color!8 255 8 create.\nPink=Color!255 0 255 create.\nMagenta=Color!255 0 255 create.\nCyan=Color!0 255 255 create.\nYellow=Color!255 255 0 create.\n\n"]}