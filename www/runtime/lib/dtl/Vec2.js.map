{"version":3,"sources":["/home/devel/devel/Turtle/Vec2.dtl"],"names":[],"mappings":"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","sourcesContent":["// Dolittle\r\nVec2=! create. \r\nVec2:initialize=[|x y|\r\n    this:x=x. this:y=y.\r\n].\r\nVec2:add=[|o|\r\n    Vec2! (x+o:x) (y+o:y) create.\r\n].\r\nVec2:sub=[|o|\r\n    Vec2! (x-o:x) (y-o:y) create.\r\n].\r\nVec2.mul=[|k|\r\n    Vec2! (k*x) (k*y) create.\r\n].\r\nVec2.div=[|k|\r\n    Vec2! (x/k) (y/k) create.\r\n].\r\nVec2:len=[\r\n    (window:Math) ! (x*x+y*y) sqrt.\r\n].\r\nVec2:dir=[\r\n    (window:Math) ! (y) (x) atan2 degree.\r\n].\r\nVec2:rotate=[|d;vx vy|\r\n    vx=Vec2 ! (d ! cos) (d ! sin) create.     \r\n    vy=Vec2 ! ((d+90) ! cos) ((d+90) ! sin) create.\r\n    vx ! (x) mul (vy ! (y) mul) add. \r\n].\r\nVec2:O=Vec2 ! 0 0 create.\r\nVec2:X=Vec2 ! 1 0 create.\r\nVec2:Y=Vec2 ! 0 1 create.\r\n\r\nShape=! create.\r\nShape:isIdentityTransform=[|dir pos| \r\n    [dir==0] ! [pos.x==0] [pos.y==0] and.\r\n].\r\nPolygon=Shape ! create.\r\nPolygon:initialize=[|v2ary|\r\n    this:v2ary=[v2ary] ! then [v2ary] else [ Array!create.] execute.\r\n].\r\nPolygon:fromPolyKArray=[|a;x y res|\r\n    res=Polygon ! create.\r\n    [a!length] ! while [\r\n        x=a! shift.\r\n        y=a! shift.\r\n        res ! (x) (y) addVertex.\r\n    ] execute.\r\n    res.\r\n].\r\n\r\nPolygon:originPoint=[\r\n    and ! [v2ary] [(v2ary! length?)>0] true then [\r\n        v2ary ! 1 get\r\n    ] execute.\r\n].\r\nPolygon:lastPoint=[\r\n    and ! [v2ary] [(v2ary! length?)>0] true then [\r\n        v2ary ! (v2ary! length?) get\r\n    ] execute.\r\n].\r\nPolygon:isPathClosed=[|;o l|\r\n    o=!originPoint.\r\n    l=!lastPoint.\r\n    and ! [o] [l] [(o ! (l) sub len)<0.1] true \r\n].\r\nPolygon:addVertex=[|x y|\r\n    v2ary! (Vec2 !(x) (y) create) push.\r\n    this.\r\n].\r\nPolygon:addPoint=Polygon:addVertex.\r\nPolygon:toPolyKArray=[|;res|\r\n    res=Array ! create.\r\n    v2ary ! [|e|\r\n        res ! (e:x) push.\r\n        res ! (e:y) push.\r\n    ] forEach.\r\n    [!isPathClosed] ! then [res ! pop. res ! pop] execute.\r\n    (window:PolyK) ! (res) FixDirection.\r\n].\r\nPolygon:transform=[|deg pos;res|\r\n    Polygon! (v2ary ! [|v|\r\n        v! (deg) rotate (pos) add.\r\n    ] map) create.\r\n].\r\nPolygon:each=[|f|\r\n    v2ary ! [|v|\r\n        f ! (v) execute.\r\n    ] forEach.\r\n].\r\nPolygon:pointCount=[\r\n    v2ary:length.\r\n].\r\nPolygon:center=[|;p|\r\n    p=Vec2:O.\r\n    ! [|v|\r\n        p = p ! (v) add.\r\n    ] each.\r\n    p ! (!pointCount) div.\r\n].\r\nPolygon:fromLine=[|pos1 pos2 width;p d l|\r\n    p=pos2!(pos1)sub.\r\n    d=p! dir.\r\n    l=p! len.\r\n    ! create \r\n    0 -(width/2) addPoint \r\n    (l) -(width/2) addPoint \r\n    (l) (width/2) addPoint\r\n    0 (width/2) addPoint (d) (pos1) transform .\r\n].\r\nPolygon:intersects= [|o|\r\n    [o ! (Polygon) is ] ! then [\r\n        (window:PolyK) ! (!toPolyKArray) (o!toPolyKArray) Intersects.\r\n    ] else [\r\n        o ! (this) intersects.\r\n    ] execute.\r\n].\r\nShapeGroup=Shape! create.\r\nShapeGroup:initialize=[\r\n    shapes=Array ! create.\r\n].\r\nShapeGroup:add=[|s|\r\n    shapes ! (s) push.\r\n].\r\nShapeGroup:intersects=[|b;res a|\r\n    a=this.\r\n    [b ! (ShapeGroup) is] ! then [\r\n        (a:shapes) ! [|ae|\r\n            (b:shapes) ! [|be|\r\n                [ae ! (be) intersects  ] !then[res=true] execute.\r\n            ] each.\r\n        ] each.\r\n    ] else [\r\n        (a:shapes) ! [|ae|\r\n            [ae ! (b) intersects] !then[res=true] execute.\r\n        ] each.\r\n    ] execute.\r\n    res\r\n].\r\nShapeGroup:transform=[|dir pos;res| \r\n    res= ShapeGroup ! create.\r\n    shapes ! [|s|\r\n        res ! (s ! (dir) (pos) transform) add.\r\n    ] forEach.\r\n    res.\r\n].\r\nShapeGroup:center=[|;p|\r\n    p=Vec2:O.\r\n    shapes ! [|s|\r\n        p = p ! (s!center) add.\r\n    ] each.\r\n    p ! (shapes:length) div.\r\n]."]}