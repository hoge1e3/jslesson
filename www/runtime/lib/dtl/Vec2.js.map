{"version":3,"sources":["/home/devel/devel/turtle/Vec2.dtl"],"names":[],"mappings":"4BAEC,iBAAO;CACP,YAAK,eAHJ,sBAGiB,EAAE;;CAHnB,IAIQ,MAJR,AAIU;QAJV,IAIkB,MAJlB,AAIoB;;CAErB,YAAK,QANJ,sBAMU;;QACP,YAAsB,aAAf,UAPV,AAOY,CAAE,UAAI,UAPlB,AAOoB,CAAE;;CAEvB,YAAK,QATJ,sBASU;;QACP,YAAsB,aAAf,UAVV,AAUY,CAAE,UAAI,UAVlB,AAUoB,CAAE;;CAEvB;CAAK,YAZJ,sBAYU;;QACP,YAAkB,aAbrB,AAaU,EAAE,cAbZ,AAagB,EAAE;;CAEnB;CAAK,YAfJ,sBAeU;;QACP,YAAkB,aAAX,UAhBV,AAgBY,MAAI,UAhBhB,AAgBkB;;CAEnB,YAAK,QAlBJ;;SAmBI,cAAO,SAAkB,YAAT,UAAE,YAAE,UAAE;;CAE3B,YAAK,QArBJ;;SAsBI,cAAO,SAAgB,WAAP,YAAI,WAAS;;CAElC,YAAK,WAxBJ,sBAwBa;;;;CAxBb,AAyBG,GAAG,YAA2B,YAzBjC,AAyBc,CAAI,YAzBlB,AAyBwB,CAAI;CAzB5B,AA0BG,GAAG,YAAqC,cA1B3C,AA0Be,EAtBK,MAsBG,cA1BvB,AA0B8B,EAtBV,MAsBkB;QA1BtC,AA2BG,EAAS,SAAH,WAAsB,SA3B/B,AA2BiB,EAAS,SAAH;;CAExB,YAAK,MAAE,YAAW,WA7BlB,IAAA;CA8BA,YAAK,MAAE,YAAW,WA9BjB,IAAD;CA+BA,YAAK,MAAE,YAAW,WA/BlB,IAAC;CAiCD,kBAAQ;CACR,aAAM,wBAlCL,sBAkC2B,IAAI;;QAlC9B;;SAAD,AAmCI,MAnCL;GAmCqC,QAnCnC;;CAAD,AAmCe;SAAI,YAnCpB;IAAE;;CAAD,AAmC0B;SAAI,YAnC/B;;;CAqCA,gBAAQ,aAAQ;CAChB,eAAQ,eAtCP,sBAsCoB;;QAtCpB,IAuCQ,UAvCP;;QAAD,AAuCe;GAAS,UAAa,SAvCpC;;QAAD,AAuC8B;IAA6B,YAvC1D;;QAuC2C,aAAM;;;CAEnD,eAAQ,mBAzCP,sBAyCwB;;;;;CAzCxB,AA0CG,IAAI,eAAU;CA1ChB;;QAAD,AA2CI,CAAE;GAAU,WAIX,YA/CJ;;CAAD,AA4CO,EA5CP,AA4CS,CAAG;CA5CZ,AA6CO,EA7CP,AA6CS,CAAG;QA7CZ,AA8CO,GAAc,eA9CrB,AA8Cc,IA9Cd,AA8CkB;;QA9ClB,AAgDG;;CAGJ,eAAQ,gBAnDP;;QAoDG,WAAmC,SApDrC;;QAoDS;IApDT;;UAoDkB,aAAO,eApD3B;IAoD4C,UAEtC,YAtDJ;;QAqDM,aAAU,QArDjB;;;CAwDD,eAAQ,cAxDP;;QAyDG,WAAmC,SAzDrC;;QAyDS;IAzDT;;UAyDkB,aAAO,eAzD3B;IAyD4C,UAEtC,YA3DJ;;QA0DM,aAAyB,SAAhB,aAAO;;;CAGxB,eAAQ,iBA7DP;;;;CAAA,AA8DG,MAAG;CA9DN,AA+DG,MAAG;QACH,WAAsC,SAhExC;;QAAD,AAgEU;IAhET;;QAAD,AAgEc;IAhEb;;UAAD,AAgEmB,CAAQ,SAhE3B,AAgEwB,GAAO,WAhE/B;;;CAkEB,eAAQ,cAlEP,sBAkEmB,EAAE;;CAClB,aAA8B,UAAtB,YAAc,YAnEzB,AAmEkB,IAnElB,AAmEsB;QAnEtB;;CAsED,eAAQ,aAAS,eAAQ;CACzB,eAAQ,iBAvEP;;;CAAA,AAwEG,IAAI,aAAQ;CACZ,aAGE,YA5EJ,sBAyEY;;CAzEb,AA0EO,GAAY,UA1ElB,AA0Ea,CAAE;QA1EhB,AA2EO,GAAY,UA3ElB,AA2Ea,CAAE;;CA3Ef;;YA6EI;GAAgB,UAA4B,YA7EhD;;CAAD,AA6E2B,GAAM;QA7EjC,AA6EsC,GAAM;;SACxC,cAAO,UAAe,kBA9E1B,AA8EqB;;CAEtB,eAAQ,cAhFP,sBAgFmB,IAAI;;;QACpB,eAEO,YAFG,aAER,QAnFJ,sBAiFsB;;QAjFtB,AAkFM,CAAS,YAlFhB,AAkFW,KAAkB,SAlF7B,AAkFwB;;;CAGzB,eAAQ,SArFP,sBAqFc;;QACX,aAEE,YAxFJ,sBAsFY;;QAtFb,AAuFO,CAAQ,aAvFd,AAuFW;;;CAGb,eAAQ,eA1FP;;QA2FG,aAAM;;CAEV,eAAQ,WA7FP;;;CAAA,AA8FG,EAAE,YAAK;KAGL,SAjGJ,sBA+FM;;QA/FP,AAgGO,EAhGP,AAgGW,CAAQ,SAhGlB,AAgGe;;QAhGhB,AAkGG,CAAkB,aAAZ;;CAEV,eAAQ,aApGP,sBAoGkB,KAAK,KAAK;;;;;CApG5B,AAqGG,EArGH,AAqGK,IAAW,SArGhB,AAqGW;CArGX,AAsGG,EAtGH,AAsGK,CAAG;CAtGR,AAuGG,EAvGH,AAuGK,CAAG;YACH,YACW,aAzGjB,OAAC,AAyGO,MAzGN,MA0GiB,cA1GlB,AA0GI,MA1GJ,AA0GS,MA1GR,MA2GgB,cA3GjB,AA2GI,KA3GJ,AA2GQ,MA3GP,MA4Gc,aA5GhB,MAAC,AA4GM,MA5GL,MA4GkC,eA5GnC,AA4GyB,IA5GzB,AA4G6B;;CAE9B,eAAQ,eA9GP,sBA8GqB;;QA9GpB;;QAAD,AA+GI,CAAc,QAAT;GAAgB,UAEpB,SAjHJ;;SAgHO,cAAO,UAA0C,oBAA/B,qBAhH1B,AAgHyC,CAAE;IAGtC,YAnHJ;;QAAD,AAkHO,CAAW,gBAlHjB;;;CAqHF,mBAAW,aAAO;CAClB,kBAAW,eAtHV;;QAuHG,eAAO,aAAQ;;CAEnB,kBAAW,QAzHV,sBAyHgB;;QACb,cAAa,UA1HhB,AA0Ha;;CAEd,kBAAW,eA5HV,sBA4HuB;;;;CA5HvB,AA6HG,EA7HH;CAAC;;QAAD,AA8HI,CAAiB,QAAZ;GAAkB,UAMtB,SApIJ;;SAAD,AA+HQ,CAAE,WAID,SAnIP,sBA+HoB;;SA/HtB,AAgIY,CAAE,WAED,SAlIV,sBAgIuB;;QAhItB;;QAAF,AAiIc,EAAU,gBAjIvB,AAiImB;GAAmB,UAAe,YAjIpD;;QAAJ,AAiI8C,IAAI;;;;IAO7C,YAxIJ;;SAAD,AAqIQ,CAAE,WAED,SAvIP,sBAqIoB;;QArInB;;QAAD,AAsIU,EAAS,gBAtIrB,AAsIkB;GAAgB,UAAe,YAtI9C;;QAAH,AAsIuC,IAAI;;;;QAtI3C,AAyIG;;CAEJ,kBAAW,cA3IV,sBA2IsB,IAAI;;;CA3I1B,AA4IG,IAAK,kBAAa;CAClB,cAEE,YA/IJ,sBA6Ia;;QA7Id,AA8IO,GAAkC,SA9IxC,AA8Ia,CAAgB,eA9I9B,AA8ImB,MA9InB,AA8IyB;;QA9IzB,AAgJG;;QAEJ,kBAAW,WAlJV;;;CAAA,AAmJG,EAAE,YAAK;CACP,cAEE,SAtJJ,sBAoJa;;QApJd,AAqJO,EArJP,AAqJW,CAAe,SArJzB,AAqJe,CAAE;;QArJlB,AAuJG,CAAoB,SAAf,cAAO","sourcesContent":["//NOGENERATOR\r\n// Dolittle\r\nVec2=! create. \r\nVec2:initialize=[|x y|\r\n    this:x=x. this:y=y.\r\n].\r\nVec2:add=[|o|\r\n    Vec2! (x+o:x) (y+o:y) create.\r\n].\r\nVec2:sub=[|o|\r\n    Vec2! (x-o:x) (y-o:y) create.\r\n].\r\nVec2.mul=[|k|\r\n    Vec2! (k*x) (k*y) create.\r\n].\r\nVec2.div=[|k|\r\n    Vec2! (x/k) (y/k) create.\r\n].\r\nVec2:len=[\r\n    (window:Math) ! (x*x+y*y) sqrt.\r\n].\r\nVec2:dir=[\r\n    (window:Math) ! (y) (x) atan2 degree.\r\n].\r\nVec2:rotate=[|d;vx vy|\r\n    vx=Vec2 ! (d ! cos) (d ! sin) create.     \r\n    vy=Vec2 ! ((d+90) ! cos) ((d+90) ! sin) create.\r\n    vx ! (x) mul (vy ! (y) mul) add. \r\n].\r\nVec2:O=Vec2 ! 0 0 create.\r\nVec2:X=Vec2 ! 1 0 create.\r\nVec2:Y=Vec2 ! 0 1 create.\r\n\r\nShape=! create.\r\nShape:isIdentityTransform=[|dir pos| \r\n    [dir==0] ! [pos.x==0] [pos.y==0] and.\r\n].\r\nPolygon=Shape ! create.\r\nPolygon:initialize=[|v2ary|\r\n    this:v2ary=[v2ary] ! then [v2ary] else [ Array!create.] execute.\r\n].\r\nPolygon:fromPolyKArray=[|a;x y res|\r\n    res=Polygon ! create.\r\n    [a!length] ! while [\r\n        x=a! shift.\r\n        y=a! shift.\r\n        res ! (x) (y) addVertex.\r\n    ] execute.\r\n    res.\r\n].\r\n\r\nPolygon:originPoint=[\r\n    and ! [v2ary] [(v2ary! length?)>0] true then [\r\n        v2ary ! 1 get\r\n    ] execute.\r\n].\r\nPolygon:lastPoint=[\r\n    and ! [v2ary] [(v2ary! length?)>0] true then [\r\n        v2ary ! (v2ary! length?) get\r\n    ] execute.\r\n].\r\nPolygon:isPathClosed=[|;o l|\r\n    o=!originPoint.\r\n    l=!lastPoint.\r\n    and ! [o] [l] [(o ! (l) sub len)<0.1] true \r\n].\r\nPolygon:addVertex=[|x y|\r\n    v2ary! (Vec2 !(x) (y) create) push.\r\n    this.\r\n].\r\nPolygon:addPoint=Polygon:addVertex.\r\nPolygon:toPolyKArray=[|;res|\r\n    res=Array ! create.\r\n    v2ary ! [|e|\r\n        res ! (e:x) push.\r\n        res ! (e:y) push.\r\n    ] forEach.\r\n    [!isPathClosed] ! then [res ! pop. res ! pop] execute.\r\n    (window:PolyK) ! (res) FixDirection.\r\n].\r\nPolygon:transform=[|deg pos;res|\r\n    Polygon! (v2ary ! [|v|\r\n        v! (deg) rotate (pos) add.\r\n    ] map) create.\r\n].\r\nPolygon:each=[|f|\r\n    v2ary ! [|v|\r\n        f ! (v) execute.\r\n    ] forEach.\r\n].\r\nPolygon:pointCount=[\r\n    v2ary:length.\r\n].\r\nPolygon:center=[|;p|\r\n    p=Vec2:O.\r\n    ! [|v|\r\n        p = p ! (v) add.\r\n    ] each.\r\n    p ! (!pointCount) div.\r\n].\r\nPolygon:fromLine=[|pos1 pos2 width;p d l|\r\n    p=pos2!(pos1)sub.\r\n    d=p! dir.\r\n    l=p! len.\r\n    ! create \r\n    0 -(width/2) addPoint \r\n    (l) -(width/2) addPoint \r\n    (l) (width/2) addPoint\r\n    0 (width/2) addPoint (d) (pos1) transform .\r\n].\r\nPolygon:intersects= [|o|\r\n    [o ! (Polygon) is ] ! then [\r\n        (window:PolyK) ! (!toPolyKArray) (o!toPolyKArray) Intersects.\r\n    ] else [\r\n        o ! (this) intersects.\r\n    ] execute.\r\n].\r\nShapeGroup=Shape! create.\r\nShapeGroup:initialize=[\r\n    shapes=Array ! create.\r\n].\r\nShapeGroup:add=[|s|\r\n    shapes ! (s) push.\r\n].\r\nShapeGroup:intersects=[|b;res a|\r\n    a=this.\r\n    [b ! (ShapeGroup) is] ! then [\r\n        (a:shapes) ! [|ae|\r\n            (b:shapes) ! [|be|\r\n                [ae ! (be) intersects  ] !then[res=true] execute.\r\n            ] each.\r\n        ] each.\r\n    ] else [\r\n        (a:shapes) ! [|ae|\r\n            [ae ! (b) intersects] !then[res=true] execute.\r\n        ] each.\r\n    ] execute.\r\n    res\r\n].\r\nShapeGroup:transform=[|dir pos;res| \r\n    res= ShapeGroup ! create.\r\n    shapes ! [|s|\r\n        res ! (s ! (dir) (pos) transform) add.\r\n    ] forEach.\r\n    res.\r\n].\r\nShapeGroup:center=[|;p|\r\n    p=Vec2:O.\r\n    shapes ! [|s|\r\n        p = p ! (s!center) add.\r\n    ] each.\r\n    p ! (shapes:length) div.\r\n]."]}