{"version":3,"sources":["/Tonyu/Projects/Turtle/Vec2.dtl"],"names":[],"mappings":"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","sourcesContent":["// Dolittle\nVec2=! create. \nVec2:initialize=[|x y|\n    this:x=x. this:y=y.\n].\nVec2:add=[|o|\n    Vec2! (x+o:x) (y+o:y) create.\n].\nVec2:sub=[|o|\n    Vec2! (x-o:x) (y-o:y) create.\n].\nVec2.mul=[|k|\n    Vec2! (k*x) (k*y) create.\n].\nVec2.div=[|k|\n    Vec2! (x/k) (y/k) create.\n].\nVec2:len=[\n    (window:Math) ! (x*x+y*y) sqrt.\n].\nVec2:dir=[\n    (window:Math) ! (y) (x) atan2 degree.\n].\nVec2:rotate=[|d;vx vy|\n    vx=Vec2 ! (d ! cos) (d ! sin) create.     \n    vy=Vec2 ! ((d+90) ! cos) ((d+90) ! sin) create.\n    vx ! (x) mul (vy ! (y) mul) add. \n].\nVec2:O=Vec2 ! 0 0 create.\nVec2:X=Vec2 ! 1 0 create.\nVec2:Y=Vec2 ! 0 1 create.\n\nShape=! create.\nShape:isIdentityTransform=[|dir pos| \n    [dir==0] ! [pos.x==0] [pos.y==0] and.\n].\nPolygon=Shape ! create.\nPolygon:initialize=[|v2ary|\n    this:v2ary=[v2ary] ! then [v2ary] else [ Array!create.] execute.\n].\nPolygon:fromPolyKArray=[|a;x y res|\n    res=Polygon ! create.\n    [a!length] ! while [\n        x=a! shift.\n        y=a! shift.\n        res ! (x) (y) addVertex.\n    ] execute.\n    res.\n].\n\nPolygon:addVertex=[|x y|\n    v2ary! (Vec2 !(x) (y) create) push.\n    this.\n].\nPolygon:addPoint=Polygon:addVertex.\nPolygon:toPolyKArray=[|;res|\n    res=Array ! create.\n    v2ary ! [|e|\n        res ! (e:x) push.\n        res ! (e:y) push.\n    ] forEach.\n    (window:PolyK) ! (res) FixDirection.\n].\nPolygon:transform=[|deg pos;res|\n    Polygon! (v2ary ! [|v|\n        v! (deg) rotate (pos) add.\n    ] map) create.\n].\nPolygon:each=[|f|\n    v2ary ! [|v|\n        f ! (v) execute.\n    ] forEach.\n].\nPolygon:pointCount=[\n    v2ary:length.\n].\nPolygon:center=[|;p|\n    p=Vec2:O.\n    ! [|v|\n        p = p ! (v) add.\n    ] each.\n    p ! (!pointCount) div.\n].\nPolygon:fromLine=[|pos1 pos2 width;p d l|\n    p=pos2!(pos1)sub.\n    d=p! dir.\n    l=p! len.\n    ! create \n    0 -(width/2) addPoint \n    (l) -(width/2) addPoint \n    (l) (width/2) addPoint\n    0 (width/2) addPoint (d) (pos1) transform .\n].\nPolygon:intersects= [|o|\n    [o ! (Polygon) is ] ! then [\n        (window:PolyK) ! (!toPolyKArray) (o!toPolyKArray) Intersects.\n    ] else [\n        o ! (this) intersects.\n    ] execute.\n].\nShapeGroup=Shape! create.\nShapeGroup:initialize=[\n    shapes=Array ! create.\n].\nShapeGroup:add=[|s|\n    shapes ! (s) push.\n].\nShapeGroup:intersects=[|b;res a|\n    a=this.\n    [b ! (ShapeGroup) is] ! then [\n        (a:shapes) ! [|ae|\n            (b:shapes) ! [|be|\n                [ae ! (be) intersects  ] !then[res=true] execute.\n            ] each.\n        ] each.\n    ] else [\n        (a:shapes) ! [|ae|\n            [ae ! (b) intersects] !then[res=true] execute.\n        ] each.\n    ] execute.\n    res\n].\nShapeGroup:transform=[|dir pos;res| \n    res= ShapeGroup ! create.\n    shapes ! [|s|\n        res ! (s ! (dir) (pos) transform) add.\n    ] forEach.\n    res.\n].\nShapeGroup:center=[|;p|\n    p=Vec2:O.\n    shapes ! [|s|\n        p = p ! (s!center) add.\n    ] each.\n    p ! (shapes:length) div.\n]."]}