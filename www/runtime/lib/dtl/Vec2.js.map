{"version":3,"sources":["/home/0123/dolittle/Turtle/Vec2.dtl"],"names":[],"mappings":"aACC;CACA,YAAK,eAFJ,sBAEiB,EAAE;;CAFnB,IAGQ,MAHR,AAGU;QAHV,IAGkB,MAHlB,AAGoB;;CAErB,YAAK,QALJ,sBAKU;;QACP,yBAAO,UANV,AAMY,CAAE,UAAI,UANlB,AAMoB,CAAE;;CAEvB,YAAK,QARJ,sBAQU;;QACP,yBAAO,UATV,AASY,CAAE,UAAI,UATlB,AASoB,CAAE;;CAEvB;CAAK,YAXJ,sBAWU;;QACP,yBAZH,AAYU,EAAE,cAZZ,AAYgB,EAAE;;CAEnB;CAAK,YAdJ,sBAcU;;QACP,yBAAO,UAfV,AAeY,MAAI,UAfhB,AAekB;;CAEnB,YAAK,QAjBJ;;SAkBI,cAAO,qBAAS,UAAE,YAAE,UAAE;;CAE3B,YAAK,QApBJ;;SAqBI,cAAO,oBAAS,YAAI;;CAEzB,YAAK,WAvBJ,sBAuBa;;;;CAvBb,AAwBG,GAAG,wBAxBN,AAwBc,aAxBd,AAwBwB;CAxBxB,AAyBG,GAAG,0BAzBN,AAyBe,EApBJ,oBALX,AAyB8B,EApBnB;QALX,AA0BG,WAAM,oBA1BT,AA0BiB,WAAM;;CAExB,YAAK,MAAE,uBA5BP,IAAA;CA6BA,YAAK,MAAE,uBA7BN,IAAD;CA8BA,YAAK,MAAE,uBA9BP,IAAC;CAgCD;CACA,aAAM,wBAjCL,sBAiC2B,IAAI;;QAjC9B;;SAAD,AAkCI,MAlCL;WAAE;;CAAD,AAkCe;SAAI,YAlCpB;IAAE;;CAAD,AAkC0B;SAAI,YAlC/B;;;CAoCA,gBAAQ;CACR,eAAQ,eArCP,sBAqCoB;;QArCpB,IAsCQ,UAtCP;;QAAD,AAsCe;sBAtCd;;QAAD,AAsC8B;gBAtC7B;;QAsC2C;;;CAE7C,eAAQ,mBAxCP,sBAwCwB;;;;;CAxCxB,AAyCG,IAAI;CAzCN;;QAAD,AA0CI;0BA1CH;;CAAD,AA2CO,EA3CP,AA2CS;CA3CT,AA4CO,EA5CP,AA4CS;QA5CT,AA6CO,kBA7CP,AA6Cc,IA7Cd,AA6CkB;;QA7ClB,AA+CG;;CAGJ,eAAQ,gBAlDP;;QAmDG,oBAnDF;;QAmDS;IAnDT;;UAmDkB,4BAnDpB;0BAAE;;QAoDM,qBApDP;;;CAuDD,eAAQ,cAvDP;;QAwDG,oBAxDF;;QAwDS;IAxDT;;UAwDkB,4BAxDpB;0BAAE;;QAyDM,sBAAS;;;CAGjB,eAAQ,iBA5DP;;;;CAAA,AA6DG;CA7DH,AA8DG;QACA,oBA/DF;;QAAD,AA+DU;IA/DT;;QAAD,AA+Dc;IA/Db;;UAAD,AA+DmB,UA/DnB,AA+DwB,cA/DxB;;;CAiEB,eAAQ,cAjEP,sBAiEmB,EAAE;;CAClB,uBAAQ,wBAlEX,AAkEkB,IAlElB,AAkEsB;QAlEtB;;CAqED,eAAQ,aAAS,eAAQ;CACzB,eAAQ,iBAtEP;;;CAAA,AAuEG,IAAI;CACJ,yBAxEF,sBAwEY;;CAxEb,AAyEO,aAzEN,AAyEa,CAAE;QAzEhB,AA0EO,aA1EN,AA0Ea,CAAE;;CA1Ef;;;yBAAA;;CAAD,AA4E2B;QA5E3B,AA4EsC;;SAClC,cAAO,4BA7EX,AA6EqB;;CAEtB,eAAQ,cA/EP,sBA+EmB,IAAI;;;QACpB,2BAAU,qBAhFZ,sBAgFsB;;QAhFtB,AAiFM,aAjFP,AAiFW,cAjFX,AAiFwB;;;CAGzB,eAAQ,SApFP,sBAoFc;;QACX,yBArFF,sBAqFY;;QArFb,AAsFO,cAtFN,AAsFW;;;CAGb,eAAQ,eAzFP;;QA0FG,aAAM;;CAEV,eAAQ,WA5FP;;;CAAA,AA6FG,EAAE,YAAK;cA7FT,sBA8FM;;QA9FP,AA+FO,EA/FP,AA+FW,UA/FV,AA+Fe;;QA/FhB,AAiGG;;CAEJ,eAAQ,aAnGP,sBAmGkB,KAAK,KAAK;;;;;CAnG5B,AAoGG,EApGH,AAoGK,aApGL,AAoGW;CApGX,AAqGG,EArGH,AAqGK;CArGL,AAsGG,EAtGH,AAsGK;qCAtGN,OAAC,AAwGO,MAxGN,oBAAD,AAyGI,MAzGJ,AAyGS,MAzGR,oBAAD,AA0GI,KA1GJ,AA0GQ,MA1GP,mBAAF,MAAC,AA2GM,MA3GL,qBAAD,AA2GyB,IA3GzB,AA2G6B;;CAE9B,eAAQ,eA7GP,sBA6GqB;;QA7GpB;;QAAD,AA8GI,SAAK;sBA9GR;;SA+GO,cAAO,mDA/Gf,AA+GyC;gBA/GxC;;QAAD,AAiHO,iBAjHN;;;CAoHF,mBAAW;CACX,kBAAW,eArHV;;QAsHG,eAAO;;CAEX,kBAAW,QAxHV,sBAwHgB;;QACb,wBAzHH,AAyHa;;CAEd,kBAAW,eA3HV,sBA2HuB;;;;CA3HvB,AA4HG,EA5HH;CAAC;;QAAD,AA6HI,SAAK;sBA7HR;;SAAD,AA8HQ,CAAE,oBA9HR,sBA8HoB;;SA9HtB,AA+HY,CAAE,oBA/HX,sBA+HuB;;QA/HtB;;QAAF,AAgIc,kBAhIb,AAgImB;yBAhIlB;;QAAJ,AAgI8C,IAAI;;;;gBAhIjD;;SAAD,AAoIQ,CAAE,oBApIR,sBAoIoB;;QApInB;;QAAD,AAqIU,kBArIZ,AAqIkB;yBArIf;;QAAH,AAqIuC,IAAI;;;;QArI3C,AAwIG;;CAEJ,kBAAW,cA1IV,sBA0IsB,IAAI;;;CA1I1B,AA2IG,IAAK;CACL,0BA5IF,sBA4Ia;;QA5Id,AA6IO,YA7IN,AA6Ia,gBA7Id,AA6ImB,MA7InB,AA6IyB;;QA7IzB,AA+IG;;QAEJ,kBAAW,WAjJV;;;CAAA,AAkJG,EAAE,YAAK;CACP,uBAnJF,sBAmJa;;QAnJd,AAoJO,EApJP,AAoJW,UApJV,AAoJe;;QApJhB,AAsJG,UAAK,cAAO","sourcesContent":["// Dolittle\nVec2=! create. \nVec2:initialize=[|x y|\n    this:x=x. this:y=y.\n].\nVec2:add=[|o|\n    Vec2! (x+o:x) (y+o:y) create.\n].\nVec2:sub=[|o|\n    Vec2! (x-o:x) (y-o:y) create.\n].\nVec2.mul=[|k|\n    Vec2! (k*x) (k*y) create.\n].\nVec2.div=[|k|\n    Vec2! (x/k) (y/k) create.\n].\nVec2:len=[\n    (window:Math) ! (x*x+y*y) sqrt.\n].\nVec2:dir=[\n    (window:Math) ! (y) (x) atan2 degree.\n].\nVec2:rotate=[|d;vx vy|\n    vx=Vec2 ! (d ! cos) (d ! sin) create.     \n    vy=Vec2 ! ((d+90) ! cos) ((d+90) ! sin) create.\n    vx ! (x) mul (vy ! (y) mul) add. \n].\nVec2:O=Vec2 ! 0 0 create.\nVec2:X=Vec2 ! 1 0 create.\nVec2:Y=Vec2 ! 0 1 create.\n\nShape=! create.\nShape:isIdentityTransform=[|dir pos| \n    [dir==0] ! [pos.x==0] [pos.y==0] and.\n].\nPolygon=Shape ! create.\nPolygon:initialize=[|v2ary|\n    this:v2ary=[v2ary] ! then [v2ary] else [ Array!create.] execute.\n].\nPolygon:fromPolyKArray=[|a;x y res|\n    res=Polygon ! create.\n    [a!length] ! while [\n        x=a! shift.\n        y=a! shift.\n        res ! (x) (y) addVertex.\n    ] execute.\n    res.\n].\n\nPolygon:originPoint=[\n    and ! [v2ary] [(v2ary! length?)>0] true then [\n        v2ary ! 1 get\n    ] execute.\n].\nPolygon:lastPoint=[\n    and ! [v2ary] [(v2ary! length?)>0] true then [\n        v2ary ! (v2ary! length?) get\n    ] execute.\n].\nPolygon:isPathClosed=[|;o l|\n    o=!originPoint.\n    l=!lastPoint.\n    and ! [o] [l] [(o ! (l) sub len)<0.1] true \n].\nPolygon:addVertex=[|x y|\n    v2ary! (Vec2 !(x) (y) create) push.\n    this.\n].\nPolygon:addPoint=Polygon:addVertex.\nPolygon:toPolyKArray=[|;res|\n    res=Array ! create.\n    v2ary ! [|e|\n        res ! (e:x) push.\n        res ! (e:y) push.\n    ] forEach.\n    [!isPathClosed] ! then [res ! pop. res ! pop] execute.\n    (window:PolyK) ! (res) FixDirection.\n].\nPolygon:transform=[|deg pos;res|\n    Polygon! (v2ary ! [|v|\n        v! (deg) rotate (pos) add.\n    ] map) create.\n].\nPolygon:each=[|f|\n    v2ary ! [|v|\n        f ! (v) execute.\n    ] forEach.\n].\nPolygon:pointCount=[\n    v2ary:length.\n].\nPolygon:center=[|;p|\n    p=Vec2:O.\n    ! [|v|\n        p = p ! (v) add.\n    ] each.\n    p ! (!pointCount) div.\n].\nPolygon:fromLine=[|pos1 pos2 width;p d l|\n    p=pos2!(pos1)sub.\n    d=p! dir.\n    l=p! len.\n    ! create \n    0 -(width/2) addPoint \n    (l) -(width/2) addPoint \n    (l) (width/2) addPoint\n    0 (width/2) addPoint (d) (pos1) transform .\n].\nPolygon:intersects= [|o|\n    [o ! (Polygon) is ] ! then [\n        (window:PolyK) ! (!toPolyKArray) (o!toPolyKArray) Intersects.\n    ] else [\n        o ! (this) intersects.\n    ] execute.\n].\nShapeGroup=Shape! create.\nShapeGroup:initialize=[\n    shapes=Array ! create.\n].\nShapeGroup:add=[|s|\n    shapes ! (s) push.\n].\nShapeGroup:intersects=[|b;res a|\n    a=this.\n    [b ! (ShapeGroup) is] ! then [\n        (a:shapes) ! [|ae|\n            (b:shapes) ! [|be|\n                [ae ! (be) intersects  ] !then[res=true] execute.\n            ] each.\n        ] each.\n    ] else [\n        (a:shapes) ! [|ae|\n            [ae ! (b) intersects] !then[res=true] execute.\n        ] each.\n    ] execute.\n    res\n].\nShapeGroup:transform=[|dir pos;res| \n    res= ShapeGroup ! create.\n    shapes ! [|s|\n        res ! (s ! (dir) (pos) transform) add.\n    ] forEach.\n    res.\n].\nShapeGroup:center=[|;p|\n    p=Vec2:O.\n    shapes ! [|s|\n        p = p ! (s!center) add.\n    ] each.\n    p ! (shapes:length) div.\n]."]}