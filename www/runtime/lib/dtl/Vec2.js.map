{"version":3,"sources":["/Tonyu/Projects/Turtle/Vec2.dtl"],"names":[],"mappings":"4BACQ;4CACW,EAAE;;CAChB,OAAO;QAAG,OAAO;;qCAEV;;kBACe,gBAAb,eAAQ;;qCAEV;;kBACe,gBAAb,eAAQ;;;gCAEV;;kBACW,SAAX,aAAM;;;gCAEN;;kBACW,gBAAT,aAAM;;;;2BAGW;;;;2BAGF,yBAAM;;wCAEpB;;;;CACV,aAA8B,QAAnB,EAAI,QAAM,EAAI;CACzB,aAAwC,UAA5B,SAAQ,UAAO,SAAQ;QACnC,GAAS,cAAmB,KAAd,GAAS;;uBAET;uBACA;uBACA;iBAEV;sDACoB,IAAI;;;;SAC3B;IAAgC;;CAArB;;;;CAAW;;;;yBAEX;+CACK;;QACjB;;QAAY;IAAS,OAAa;;QAAP;KAA6B;;mBAAT;;;mDAE1B;;;;;CACrB,iBAAc;;;QACb,EAAE;IAAU,QAIX;;CAHE,EAAE,EAAG;CACL,EAAE,EAAG;QACL,IAAc,WAAP,IAAI;;QAEf;;8CAGgB,EAAE;;YACY,gBAAR,QAAP,IAAI;QACnB;;;;;;CAIA,eAAY;YAIV,8BAHQ;;CACN,IAAY,MAAL;QACP,IAAY,MAAL;;4BAEY,cAAL;;8CAEF,IAAI;;;qBAGb,mBAAL,0BAFkB;;QAChB,EAAS,QAAL,MAAkB,KAAL;;;yCAGV;;mBAGT,8BAFQ;;QACN,EAAQ,SAAH;;;;;;;;;;CAOT;MAGE,2BAFE;;QACA,EAAI,EAAQ,KAAH;;QAEb,EAAkB,UAAZ;;6CAES,KAAK,KAAK;;;;;CACzB,EAAE,KAAW,KAAL;CACR,EAAE,EAAG;CACL,EAAE,EAAG;aACH,SACW,gBAAT,aACW,UAAd,MAAK,aACQ,UAAb,KAAI,aACO,eAAT,aAA6B,WAAV,IAAI;;+CAER;;;;QACjB,EAAc;IAAO,OAEpB;;4BADoD,iBAA/B,iBAAe,EAAE;KAGtC;;QADE,EAAW,YAAN;;;4BAGK;;;+BAEC;;2CAEF;;oBACA,MAAH;;kDAEU;;;;CACpB,EAAE;;;QACD,EAAiB;IAAM,OAMtB;;SALG,UAIC,2BAJa;;SACV,UAEC,2BAFa;;;;QACV,GAAU,YAAJ;IAAmB,OAAe;;QAAV;;;;KAOzC;;SAHG,UAEC,2BAFa;;;;QACV,GAAS,YAAH;IAAgB,OAAe;;QAAV;;;;QAGpC;;iDAEmB,IAAI;;;CACvB,oBAAkB;aAGhB,8BAFS;;QACP,IAAkC,KAA3B,EAAgB,WAAX,MAAM;;QAEtB;;;;;CAGA;aAGE,2BAFS;;QACP,EAAI,EAAe,KAAV,EAAE;;QAEf,EAAoB","sourcesContent":["// Dolittle\nVec2=! create. \nVec2:initialize=[|x y|\n    this:x=x. this:y=y.\n].\nVec2:add=[|o|\n    Vec2! (x+o:x) (y+o:y) create.\n].\nVec2:sub=[|o|\n    Vec2! (x-o:x) (y-o:y) create.\n].\nVec2.mul=[|k|\n    Vec2! (k*x) (k*y) create.\n].\nVec2.div=[|k|\n    Vec2! (x/k) (y/k) create.\n].\nVec2:len=[\n    (window:Math) ! (x*x+y*y) sqrt.\n].\nVec2:dir=[\n    (window:Math) ! (y) (x) atan2 degree.\n].\nVec2:rotate=[|d;vx vy|\n    vx=Vec2 ! (d ! cos) (d ! sin) create.     \n    vy=Vec2 ! ((d+90) ! cos) ((d+90) ! sin) create.\n    vx ! (x) mul (vy ! (y) mul) add. \n].\nVec2:O=Vec2 ! 0 0 create.\nVec2:X=Vec2 ! 1 0 create.\nVec2:Y=Vec2 ! 0 1 create.\n\nShape=! create.\nShape:isIdentityTransform=[|dir pos| \n    [dir==0] ! [pos.x==0] [pos.y==0] and.\n].\nPolygon=Shape ! create.\nPolygon:initialize=[|v2ary|\n    this:v2ary=[v2ary] ! then [v2ary] else [ Array!create.] execute.\n].\nPolygon:fromPolyKArray=[|a;x y res|\n    res=Polygon ! create.\n    [a!length] ! while [\n        x=a! shift.\n        y=a! shift.\n        res ! (x) (y) addVertex.\n    ] execute.\n    res.\n].\n\nPolygon:addVertex=[|x y|\n    v2ary! (Vec2 !(x) (y) create) push.\n    this.\n].\nPolygon:addPoint=Polygon:addVertex.\nPolygon:toPolyKArray=[|;res|\n    res=Array ! create.\n    v2ary ! [|e|\n        res ! (e:x) push.\n        res ! (e:y) push.\n    ] forEach.\n    (window:PolyK) ! (res) FixDirection.\n].\nPolygon:transform=[|deg pos;res|\n    Polygon! (v2ary ! [|v|\n        v! (deg) rotate (pos) add.\n    ] map) create.\n].\nPolygon:each=[|f|\n    v2ary ! [|v|\n        f ! (v) execute.\n    ] forEach.\n].\nPolygon:pointCount=[\n    v2ary:length.\n].\nPolygon:center=[|;p|\n    p=Vec2:O.\n    ! [|v|\n        p = p ! (v) add.\n    ] each.\n    p ! (!pointCount) div.\n].\nPolygon:fromLine=[|pos1 pos2 width;p d l|\n    p=pos2!(pos1)sub.\n    d=p! dir.\n    l=p! len.\n    ! create \n    0 -(width/2) addPoint \n    (l) -(width/2) addPoint \n    (l) (width/2) addPoint\n    0 (width/2) addPoint (d) (pos1) transform .\n].\nPolygon:intersects= [|o|\n    [o ! (Polygon) is ] ! then [\n        (window:PolyK) ! (!toPolyKArray) (o!toPolyKArray) Intersects.\n    ] else [\n        o ! (this) intersects.\n    ] execute.\n].\nShapeGroup=Shape! create.\nShapeGroup:initialize=[\n    shapes=Array ! create.\n].\nShapeGroup:add=[|s|\n    shapes ! (s) push.\n].\nShapeGroup:intersects=[|b;res a|\n    a=this.\n    [b ! (ShapeGroup) is] ! then [\n        (a:shapes) ! [|ae|\n            (b:shapes) ! [|be|\n                [ae ! (be) intersects  ] !then[res=true] execute.\n            ] each.\n        ] each.\n    ] else [\n        (a:shapes) ! [|ae|\n            [ae ! (b) intersects] !then[res=true] execute.\n        ] each.\n    ] execute.\n    res\n].\nShapeGroup:transform=[|dir pos;res| \n    res= ShapeGroup ! create.\n    shapes ! [|s|\n        res ! (s ! (dir) (pos) transform) add.\n    ] forEach.\n    res.\n].\nShapeGroup:center=[|;p|\n    p=Vec2:O.\n    shapes ! [|s|\n        p = p ! (s!center) add.\n    ] each.\n    p ! (shapes:length) div.\n]."]}