{"version":3,"sources":["/home/devel/devel/Turtle/Raspi.dtl"],"names":[],"mappings":"wEACC,iDAAS;CACT,aAAM,YADN;;;;;0IAAC;;oDAEI;mBAAM,YAAQ,SAFlB;;yEAYK,YAZL;;6CAAD,AAGQ,IAAI,cAAQ;CAHpB,AAIQ,QAJR,AAIe,EAAG;gCACV,cAAqC,gBAL7C,AAKmB;gCACX,cAAkC,gBAN1C,AAMmB;CACX,0CAAG,cAA6B,SAAnB,cAAQ;gCAErB,UAAG;2CAEgB;;QAX3B;;CAeA,aAAM,SAfN,sBAea;;mFACT,UAAc,YAhBlB,AAgBU;;CAEV,aAAM,YAlBN,sBAkBgB,KAAK;;gFACf;2CAC4C,iCApBlD,AAoB4B;;CAE5B,aAAM,uBAtBH,OA4DF;CAAA,aAAA,mBAAA;;;;6CAAA,qCAAA,YAAA;CAAA,SAAA,EAAA;UAAA,QAAA,QAAA,UAAA;;CAAA,aAAA,aAAA,sBAAA,KAAA;;;gFAAA;CAAA,uBAAA,mCAAA;2CAAA,UAAA;;QAAA,aAAA,QAAA,sBAAA;;uFAAA,aAAA,MAAA","sourcesContent":["\nRaspi= ! create.\nRaspi:connect=[|;ba ppath rr|\n    [rp] ! then [] else [\n        ba=(window: BitArrow).\n        ppath=(ba:runtimePath)+\"lib/python/\".\n        system ! ( ppath+\"SerialControl.js\") getScript.\n        system ! ( ppath+\"raspi_repl.js\") getScript.\n        rp=system ! (window: RaspiREPL) new. \n        //label ! \"READY1\" create.\n        rp!waitReady.\n        //label ! \"READY2\" create.\n        ! \"import machine\" exec.\n    ] execute.\n    self.\n].\nRaspi:exec=[|script|\n    rp ! (script) runCmd.\n].\nRaspi:readADC=[|port bytes|\n    ! connect.\n    ! (\"print(machine.ADC(\"+port+\").read_u16())\") exec.\n].\nRaspi:conversion_factor = 3.3 / (65535).\nRaspi:getTemperature=[|;t reading|\n    t= ! 4 readADC.\n    reading = t * conversion_factor.\n    (27 - (reading - 0.706)/0.001721).\n].\nRaspi:writePin=[|port value;scr|\n    ! connect.\n    scr=\"machine.Pin(\"+port+\", machine.Pin.OUT).value(\"+value+\")\".\n    //debug !(scr) write.\n    ! (scr) exec.\n].\nRaspi:led=[|value|\n    ! 25 (value) writePin.\n].\n\n/*\nsystem:jq2promise=[|jq|\n    DtlPromise ! [|succ err|\n        jq ! [|res| succ ! (res) execute] [|e| err !(e)execute] then. \n    ] new.\n].\nsystem:getScript=[|url|\n    ! ( (window:$) ! (url) getScript ) jq2promise\n].\nra=Raspi! create connect.\nka=turtle ! 0 create.\nka:x=0.\ndebug=label ! create.\n//ra! 1 led.\n\ntimer ! create  30 duration [\n    ka ! (ka:x) ( (ra! getTemperature)*3 ) moveTo.\n    ka:x=ka:x+1.\n    r=ra ! ( ka:x % 2) led.\n    debug!(r) write.\n] execute.\n*/"]}