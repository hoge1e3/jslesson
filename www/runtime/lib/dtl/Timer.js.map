{"version":3,"sources":["/home/0123/dolittle/Turtle/Timer.dtl"],"names":[],"mappings":"aACC;CACA,gBAAS,SAAK;CACd,gBAAS,SAHR;;CAAA,IAIQ,iBAJP,sBAIc;;QAJd,AAIgB;;QAJjB;;CAQD;CACA,aAAM,MALoB;CAM1B,aAAM,MANoB;CAO1B,aAAM,aAXL,sBAWgB;;CAXf;;SAAD,AAYI,GAZJ;UAAC;;QAAD,AAYe,EAZf;;CAAA,IAaQ,OAbR,AAaU,EA6Be;QA1CzB;;CAgBD,aAAM,UAhBL,sBAgBa;;CAhBb,IAgBoB,MAhBpB,AAgBsB;QAhBtB;;CAiBD,aAAM,aAjBL,sBAiBgB;;CAjBhB,IAiBuB,QAjBvB,AAiByB,EAyBA,QA1CzB,IAiBqC;QAjBrC;;CAkBD,aAAM,MAAG,uBAAS,cAAO,KAAE;CAC3B,aAAM,SAnBL;;;CAoBD,aAAM,UApBL;;;CAqBD;CACA,aAAM,YAtBL,sBAsBe;;;;;;CAtBf,AAuBG,EAvBH;CAAA,AAwBG,EAxBH,AAwBK,CAAE;CAxBP,AAyBG,EAzBH,AAyBK,CAAE;CAzBP,AA0BG,EA1BH;CA2BI,gBAAS,iBA3Bb,AA2BmB;CA3BnB,AA4BG,CAAE,MA5BL,AA4BO,CAAE,cA5BR;;;CAAD,AA6BO,CAAE,UA7BP;;QA6Be,iCA7BjB,AA6ByB,CAAE;;CA7B3B,AA8BO,CAAE,SA9BP;;CA8Bc,iCA9BhB,AA8BwB,CAAE;QA9BzB,AA8B0C;;CA9B1C,AA+BM,EAAG,uBAAS,cAAO,KAAE;CA/B5B,AAgCO,CAAE,QAAK,+BAhCZ;;CAAC;;QAAH,AAiCY,cAjCZ,AAiCe;sBAjCZ,sBAiC6B;;CAjChC,AAkCe;QACA,uCAnCZ,AAmCkC;;CAnCrC,AAsCW,GAtCX,AAsCa,EAtCb;QAAG;;SAAH,AAuCY,EAvCZ,AAuCc;yBAvCX;;QAAH,AAwCe;;KAxCf,AA0CU;QA1CT,AA2CM;;QA3CP;;CA+CD,aAAM,iBAAa,aAAM;QACzB,aAAM,kBAhDL,sBAgDqB;;CAhDrB,IAiDQ,cAjDP;;QAAD,AAiDW;;QAjDX","sourcesContent":["// Dolittle\nalltimer=!create.\nalltimer:list=Array!create.\nalltimer:stop=[\n    self:list![|i|i!stop.]each.\n    self.\n].\n\nTimer=!create.\nTimer:i=100.\nTimer:t=100.\nTimer:interval=[|i|\n    [i>=0.001]![i=0.001]or.\n    self:i=i*1000.\n    self\n].\nTimer:times=[|t|self:t=t.self].\nTimer:duration=[|t|self:t=t*1000/self:i.self].\nTimer:d=:system!(:window:$:Deferred)new resolve.\nTimer:skip=[].\nTimer:abort=[].\nTimer ! \"abort\" \"stop\" addAlias.\nTimer:execute=[|f;s t i c|\n    s=self.\n    t=s:t.\n    i=s:i.\n    c=1.\n    :alltimer:list!(s)add.\n    s:d=s:d![|;d|\n        s:abort=[:window!(s:id)clearInterval].\n        s:skip=[:window!(s:id)clearInterval.d!resolve].\n        d=:system!(:window:$:Deferred)new.\n        s:id=(:window)![\n            [f!(c)execute.]!try[|e|\n                s!abort.\n                window ! \"\" \"\" \"\" \"\" (e) onerror.\n                //:system!(e)throw.\n            ]catch.\n            c=c+1.\n            [c>t]!then[\n                s!skip.\n            ]execute.\n        ] (i) setInterval.\n        d.\n    ]then.\n    self.\n].\nTimer:next_execute=Timer:execute.\nTimer:after_execute=[|f|\n    self:d![f!execute]then.\n    self.\n]."]}