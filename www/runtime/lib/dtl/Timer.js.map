{"version":3,"sources":["/Tonyu/Projects/Turtle/Timer.dtl"],"names":[],"mappings":"aACC;CACA,gBAAS,SAAK;CACd,gBAAS,SAHR;;CAAA,AAIG,IAAK,iBAJP,sBAIc;;QAJd,AAIgB;;QAJjB,AAKG;;CAGJ;CACA,aAAM,MALoB;CAM1B,aAAM,MANoB;CAO1B,aAAM,aAXL,sBAWgB;;CAXhB,AAWkB,IAAK,OAXvB,AAWyB,EAiC1B;QAAA;;CAAA,aAAA,UAAA,sBAAA;;CAAA,IAAA,MAAA;QAAA;;CAAA,aAAA,aAAA,sBAAA;;CAAA,IAAA,QAAA,EAAA,QAAA,IAAA;QAAA;;CAAA,aAAA,MAAA,uBAAA,cAAA,KAAA;CAAA,aAAA,SAAA;;;CAAA,aAAA,YAAA,sBAAA;;;;;;CAAA,EAAA;CAAA,EAAA,CAAA;CAAA,EAAA,CAAA;CAAA,EAAA;CAAA,gBAAA,iBAAA;CAAA,CAAA,MAAA,CAAA,cAAA;;;CAAA,CAAA,SAAA;;CAAA,iCAAA,CAAA;QAAA;;CAAA,EAAA,uBAAA,cAAA,KAAA;CAAA,CAAA,QAAA,+BAAA;;CAAA;;QAAA,cAAA;sBAAA,sBAAA;;CAAA;QAAA,yBAAA;;CAAA,GAAA,EAAA;QAAA;;SAAA,EAAA;yBAAA;;CAAA;QAAA;;KAAA;QAAA;;QAAA;;QAAA,aAAA,kBAAA,sBAAA;;CAAA,IAAA,cAAA;;QAAA;;QAAA","sourcesContent":["// Dolittle\nalltimer=!create.\nalltimer:list=Array!create.\nalltimer:stop=[\n    self:list![|i|i!stop.]each.\n    self.\n].\n\nTimer=!create.\nTimer:i=100.\nTimer:t=100.\nTimer:interval=[|i|self:i=i*1000.self].\nTimer:times=[|t|self:t=t.self].\nTimer:duration=[|t|self:t=t*1000/self:i.self].\nTimer:d=:system!(:window:$:Deferred)new resolve.\nTimer:stop=[].\nTimer:execute=[|f;s t i c|\n    s=self.\n    t=s:t.\n    i=s:i.\n    c=1.\n    :alltimer:list!(s)add.\n    s:d=s:d![|;d|\n        s:stop=[:window!(s:id)clearInterval.d!resolve].\n        d=:system!(:window:$:Deferred)new.\n        s:id=(:window)![\n            [f!(c)execute.]!try[|e|\n                s!stop.\n                :system!(e)throw.\n            ]catch.\n            c=c+1.\n            [c>t]!then[\n                s!stop.\n                d!resolve.\n            ]execute.\n        ] (i) setInterval.\n        d.\n    ]then.\n    self.\n].\nTimer:after_execute=[|f|\n    self:d![f!execute]then.\n    self.\n]."]}