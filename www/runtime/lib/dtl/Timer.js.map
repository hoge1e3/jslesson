{"version":3,"sources":["/home/0123/dolittle/Turtle/Timer.dtl"],"names":[],"mappings":"aACC;CACA,gBAAS,SAAK;CACd,gBAAS,SAHR;;CAAA,IAIQ,iBAJP,sBAIc;;QAJd,AAIgB;;QAJjB;;CAQD;CACA,aAAM,MALoB;CAM1B,aAAM,MANoB;CAO1B,aAAM,aAXL,sBAWgB;;CAXf;;SAAD,AAYI,GAZJ;UAAC;;QAAD,AAYe,EAZf;;CAAA,IAaQ,OAbR,AAaU,EA8BL;QA3CL;;CAgBD,aAAM,UAhBL,sBAgBa;;CAhBb,IAgBoB,MAhBpB,AAgBsB;QAhBtB;;CAiBD,aAAM,aAjBL,sBAiBgB;;CAjBhB,IAiBuB,QAjBvB,AAiByB,EA0BpB,QA3CL,IAiBqC;QAjBrC;;CAkBD,aAAM,MAAG,uBAAS,cAAO,KAAE;CAC3B,aAAM,SAnBL;;;CAoBD,aAAM,UApBL;;;CAqBD,aAAM,YArBL,sBAqBe;;;;;;CArBf,AAsBG,EAtBH;CAAA,AAuBG,EAvBH,AAuBK,CAAE;CAvBP,AAwBG,EAxBH,AAwBK,CAAE;CAxBP,AAyBG,EAzBH;CA0BI,gBAAS,iBA1Bb,AA0BmB;CA1BnB,AA2BG,CAAE,MA3BL,AA2BO,CAAE,cA3BR;;;CAAD,AA4BO,CAAE,UA5BP;;QA4Be,iCA5BjB,AA4ByB,CAAE;;CA5B3B,AA6BO,CAAE,SA7BP;;CA6Bc,iCA7BhB,AA6BwB,CAAE;QA7BzB,AA6B0C;;CA7B1C,AA8BM,EAAG,uBAAS,cAAO,KAAE;CA9B5B,AA+BO,CAAE,QAAK,+BA/BZ;;CAAC;;QAAH,AAgCY,cAhCZ,AAgCe;sBAhCZ,sBAgC6B;;CAhChC,AAiCe;QACA,uCAlCZ,AAkCkC;;CAlCrC,AAqCW,GArCX,AAqCa,EArCb;QAAG;;SAAH,AAsCY,EAtCZ,AAsCc;yBAtCX;;CAAH,AAuCe;QAvCd,AAwCc;;KAxCf,AA0CU;QA1CT,AA2CM;;QA3CP;;CA+CD,aAAM,iBAAa,aAAM;QACzB,aAAM,kBAhDL,sBAgDqB;;CAhDrB,IAiDQ,cAjDP;;QAAD,AAiDW;;QAjDX","sourcesContent":["// Dolittle\nalltimer=!create.\nalltimer:list=Array!create.\nalltimer:stop=[\n    self:list![|i|i!stop.]each.\n    self.\n].\n\nTimer=!create.\nTimer:i=100.\nTimer:t=100.\nTimer:interval=[|i|\n    [i>=0.001]![i=0.001]or.\n    self:i=i*1000.\n    self\n].\nTimer:times=[|t|self:t=t.self].\nTimer:duration=[|t|self:t=t*1000/self:i.self].\nTimer:d=:system!(:window:$:Deferred)new resolve.\nTimer:stop=[].\nTimer:abort=[].\nTimer:execute=[|f;s t i c|\n    s=self.\n    t=s:t.\n    i=s:i.\n    c=1.\n    :alltimer:list!(s)add.\n    s:d=s:d![|;d|\n        s:abort=[:window!(s:id)clearInterval].\n        s:stop=[:window!(s:id)clearInterval.d!resolve].\n        d=:system!(:window:$:Deferred)new.\n        s:id=(:window)![\n            [f!(c)execute.]!try[|e|\n                s!stop.\n                window ! \"\" \"\" \"\" \"\" (e) onerror.\n                //:system!(e)throw.\n            ]catch.\n            c=c+1.\n            [c>t]!then[\n                s!stop.\n                d!resolve.\n            ]execute.\n        ] (i) setInterval.\n        d.\n    ]then.\n    self.\n].\nTimer:next_execute=Timer:execute.\nTimer:after_execute=[|f|\n    self:d![f!execute]then.\n    self.\n]."]}