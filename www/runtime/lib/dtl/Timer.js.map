{"version":3,"sources":["/Tonyu/Projects/Turtle/Timer.dtl"],"names":[],"mappings":"aACC;CACA,gBAAS,SAAK;CACd,gBAAS,SAHR;;CAAA,IAIQ,iBAJP,sBAIc;;QAJd,AAIgB;;QAJjB;;CAQD;CACA,aAAM,MALoB;CAM1B,aAAM,MANoB;CAO1B,aAAM,aAXL,sBAWgB;;CAXhB,IAWuB,OAXvB,AAWyB,EAgCZ;QA3Cb;;CAYD,aAAM,UAZL,sBAYa;;CAZb,IAYoB,MAZpB,AAYsB;QAZtB;;CAaD,aAAM,aAbL,sBAagB;;CAbhB,IAauB,QAbvB,AAayB,EA8BZ,QA3Cb,IAaqC;QAbrC;;CAcD,aAAM,MAAG,uBAAS,cAAO,KAAE;CAC3B,aAAM,SAfL;;;CAgBD,aAAM,YAhBL,sBAgBe;;;;;;CAhBf,AAiBG,EAjBH;CAAA,AAkBG,EAlBH,AAkBK,CAAE;CAlBP,AAmBG,EAnBH,AAmBK,CAAE;CAnBP,AAoBG,EApBH;CAqBI,gBAAS,iBArBb,AAqBmB;CArBnB,AAsBG,CAAE,MAtBL,AAsBO,CAAE,cAtBR;;;CAAD,AAuBO,CAAE,SAvBP;;CAuBc,iCAvBhB,AAuBwB,CAAE;QAvBzB,AAuB0C;;CAvB1C,AAwBM,EAAG,uBAAS,cAAO,KAAE;CAxB5B,AAyBO,CAAE,QAAK,+BAzBZ;;CAAC;;QAAH,AA0BY,cA1BZ,AA0Be;sBA1BZ,sBA0B6B;;CA1BhC,AA2Be;QACA,uCA5BZ,AA4BkC;;CA5BrC,AA+BW,GA/BX,AA+Ba,EA/Bb;QAAG;;SAAH,AAgCY,EAhCZ,AAgCc;yBAhCX;;CAAH,AAiCe;QAjCd,AAkCc;;KAlCf,AAoCU;QApCT,AAqCM;;QArCP;;CAyCD,aAAM,iBAAa,aAAM;QACzB,aAAM,kBA1CL,sBA0CqB;;CA1CrB,IA2CQ,cA3CP;;QAAD,AA2CW;;QA3CX","sourcesContent":["// Dolittle\nalltimer=!create.\nalltimer:list=Array!create.\nalltimer:stop=[\n    self:list![|i|i!stop.]each.\n    self.\n].\n\nTimer=!create.\nTimer:i=100.\nTimer:t=100.\nTimer:interval=[|i|self:i=i*1000.self].\nTimer:times=[|t|self:t=t.self].\nTimer:duration=[|t|self:t=t*1000/self:i.self].\nTimer:d=:system!(:window:$:Deferred)new resolve.\nTimer:stop=[].\nTimer:execute=[|f;s t i c|\n    s=self.\n    t=s:t.\n    i=s:i.\n    c=1.\n    :alltimer:list!(s)add.\n    s:d=s:d![|;d|\n        s:stop=[:window!(s:id)clearInterval.d!resolve].\n        d=:system!(:window:$:Deferred)new.\n        s:id=(:window)![\n            [f!(c)execute.]!try[|e|\n                s!stop.\n                window ! \"\" \"\" \"\" \"\" (e) onerror.\n                //:system!(e)throw.\n            ]catch.\n            c=c+1.\n            [c>t]!then[\n                s!stop.\n                d!resolve.\n            ]execute.\n        ] (i) setInterval.\n        d.\n    ]then.\n    self.\n].\nTimer:next_execute=Timer:execute.\nTimer:after_execute=[|f|\n    self:d![f!execute]then.\n    self.\n]."]}