{"version":3,"sources":["/home/tuat17jikken/naga@piyo.com/graphtest/Test.tonyu","/home/tuat17jikken/naga@piyo.com/graphtest/Plot.tonyu","/home/tuat17jikken/naga@piyo.com/graphtest/Sca.tonyu"],"names":[],"mappings":"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","sourcesContent":["p=new Plot(\"s\");\r\nvar src=[];\r\nfor(var i=-10;i<10;i+=0.1){\r\n    var x=i;\r\n    var y=2*x*x-10;\r\n    var tmpObj={\"x\":x,\"y\":y};\r\n    src.push(tmpObj);\r\n}\r\np.setRange([-10,10],[-10,10]);\r\np.lineChart(src,\"x\",\"y\");\r\n\r\n","native window;\r\n\r\nfunction new(div){\r\n    this._place=div;\r\n    this._xaxname=\"\";\r\n    this._yaxname=\"\";\r\n    this._xrange;\r\n    this._yrange;\r\n    this._isDrawCor=false;\r\n    this._corObj={};\r\n}\r\nfunction setCorrelation(src,x,y,min,max,interval){\r\n    if((min>max && interval>0) || (min<=max && interval<0) || interval==0){\r\n        return;\r\n    }\r\n    this._corObj=_correlation(src,x,y,min,max,interval);\r\n    this._isDrawCor=true;\r\n}\r\nfunction setAxisText(x,y){\r\n    this._xaxname=x;\r\n    this._yaxname=y;\r\n}\r\nfunction setRange(x,y){\r\n    this._xrange=x;\r\n    this._yrange=y;\r\n}\r\nfunction lineChart(src,xaxis,yaxis){\r\n    _drawGraph(src,\"line\",xaxis,yaxis);\r\n}\r\nfunction barChart(src,xaxis,yaxis){\r\n    _drawGraph(src,\"bar\",xaxis,yaxis);\r\n}\r\nfunction scatterChart(src,xaxis,yaxis){\r\n    _drawGraph(src,\"scatter\",xaxis,yaxis);\r\n}\r\nfunction _drawGraph(src,type,xaxis,yaxis){\r\n    var x=[];\r\n    var y=[];\r\n    var xaxopt={\r\n        autotick: true,\r\n        ticks: 'outside',\r\n        tick0: 0,\r\n        dtick: 0.25,\r\n        ticklen: 8,\r\n        tickwidth: 4,\r\n        tickcolor: '#000',\r\n        range:_xrange\r\n    };\r\n    var yaxopt= {\r\n        autotick: true,\r\n        ticks: 'outside',\r\n        tick0: 0,\r\n        dtick: 0.25,\r\n        ticklen: 8,\r\n        tickwidth: 4,\r\n        tickcolor: '#000',\r\n        range:_yrange//,\r\n        //scaleanchor: \"x\"\r\n    };\r\n    for(var i=0;i<src.length;i++){\r\n        if(xaxis==\"time\"){\r\n            var xv=src[i][xaxis]*1000;\r\n            xaxopt[\"type\"]='date';\r\n        }else{\r\n            var xv=src[i][xaxis];\r\n        }\r\n        x.push(xv);\r\n        y.push(src[i][yaxis]);\r\n        \r\n    }\r\n    if(type==\"scatter\"){\r\n        var mode=\"markers\";\r\n    }else{\r\n        var mode=\"lines\";\r\n    }\r\n    var data=[{\r\n            x:x,\r\n            y:y,\r\n            type:type,\r\n            mode:mode\r\n    }];\r\n    if(_isDrawCor===true){\r\n        _corObj.mode='lines';\r\n        _corObj.line={dash:'dot',width:4};\r\n        data.push(_corObj);\r\n    }\r\n    var options={\r\n        xaxis:xaxopt,\r\n        yaxis:yaxopt,\r\n        annotations:[{\r\n                xref: 'paper',\r\n                yref: 'paper',\r\n                x: 0,\r\n                xanchor: 'right',\r\n                y: 1,\r\n                yanchor: 'bottom',\r\n                text: _yaxname,\r\n                showarrow: false\r\n            },{\r\n                xref: 'paper',\r\n                yref: 'paper',\r\n                x: 1,\r\n                xanchor: 'left',\r\n                y: 0,\r\n                yanchor: 'top',\r\n                text:_xaxname,\r\n                showarrow: false\r\n            }\r\n        ]\r\n    };\r\n    \r\n    window.Plotly.newPlot(_place,data,options);\r\n}\r\nfunction _correlation(dataObj,d1,d2,min,max,interval){\r\n    var obj={};\r\n    var data1Ave=0;\r\n    var data2Ave=0;\r\n    var data1Dev=[];\r\n    var data2Dev=[];\r\n    var data1Var=0;\r\n    var data2Var=0;\r\n    for(var o in dataObj){\r\n        data1Ave+=o[d1]-0;\r\n        data2Ave+=o[d2]-0;\r\n    }\r\n    data1Ave=data1Ave/dataObj.length;\r\n    data2Ave=data2Ave/dataObj.length;\r\n    //addText(\"calc\",\"95 \"+data1Ave+\"<br>\");\r\n    //addText(\"calc\",\"96 \"+data2Ave+\"<br>\");\r\n    \r\n    for(var o in dataObj){\r\n        data1Dev.push(o[d1]-data1Ave);\r\n        data2Dev.push(o[d2]-data2Ave);\r\n    }\r\n    //addText(\"calc\",\"102 \"+data1Dev+\"<br>\");\r\n    //addText(\"calc\",\"103 \"+data2Dev+\"<br>\");\r\n    \r\n    for(var k,v in data1Dev){\r\n        data1Var+=Math.pow(data1Dev[k],2);\r\n        data2Var+=Math.pow(data2Dev[k],2);\r\n    }\r\n    data1Var=data1Var/data1Dev.length;\r\n    data2Var=data2Var/data2Dev.length;\r\n    //addText(\"calc\",\"111 \"+data1Var+\"<br>\");\r\n    //addText(\"calc\",\"112 \"+data2Var+\"<br>\");\r\n    \r\n    var data1Sdev=Math.sqrt(data1Var);\r\n    var data2Sdev=Math.sqrt(data2Var);\r\n    //addText(\"calc\",\"116 \"+data1Sdev+\"<br>\");\r\n    //addText(\"calc\",\"117 \"+data2Sdev+\"<br>\");\r\n    \r\n    var dataCov=0;\r\n    for(var k,v in data1Dev){\r\n        dataCov+=data1Dev[k]*data2Dev[k];\r\n    }\r\n    dataCov=dataCov/data1Dev.length;\r\n    //addText(\"calc\",\"124 \"+dataCov+\"<br>\");\r\n    \r\n    var cor=dataCov/(data1Sdev*data2Sdev);\r\n    //addText(\"calc\",\"127 \"+cor+\"<br>\");\r\n    \r\n    var a=cor*(data2Sdev/data1Sdev);\r\n    var b=data2Ave-(a*data1Ave);\r\n    //addText(\"calc\",\"131 \"+a+\"<br>\");\r\n    //addText(\"calc\",\"132 \"+b);\r\n    var x=[];\r\n    var y=[];\r\n    for(var i=min;i<=max;i=i+interval){\r\n        x.push(i);\r\n        y.push(a*i+b);\r\n    }\r\n    return {x:x,y:y};\r\n}","p=new Plot(\"s\");\r\nvar src=[];\r\nvar d1raw=getText(\"data1\");\r\nvar d2raw=getText(\"data2\");\r\n\r\nvar d1L=d1raw.split(\"\\n\");\r\nvar d2L=d2raw.split(\"\\n\");\r\nfor(var i=0;i<d1L.length;i++){\r\n    var d1=d1L[i].split(\"\\t\");\r\n    var d2=d2L[i].split(\"\\t\");\r\n    var tmpObj={\"data1\":d1[1],\"data2\":d2[1],\"data3\":d1[0]};\r\n    src.push(tmpObj);\r\n}\r\np.setCorrelation(src,\"data1\",\"data2\",10,75,(75-10)/100);\r\np.scatterChart(src,\"data1\",\"data2\",corObj);"]}