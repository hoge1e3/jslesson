{"version":3,"sources":["C:/bin/Dropbox/workspace120324/Tonyu2/Projects/Image/FNlog.tonyu","C:/bin/Dropbox/workspace120324/Tonyu2/Projects/Image/Graph.tonyu","C:/bin/Dropbox/workspace120324/Tonyu2/Projects/Image/Indicator.tonyu","C:/bin/Dropbox/workspace120324/Tonyu2/Projects/Image/Main.tonyu"],"names":[],"mappings":"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","sourcesContent":["native location;\nnative $;\n//  C:/bin/Dropbox/workspace/jslesson/www/js/log/timeline/\n//  Tonyu.globals.$params={day:\"2018-07-09\", classid:\"XXXX\"}\n//print(\"HREF\",location.href);\nvar paramstr=location.href.replace(/^.*\\?/,\"\").replace(/#.*$/,\"\");\nvar params=$params||{};\nfor (var k of paramstr.split(\"&\")) {\n    var vals=k.split(\"=\");\n    if (vals.length==2) params[vals[0]]=vals[1];\n}\n//print(\"PARAMTEST\",params,params.dir);\n\n$Screen.setBGColor(\"white\");\n//colors={};\ncnt=0;\nday=params.day||\"2018-07-09\";\nymd=day.split(\"-\");\nday=new Date();\nday.setYear(ymd[0]-0);\nday.setMonth(ymd[1]-1);\nday.setDate(ymd[2]-0);\nclassid=params.classid;\ntimezone=(params.timezone||9)-0;\n//if (!classid) throw new Error(\"Class id not set\");\n\nday=day.getTime();\nday=floor(day/1000);\nday=floor(day/86400)*86400-timezone*3600;\nvar btime=day;//1528436818;\nvar duration=86400;\nvar etime=btime+duration;\nvar timelines=[],filerank={},topfile={};\nurl=location.host==\"bitarrow.eplang.jp\"?\n\"https://bitarrow.eplang.jp/bitarrowbeta/\":\"http://localhost/\";\nfiles=waitFor($.get(url+\"a.php?TeacherLog/getFileNames\") {day:btime,classid});\n//print(files);\nfor (cnt,line in files.split(\"\\n\")/*file(\"fnlog.txt\").lines()*/) {\n    if (cnt==0) continue;\n    var d=line.split(\"\\t\");\n    var user=d[0], filename=d[1], time=d[2];//-btime;\n    if (puser!=user) {\n        timeline=[];\n        timeline.user=user;\n        timelines.push(timeline);\n        fileappeared={};\n        puser=user;\n    }\n    if (time<etime) {\n        timeline.end=time;\n        if (!fileappeared[filename]) {\n            fileappeared[filename]=1;\n            filerank[filename]=(filerank[filename]||0)+1;\n        }\n        timeline.push{filename, time};   \n    }\n}\nfileranka=[];\nfor (var filename,count in filerank) {\n    fileranka.push{filename,count};\n}\nfileranka=fileranka.sort \\(a,b) {\n    return b.count-a.count;\n};\nfor (i=0;i<min(10,fileranka.length);i++) topfile[fileranka[i].filename]=1;\ntimelines=timelines.sort \\(a,b) {\n    return a.end-b.end;\n};\nnew Graph{src:this};\n/*\ndrawLines();\ndrawLegends();\np=-1;\n\\drawLines() {\n    if (linesYMax) {\n        $panel.fillStyle=\"white\";\n        $panel.fillRect(0,0,$screenWidth,linesYMax);\n    }\n    hslc=0;\n    cnt=0;\n    y=0;\n    for (timeline of timelines) {\n        for (e of timeline) {\n            var filename=e.filename, time=e.time;\n            x=time/duration*$screenWidth;\n            if (px) {\n                $panel.fillRect(px,y,clamp( (x-px),1, 10),$h);\n            }\n            px=x;\n            $panel.fillStyle=getColor(filename);\n            cnt++;\n            if (cnt%20==0) update();\n        }\n        y+=$h;\n    }\n    linesYMax=y;\n}\n\\x2time() {\n    \n}\n\\time2x() {\n    \n}\n\\drawLegends() {\n    x=10;sz=12;y+=30;by=y;\n    for (fn,col in colors) {\n        $panel.fillStyle=col;\n        //$panel.fillRect(0,y,5,5);\n        $panel.fillText(fn,x,y,sz,\"left\");\n        y+=sz;\n        if (y>$screenHeight-sz) {\n            y=by;\n            x+=100;\n        }\n    }\n}\n\n\\getColor(file) {\n    if (!topfile[file]) return \"#888\";\n    //if (!file) return \"#fff\";\n    if (colors[file]) return colors[file];\n    colors[file]=new Color{h:hslc, s:1, l:hslc>360?0.4:0.7};// (rnd(200),rnd(200),rnd(255));\n    hslc+=42;\n    return colors[file];\n}\n*/","\"field strict\";\nvar src:FNlog;\nvar colors={};\n$h=5;\n\nvar hslc=0;\nvar btime,etime,duration;\nsetRange();\n/*=src.btime;\nvar etime=src.etime;\nvar duration=etime-btime;*/\nvar linesYMax;\nnew Indicator{graph:this, timelines:src.timelines,layer:$frontLayer};\ndrawLines();\ndrawLegends();\nwhile(true) {\n    if (getkey(\"mouseleft\")==1) {\n        zoomIn($mouseX);\n        drawLines();\n    }\n    if (getkey(\"mouseright\")==1) {\n        zoomOut($mouseX);\n        drawLines();\n    }\n    update();\n}\np=-1;\n\\drawLines() {\n    if (linesYMax) {\n        $panel.fillStyle=\"white\";\n        $panel.fillRect(0,0,$screenWidth,linesYMax);\n    }\n    var cnt=0;\n    var px;\n    y=0;\n    for (var timeline of src.timelines) {\n        for (var e of timeline) {\n            var filename=e.filename, time=e.time;\n            x=time2x(time);\n            if (px) {\n                $panel.fillRect(px,y,clamp( (x-px),1, 10),$h);\n            }\n            px=x;\n            $panel.fillStyle=getColor(filename);\n            cnt++;\n            if (cnt%20==0) update();\n        }\n        y+=$h;\n    }\n    linesYMax=y;\n}\n\\zoomIn(x) {\n    var t=x2time(x);\n    var nd=duration/2;\n    setRange(t-nd/2,t+nd/2);\n}\n\\zoomOut(x) {\n    var t=x2time(x);\n    var nd=duration*2;\n    setRange(t-nd/2,t+nd/2);\n}\n\\setRange(b,e) {\n    btime=clamp(b||src.btime,src.btime,src.etime);\n    etime=clamp(e||src.etime,src.btime,src.etime);\n    duration=etime-btime;\n}\n\\x2time(x) {\n    return btime+(x/$screenWidth*duration);\n}\n\\time2x(time) {\n    return (time-btime)/duration*$screenWidth;   \n}\n\\drawLegends() {\n    var sz=12;\n    x=10;y+=30;\n    var by=y;\n    for (var fn,col in colors) {\n        $panel.fillStyle=col;\n        //$panel.fillRect(0,y,5,5);\n        $panel.fillText(fn,x,y,sz,\"left\");\n        y+=sz;\n        if (y>$screenHeight-sz) {\n            y=by;\n            x+=100;\n        }\n    }\n}\n\\getColor(file) {\n    if (!src.topfile[file]) return \"#888\";\n    //if (!file) return \"#fff\";\n    if (colors[file]) return colors[file];\n    colors[file]=new Color{h:hslc, s:1, l:hslc>360?0.4:0.7};// (rnd(200),rnd(200),rnd(255));\n    hslc+=42;\n    return colors[file];\n}\n\n","fillStyle=\"black\";\ntext=\"?\";\nzOrder=-10;\nwhile(true) {\n    x=$mouseX;\n    yy=$mouseY;\n    i=floor(yy/$h);\n    t=timelines[i];\n    y=yy+50;\n    if (t && t.user) {\n        text=t.user;\n    } else text=\"\";\n    ti=graph.x2time(x);\n    var d=new Date();\n    d.setTime(ti*1000);\n    text+=\"\\n\"+[d.getHours(),d.getMinutes()].join(\":\");\n    update();\n}","$Screen.setBGColor(\"white\");\ncols=[\"lime\",\"red\",\"blue\",\"yellow\", \"#f0f\"];\n\nfor(i=0;i<50;i++) {\n    x=0;\n    n=0;\n    for (j=0;j<400;j++) {\n        n+=rnd()*(0.1+i/100);\n        if (n>=5) break;\n        $panel.fillStyle=cols[floor(n)];\n        w=rnd(10)+1;\n        $panel.fillRect(x,i*2,w,2);\n        x+=w;\n    }\n    update();\n}"]}